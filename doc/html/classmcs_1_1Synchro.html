<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MCS: mcs::Synchro Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MCS
   &#160;<span id="projectnumber">0.3.3-alpha7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmcs_1_1Synchro.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmcs_1_1Synchro-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mcs::Synchro Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple class to implement "critical sections".  
 <a href="classmcs_1_1Synchro.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mcs_8hh_source.html">mcs.hh</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for mcs::Synchro:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classmcs_1_1Synchro__inherit__graph.png" border="0" usemap="#mcs_1_1Synchro_inherit__map" alt="Inheritance graph"/></div>
<map name="mcs_1_1Synchro_inherit__map" id="mcs_1_1Synchro_inherit__map">
<area shape="rect" id="node2" href="classmcs_1_1Dynamic__Array.html" title="mcs::Dynamic_Array\l\&lt; int \&gt;" alt="" coords="377,5,492,47"/>
<area shape="rect" id="node3" href="classmcs_1_1Dynamic__Array.html" title="mcs::Dynamic_Array\l\&lt; mcs::Data \&gt;" alt="" coords="377,83,492,124"/>
<area shape="rect" id="node4" href="classmcs_1_1Dynamic__Array.html" title="mcs::Dynamic_Array\l\&lt; mcs::Record \&gt;" alt="" coords="377,171,492,212"/>
<area shape="rect" id="node5" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects. " alt="" coords="137,73,252,115"/>
<area shape="rect" id="node6" href="classmcs_1_1Record.html" title="A dynamic array of Data objects. " alt="" coords="155,258,234,285"/>
<area shape="rect" id="node7" href="classmcs_1_1ClientInfo.html" title="Class holding information about a client connection. " alt="" coords="391,249,479,275"/>
<area shape="rect" id="node8" href="classmcs_1_1FITSWriter.html" title="Write a fits file. " alt="" coords="387,299,482,326"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa58b76d7761a1c968f4a4946c0656b62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#aa58b76d7761a1c968f4a4946c0656b62">count</a> ()</td></tr>
<tr class="memdesc:aa58b76d7761a1c968f4a4946c0656b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return how many times the current thread has locked the section.  <a href="#aa58b76d7761a1c968f4a4946c0656b62">More...</a><br /></td></tr>
<tr class="separator:aa58b76d7761a1c968f4a4946c0656b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb252a6eff363f3ac5f3bff91dc59e35"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35">enter</a> (int op=1, unsigned int timeout=0)</td></tr>
<tr class="memdesc:acb252a6eff363f3ac5f3bff91dc59e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter, or try to enter a critical section.  <a href="#acb252a6eff363f3ac5f3bff91dc59e35">More...</a><br /></td></tr>
<tr class="separator:acb252a6eff363f3ac5f3bff91dc59e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c726a3d1036b22f2273c26d94d99baf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf">leave</a> ()</td></tr>
<tr class="memdesc:a8c726a3d1036b22f2273c26d94d99baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave a critical section.  <a href="#a8c726a3d1036b22f2273c26d94d99baf">More...</a><br /></td></tr>
<tr class="separator:a8c726a3d1036b22f2273c26d94d99baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae69e7f4de1bd5415c864512cdc8c291e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmcs_1_1Synchro.html">Synchro</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#ae69e7f4de1bd5415c864512cdc8c291e">operator=</a> (const <a class="el" href="classmcs_1_1Synchro.html">Synchro</a> &amp;)</td></tr>
<tr class="memdesc:ae69e7f4de1bd5415c864512cdc8c291e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declared to avoid using of default assignment operator.  <a href="#ae69e7f4de1bd5415c864512cdc8c291e">More...</a><br /></td></tr>
<tr class="separator:ae69e7f4de1bd5415c864512cdc8c291e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dadfff3dd2cea80dfc915b39686f9b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#a7dadfff3dd2cea80dfc915b39686f9b3">Synchro</a> (const <a class="el" href="classmcs_1_1Synchro.html">Synchro</a> &amp;)</td></tr>
<tr class="memdesc:a7dadfff3dd2cea80dfc915b39686f9b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declared to avoid using of default copy constructor.  <a href="#a7dadfff3dd2cea80dfc915b39686f9b3">More...</a><br /></td></tr>
<tr class="separator:a7dadfff3dd2cea80dfc915b39686f9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0cc917a0b99ca5ee6782645fb02ad43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#ac0cc917a0b99ca5ee6782645fb02ad43">Synchro</a> ()</td></tr>
<tr class="memdesc:ac0cc917a0b99ca5ee6782645fb02ad43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ac0cc917a0b99ca5ee6782645fb02ad43">More...</a><br /></td></tr>
<tr class="separator:ac0cc917a0b99ca5ee6782645fb02ad43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d179e8c385d3a6a6f9ddcd18655b4ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#a0d179e8c385d3a6a6f9ddcd18655b4ed">synchronize</a> (bool setactive)</td></tr>
<tr class="memdesc:a0d179e8c385d3a6a6f9ddcd18655b4ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable the synchronization feature.  <a href="#a0d179e8c385d3a6a6f9ddcd18655b4ed">More...</a><br /></td></tr>
<tr class="separator:a0d179e8c385d3a6a6f9ddcd18655b4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b452b2d6392a4eed9f653c644c2650"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#af4b452b2d6392a4eed9f653c644c2650">tryenter</a> (unsigned int timeout=0)</td></tr>
<tr class="memdesc:af4b452b2d6392a4eed9f653c644c2650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a>, using op=MCS_SYNCHRO_TRY_LOCK if the parameter is 0, op=MCS_SYNCHRO_TRY_TIMED otherwise.  <a href="#af4b452b2d6392a4eed9f653c644c2650">More...</a><br /></td></tr>
<tr class="separator:af4b452b2d6392a4eed9f653c644c2650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3126c5415561a0d2fba44f494971a5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#ab3126c5415561a0d2fba44f494971a5d">~Synchro</a> ()</td></tr>
<tr class="memdesc:ab3126c5415561a0d2fba44f494971a5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#ab3126c5415561a0d2fba44f494971a5d">More...</a><br /></td></tr>
<tr class="separator:ab3126c5415561a0d2fba44f494971a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a52385e968802b2eb57f2d895f5fb3780"><td class="memItemLeft" align="right" valign="top">pthread_mutexattr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#a52385e968802b2eb57f2d895f5fb3780">attr</a></td></tr>
<tr class="memdesc:a52385e968802b2eb57f2d895f5fb3780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attribute of the mutex (PTHREAD_MUTEX_RECURSIVE_NP).  <a href="#a52385e968802b2eb57f2d895f5fb3780">More...</a><br /></td></tr>
<tr class="separator:a52385e968802b2eb57f2d895f5fb3780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ec7e4123b14161b010e569b8752074"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#ad3ec7e4123b14161b010e569b8752074">Count</a></td></tr>
<tr class="memdesc:ad3ec7e4123b14161b010e569b8752074"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many time the Mutex has been locked, or a thread entered a critical section.  <a href="#ad3ec7e4123b14161b010e569b8752074">More...</a><br /></td></tr>
<tr class="separator:ad3ec7e4123b14161b010e569b8752074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a51b01a3c97ecf58c9fde1484f63c4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#ab3a51b01a3c97ecf58c9fde1484f63c4">isActive</a></td></tr>
<tr class="memdesc:ab3a51b01a3c97ecf58c9fde1484f63c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this object is a "dummy" object or not.  <a href="#ab3a51b01a3c97ecf58c9fde1484f63c4">More...</a><br /></td></tr>
<tr class="separator:ab3a51b01a3c97ecf58c9fde1484f63c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5874ddda84d54769999d99b6395e92"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmcs_1_1Synchro.html#a3b5874ddda84d54769999d99b6395e92">mutex</a></td></tr>
<tr class="memdesc:a3b5874ddda84d54769999d99b6395e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mutex used to do the job.  <a href="#a3b5874ddda84d54769999d99b6395e92">More...</a><br /></td></tr>
<tr class="separator:a3b5874ddda84d54769999d99b6395e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple class to implement "critical sections". </p>
<p>Critical sections are portions of code which cannot be executed by two different threads simultaneously, that is one thread must wait that the other has finished before it can execute it. This is often useful to synchronize threads, or let them access shared variables. Critical sections are implemented in MCS using mutexes. For example if two threads would execute the same code, accessing the same variable, then you must implement a critical section like the following:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> shared; <span class="comment">//A variable shared between threads.</span></div><div class="line"><a class="code" href="classmcs_1_1Synchro.html#ac0cc917a0b99ca5ee6782645fb02ad43">Synchro</a> syn; <span class="comment">//Object used to implement the critical section.</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <span class="keyword">function</span>() {</div><div class="line">  syn.enter();  <span class="comment">//Enter the critical section</span></div><div class="line"></div><div class="line">  ...           <span class="comment">//Manipulate the shared variable</span></div><div class="line"></div><div class="line">  syn.leave()   <span class="comment">//Exit the critical section</span></div><div class="line">}</div></div><!-- fragment --><p>In this code, when multiple threads are executing the function at the same time, then it is guaranteed that only one thread will execute the code in the critical section, while the other are suspended (and consume no CPU time).</p>
<p>Anyway developer should pay attention because critical sections, or better a call to <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a>, can be a potential deadlock, that is a point at which the thread remain suspended forever. Actually a thread can be killed (or better cancelled) by itself or by other threads only when it is executing a so called "cancellation point", typically I/O operations or some system call (like (sleep()). The system call to lock a mutex is not a cancellation point, so if the thread is suspended waiting to lock a mutex it cannot be cancelled, the only way to kill it is to kill the entire program using signals. On the other hand <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a> and <a class="el" href="classmcs_1_1Synchro.html#af4b452b2d6392a4eed9f653c644c2650" title="Wrapper around enter(), using op=MCS_SYNCHRO_TRY_LOCK if the parameter is 0, op=MCS_SYNCHRO_TRY_TIMED...">tryenter()</a> are cancellation points, so if a thread received a cancellation request while it was suspended, this methods won't return at all. In other words, once a thread is waiting to enter a critical section that is ran by some other thread, it can't be cancelled until the other thread leave the section. For this reason every critical section must be balanced, that is it must have a starting point (using the <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a> or <a class="el" href="classmcs_1_1Synchro.html#af4b452b2d6392a4eed9f653c644c2650" title="Wrapper around enter(), using op=MCS_SYNCHRO_TRY_LOCK if the parameter is 0, op=MCS_SYNCHRO_TRY_TIMED...">tryenter()</a> methods) and an ending point (using the <a class="el" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf" title="Leave a critical section. ">leave()</a> method).</p>
<p>For these reasons developers should design critical sections appropriately, here we'll give some useful hints:</p>
<ul>
<li>critical sections aren't useful in that code executed by only one thread;</li>
<li>critical sections are needed when multiple threads wants to modify a shared avariable at the same time;</li>
<li>critical sections aren't needed when multiple threads wants to read a shared avariable at the same time;</li>
<li><p class="startli">In critical sections you usually put a call to <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a> at the beginning of the section and a <a class="el" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf" title="Leave a critical section. ">leave()</a> at the end, but this could not be enough to implement a balanced critical section, because the control flow can be interupted by several event:</p><ul>
<li>a "return" instruction is encountered;</li>
<li>a "goto" instruction is encountered;</li>
<li>an exception is thrown;</li>
<li>the thread is cancelled (either by other threads or by itself);</li>
</ul>
<p class="startli">In the first three cases you MUST provide the balancing call to <a class="el" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf" title="Leave a critical section. ">leave()</a>, anyway we recommend not to use any "return" or "goto" instruction inside critical sections. To handle exceptions you can write a code like the following:</p>
</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35">enter</a>();</div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">   .... <span class="comment">//Critical section</span></div><div class="line">}</div><div class="line"><span class="keywordflow">catch</span> (Event e) {</div><div class="line">  <a class="code" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf">leave</a>();</div><div class="line">  <span class="keywordflow">throw</span> e;</div><div class="line">}</div><div class="line"><a class="code" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf">leave</a>();</div></div><!-- fragment --><p>As you can see there are one call to the <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a> method, but two call to <a class="el" href="classmcs_1_1Synchro.html#a8c726a3d1036b22f2273c26d94d99baf" title="Leave a critical section. ">leave()</a>, one for each possible exit point in the function. The code above can be easily implemented using the MCS_CRITICAL_SECTION macros. In the fourth case the <a class="el" href="classmcs_1_1Synchro.html" title="A simple class to implement &quot;critical sections&quot;. ">Synchro</a> object will leave the section automatically;</p>
<p>Critical sections can be nested, that is a thread can enter a critical section any number of time, while the others are waiting. Each thread must also leave critical sections the same number of time. Other threads are allowed to enter a critical section once it is completely free. </p>

<p class="definition">Definition at line <a class="el" href="mcs_8hh_source.html#l02187">2187</a> of file <a class="el" href="mcs_8hh_source.html">mcs.hh</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7dadfff3dd2cea80dfc915b39686f9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dadfff3dd2cea80dfc915b39686f9b3">&#9670;&nbsp;</a></span>Synchro() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mcs::Synchro::Synchro </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmcs_1_1Synchro.html">Synchro</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declared to avoid using of default copy constructor. </p>
<dl class="section warning"><dt>Warning</dt><dd>This constructor is declared but not implemented. If you try to use it you will get a compilation error. </dd></dl>

</div>
</div>
<a id="ac0cc917a0b99ca5ee6782645fb02ad43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0cc917a0b99ca5ee6782645fb02ad43">&#9670;&nbsp;</a></span>Synchro() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mcs::Synchro::Synchro </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>This contructor initialize a "dummy" object, that is an object with synchronization disabled. To enable it call <a class="el" href="classmcs_1_1Synchro.html#a0d179e8c385d3a6a6f9ddcd18655b4ed" title="Enable or disable the synchronization feature. ">synchronize()</a>.</p>
<p>That is because several class are derived from <a class="el" href="classmcs_1_1Synchro.html" title="A simple class to implement &quot;critical sections&quot;. ">Synchro</a>, but not all objects of those classes needs to be synchronized. </p>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00058">58</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<a id="ab3126c5415561a0d2fba44f494971a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3126c5415561a0d2fba44f494971a5d">&#9670;&nbsp;</a></span>~Synchro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mcs::Synchro::~Synchro </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00073">73</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa58b76d7761a1c968f4a4946c0656b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58b76d7761a1c968f4a4946c0656b62">&#9670;&nbsp;</a></span>count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mcs::Synchro::count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return how many times the current thread has locked the section. </p>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00085">85</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<a id="acb252a6eff363f3ac5f3bff91dc59e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb252a6eff363f3ac5f3bff91dc59e35">&#9670;&nbsp;</a></span>enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mcs::Synchro::enter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>op</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter, or try to enter a critical section. </p>
<p>If other threads are locking the critical section the behaviour of this method depends on the first parameter:</p>
<ul>
<li>MCS_SYNCHRO_LOCK, the thread will wait forever until the critical section became unlocked.</li>
<li>MCS_SYNCHRO_TRY_LOCK, the thread will try to enter the critical section, then return immediately.</li>
<li>MCS_SYNCHRO_TRY_TIMED, the thread will try to enter the critical section, if it cannot lock the section after the timeout has expired it will return.</li>
</ul>
<p>If you specify MCS_SYNCHRO_LOCK as first parameter, then the thread must lock the section before it can do anything else. Once the section has been locked this method will return, or the thread will be cancelled (this method won't return) if a cancellation request arrived in the meanwhile.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>A code specifying the behaviour in case the section is already locked;</td></tr>
    <tr><td class="paramname">timeout</td><td>Use this only if op=MCS_SYNCHRO_TRY_TIMED, the timeout in milliseconds after which a try to lock the section will fail;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the section has been locked, false otherwise. If op=MCS_SYNCHRO_LOCK this method will always return true or never return. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00143">143</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<a id="a8c726a3d1036b22f2273c26d94d99baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c726a3d1036b22f2273c26d94d99baf">&#9670;&nbsp;</a></span>leave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mcs::Synchro::leave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Leave a critical section. </p>
<p>Leave a critical section (unlock the mutex). There must be a call to this method for each exit point in the critical section.</p>
<dl class="section return"><dt>Returns</dt><dd>How many times the thread should call this method to completely unlock the section. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00194">194</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<a id="ae69e7f4de1bd5415c864512cdc8c291e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae69e7f4de1bd5415c864512cdc8c291e">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmcs_1_1Synchro.html">Synchro</a>&amp; mcs::Synchro::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmcs_1_1Synchro.html">Synchro</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declared to avoid using of default assignment operator. </p>
<dl class="section warning"><dt>Warning</dt><dd>This operator is declared but not implemented. If you try to use it you will get a compilation error. </dd></dl>

</div>
</div>
<a id="a0d179e8c385d3a6a6f9ddcd18655b4ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d179e8c385d3a6a6f9ddcd18655b4ed">&#9670;&nbsp;</a></span>synchronize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mcs::Synchro::synchronize </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>setactive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable the synchronization feature. </p>
<p>You must enable or disable the synchronization feature before callling any other method of this class, otherwise an exception will be thrown.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">setactive</td><td>If false this became a "dummy" object, that is every call returns immediately without being synchronized. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00089">89</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<a id="af4b452b2d6392a4eed9f653c644c2650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b452b2d6392a4eed9f653c644c2650">&#9670;&nbsp;</a></span>tryenter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mcs::Synchro::tryenter </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around <a class="el" href="classmcs_1_1Synchro.html#acb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section. ">enter()</a>, using op=MCS_SYNCHRO_TRY_LOCK if the parameter is 0, op=MCS_SYNCHRO_TRY_TIMED otherwise. </p>

<p class="definition">Definition at line <a class="el" href="Thread_8cc_source.html#l00212">212</a> of file <a class="el" href="Thread_8cc_source.html">Thread.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a52385e968802b2eb57f2d895f5fb3780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52385e968802b2eb57f2d895f5fb3780">&#9670;&nbsp;</a></span>attr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutexattr_t mcs::Synchro::attr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attribute of the mutex (PTHREAD_MUTEX_RECURSIVE_NP). </p>

<p class="definition">Definition at line <a class="el" href="mcs_8hh_source.html#l02205">2205</a> of file <a class="el" href="mcs_8hh_source.html">mcs.hh</a>.</p>

</div>
</div>
<a id="ad3ec7e4123b14161b010e569b8752074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ec7e4123b14161b010e569b8752074">&#9670;&nbsp;</a></span>Count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mcs::Synchro::Count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How many time the Mutex has been locked, or a thread entered a critical section. </p>

<p class="definition">Definition at line <a class="el" href="mcs_8hh_source.html#l02208">2208</a> of file <a class="el" href="mcs_8hh_source.html">mcs.hh</a>.</p>

</div>
</div>
<a id="ab3a51b01a3c97ecf58c9fde1484f63c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a51b01a3c97ecf58c9fde1484f63c4">&#9670;&nbsp;</a></span>isActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mcs::Synchro::isActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether this object is a "dummy" object or not. </p>

<p class="definition">Definition at line <a class="el" href="mcs_8hh_source.html#l02211">2211</a> of file <a class="el" href="mcs_8hh_source.html">mcs.hh</a>.</p>

</div>
</div>
<a id="a3b5874ddda84d54769999d99b6395e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5874ddda84d54769999d99b6395e92">&#9670;&nbsp;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t mcs::Synchro::mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The mutex used to do the job. </p>

<p class="definition">Definition at line <a class="el" href="mcs_8hh_source.html#l02202">2202</a> of file <a class="el" href="mcs_8hh_source.html">mcs.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mcs_8hh_source.html">mcs.hh</a></li>
<li><a class="el" href="Thread_8cc_source.html">Thread.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<hr size="1">
<table border=0 bgcolor="9f95ff" width="100%">
  <tr>
    <td>
      <a href="http://ross.iasfbo.inaf.it/MCS/" target="_blank">
        <img src="mcslogo_ssss_c.gif" alt="mcslogo" align="left" border="0">
      </a>
    </td>
<!--
    <td>
    <p align="middle">
      <a href="http://ross.iasfbo.inaf.it/mcs/" target="_blank">
         MCS (My Customizable Server)
      </a>
      <br>
      <a href="mailto:Giorgio Calderone <gcalderone@ifc.inaf.it>">
         Giorgio Calderone
      </a>
    </p>
    </td>
    <td>
      <a href="mailto:Giorgio Calderone <gcalderone@ifc.inaf.it>">
        <img src="mcslogo_sss_c.gif" alt="giorgio" align="right" border="0">
      </a>
    </td>
-->
    <td>
        <p align="right">
	MCS (My Customizable Server) ver. 0.3.3-alpha7
	<br>
	Documentation generated on Mon May 28 07:39:41 UTC 2018
	</p>
    </td>
  </tr>
</table>
