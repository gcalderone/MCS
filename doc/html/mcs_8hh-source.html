<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MCS: mcs.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<h1>mcs.hh</h1><a href="mcs_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// ----------------------------------------------------------------------^</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (C) 2004 -- 2011, Giorgio Calderone</span>
<a name="l00003"></a>00003 <span class="comment">// (mailto: &lt;gcalderone@ifc.inaf.it&gt;)</span>
<a name="l00004"></a>00004 <span class="comment">// </span>
<a name="l00005"></a>00005 <span class="comment">// This file is part of MCS.</span>
<a name="l00006"></a>00006 <span class="comment">// </span>
<a name="l00007"></a>00007 <span class="comment">// MCS is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">// the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">// (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment">// </span>
<a name="l00012"></a>00012 <span class="comment">// MCS is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">// along with MCS; if not, write to the Free Software</span>
<a name="l00019"></a>00019 <span class="comment">// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">// ----------------------------------------------------------------------$</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef DEF_MCS_HH</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define DEF_MCS_HH</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">//The symbol COMPILING_MCS is defined when we are compiling the MCS library</span>
<a name="l00037"></a>00037 <span class="preprocessor">#undef COMPILING_MCS</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>  <span class="comment">//We are compiling the MCS library</span>
<a name="l00040"></a>00040 <span class="preprocessor">#define COMPILING_MCS</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>  <span class="comment">//We are compiling a MCS-based program</span>
<a name="l00043"></a>00043 <span class="preprocessor">#endif //HAVE_CONFIG_H</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">//We need the following includes only when compiling the MCS library</span>
<a name="l00048"></a>00048 <span class="preprocessor">#ifdef COMPILING_MCS</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------------</span>
<a name="l00050"></a>00050 <span class="comment">//System's library include</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">//Portability with old libc</span>
<a name="l00053"></a>00053 <span class="comment">// LN</span>
<a name="l00054"></a>00054 <span class="preprocessor">#ifndef __APPLE__</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#include &lt;wait.h&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#endif</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;dirent.h&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;arpa/inet.h&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &lt;net/if.h&gt;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &lt;sys/socket.h&gt;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;netdb.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">//Portability with old libc</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#endif  //COMPILING_MCS</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">//The following include is necessary for some network related type</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;netinet/in.h&gt;</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">//The following includes are probably needed by user programs, so we</span>
<a name="l00086"></a>00086 <span class="comment">//include them here instead of in the "COMPILING_MCS" section.</span>
<a name="l00087"></a>00087 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00089"></a>00089 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00090"></a>00090 <span class="keyword">using namespace </span>std;
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="comment">//#include &lt;stdlib.h&gt;</span>
<a name="l00093"></a>00093 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="comment">//LN</span>
<a name="l00096"></a>00096 <span class="preprocessor">#include &lt;cstdio&gt;</span>
<a name="l00097"></a>00097 <span class="preprocessor">#include &lt;cstring&gt;</span>
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00103"></a>00103 <span class="comment">//MCS configuration file.</span>
<a name="l00104"></a>00104 <span class="preprocessor">#include "mcs_config.h"</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------------</span>
<a name="l00110"></a>00110 <span class="comment">//MySQL include, this will be needed by user programs until the</span>
<a name="l00111"></a>00111 <span class="comment">//"mysql_stmt_param_metadata" function is available.</span>
<a name="l00112"></a>00112 <span class="preprocessor">#include &lt;mysql.h&gt;</span>
<a name="l00113"></a><a class="code" href="mcs_8hh.html#7da8a4d740856c711f41185cc2313253">00113</a> <span class="preprocessor">#define MYSQL_SOCK NULL</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>
<a name="l00115"></a>00115 <span class="preprocessor">#else</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><span class="comment">//If MySQL facilities are disabled we need the following declaration to</span>
<a name="l00117"></a>00117 <span class="comment">//compile correctly.</span>
<a name="l00118"></a>00118 <span class="preprocessor">#define MYSQL_BIND char</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span><span class="preprocessor">#define my_bool bool</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00121"></a>00121 <span class="comment">//This has been copied from MySQL's include file mysql_time.h</span>
<a name="l00122"></a>00122 <span class="keyword">typedef</span> <span class="keyword">struct </span>st_mysql_time
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  year, month, day, hour, minute, second;
<a name="l00125"></a>00125 } MYSQL_TIME;
<a name="l00126"></a>00126 <span class="preprocessor">#endif  //ENABLE_MYSQL</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">//OpenSSL include</span>
<a name="l00131"></a>00131 <span class="preprocessor">#ifdef HAVE_OPENSSL_SSL_H</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="preprocessor">#include &lt;openssl/ssl.h&gt;</span>
<a name="l00133"></a>00133 <span class="preprocessor">#include &lt;openssl/err.h&gt;</span>
<a name="l00134"></a>00134 <span class="preprocessor">#endif //HAVE_OPENSSL_SSL_H</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="preprocessor">#ifdef COMPILING_MCS</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>
<a name="l00140"></a>00140 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00141"></a>00141 <span class="comment">//PCRE include</span>
<a name="l00142"></a>00142 <span class="preprocessor">#include &lt;pcrecpp.h&gt;</span>
<a name="l00143"></a>00143 <span class="preprocessor">#endif  //COMPILING_MCS</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>
<a name="l00145"></a>00145 
<a name="l00155"></a>00155 <span class="keyword">namespace </span>mcs
<a name="l00156"></a>00156 {
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00161"></a>00161 <span class="comment">//MCS constants</span>
<a name="l00162"></a>00162 
<a name="l00164"></a><a class="code" href="mcs_8hh.html#3663a5b3629913db3e02649843c7e5c6">00164</a> <span class="preprocessor">#define MCS_DEFAULT_PORT 6523</span>
<a name="l00165"></a>00165 <span class="preprocessor"></span>
<a name="l00166"></a>00166 
<a name="l00173"></a><a class="code" href="mcs_8hh.html#1cdee0e385ceab25d2781f6f59b9ca0e">00173</a> <span class="preprocessor">#define MCS_DEFAULTCHUNKSIZE      16384</span>
<a name="l00174"></a>00174 <span class="preprocessor"></span>
<a name="l00175"></a>00175 
<a name="l00177"></a><a class="code" href="mcs_8hh.html#0e1da8966712a8ad884d5e763dbf4d88">00177</a> <span class="preprocessor">#define MCS_DEFAULT_MAX_USERS 100</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>
<a name="l00179"></a>00179 
<a name="l00181"></a><a class="code" href="mcs_8hh.html#9a47084ef05fb89ff616a73ede715981">00181</a> <span class="preprocessor">#define MCS_DEFAULT_CLIENT_TIMEOUT 10 * 60 * 1000</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span><span class="comment">//                                 min  sec  msec</span>
<a name="l00183"></a>00183 
<a name="l00185"></a><a class="code" href="mcs_8hh.html#43af1d4ff8875b624c2ad8e7b67b14d9">00185</a> <span class="preprocessor">#define MCS_COMMBUFSIZE    1024</span>
<a name="l00186"></a>00186 <span class="preprocessor"></span>
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="mcs_8hh.html#992e149a68cab37b3c1d074ff3b2bc55">00189</a> <span class="preprocessor">#define MCS_SSLCERT     "mcscert.pem"</span>
<a name="l00190"></a><a class="code" href="mcs_8hh.html#da281a1a7202d2378a97758c43d1fdb2">00190</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_SSLPRIV     "mcspkey.pem"</span>
<a name="l00191"></a>00191 <span class="preprocessor"></span>
<a name="l00192"></a>00192 <span class="comment">//Grants constants</span>
<a name="l00193"></a><a class="code" href="mcs_8hh.html#b31e88b5842b23fee40438f3bee1a4d1">00193</a> <span class="preprocessor">#define MCS_GRANT_NO_GRANTS        0</span>
<a name="l00194"></a><a class="code" href="mcs_8hh.html#d0ee7d0134d91fd618ceb2736a7f7ee6">00194</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_LOGIN            1</span>
<a name="l00195"></a><a class="code" href="mcs_8hh.html#0d5e069dbb8636f2953d5cd7db3cef2c">00195</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_SQL_SCRIPTS      2</span>
<a name="l00196"></a><a class="code" href="mcs_8hh.html#464959924e3f3e4055cf33e25f822d7e">00196</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_SCRIPTS          4</span>
<a name="l00197"></a><a class="code" href="mcs_8hh.html#17819b62a7fa666508f8a4fed6041855">00197</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_QUERY            8</span>
<a name="l00198"></a><a class="code" href="mcs_8hh.html#47a913113a745e7b9b78fe3c1c26f578">00198</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_BATCH           16</span>
<a name="l00199"></a><a class="code" href="mcs_8hh.html#29bd88446d33eff5a0b578646683fc7c">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_GET             32</span>
<a name="l00200"></a><a class="code" href="mcs_8hh.html#0ae40dcab3ba6ce1557dd3663acb84cf">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_PUT             64</span>
<a name="l00201"></a><a class="code" href="mcs_8hh.html#7baa417ff0401f25c822d9102cbb07ce">00201</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_SYS            128</span>
<a name="l00202"></a><a class="code" href="mcs_8hh.html#6d1f1fb9dac7f172a5d4c2c4d6f8da46">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_ADMIN          256</span>
<a name="l00203"></a><a class="code" href="mcs_8hh.html#fa13e1324432d2c7f0ace421730b6229">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_GRANT_ALL            511</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00205"></a>00205 
<a name="l00207"></a><a class="code" href="mcs_8hh.html#3a4603c48f5cdec886fbb496fd3a0ff5">00207</a> <span class="preprocessor">#define MCS_BANNER "\nMy Customizable Server (MCS) ver. " PACKAGE_VERSION "\n"</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">00210</a> <span class="preprocessor">#define MCS_MISSING_COPY_CONSTRUCTOR(CLASS) \</span>
<a name="l00211"></a>00211 <span class="preprocessor">CLASS(const CLASS&amp;);</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">00214</a> <span class="preprocessor">#define MCS_MISSING_ASSIGNMENT_OPERATOR(CLASS)  \</span>
<a name="l00215"></a>00215 <span class="preprocessor">CLASS&amp; operator=(const CLASS&amp;);</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>
<a name="l00217"></a>00217 
<a name="l00221"></a><a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730">00221</a> <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730" title="Values to be used in Buffer class constructor.">BufferFreeOnDestroy</a>
<a name="l00222"></a>00222 {
<a name="l00223"></a><a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc580173011c897691e03531db0ea127460b02f33">00223</a>   <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc580173011c897691e03531db0ea127460b02f33">AUTO_FREE</a>, 
<a name="l00224"></a><a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc58017307c7d89f377d9e2daac9b412a8d01617e">00224</a>   <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc58017307c7d89f377d9e2daac9b412a8d01617e">DONT_FREE</a>  
<a name="l00225"></a>00225 };
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00232"></a><a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a">00232</a> <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a>
<a name="l00233"></a>00233 {
<a name="l00234"></a><a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1aebdcbb149039624e4bfac1e0eef99327">00234</a>   <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1aebdcbb149039624e4bfac1e0eef99327">DONT_THROW</a>,  
<a name="l00235"></a><a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">00235</a>   <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>        
<a name="l00236"></a>00236 };
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00242"></a>00242 <span class="comment">//Protocol Specification:</span>
<a name="l00243"></a>00243 
<a name="l00245"></a><a class="code" href="mcs_8hh.html#57d96b4e8c778c066547c3dc99b98617">00245</a> <span class="preprocessor">#define MCS_PRE                         "#"</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span>
<a name="l00248"></a><a class="code" href="mcs_8hh.html#65963c6254a59cd463d42dc3dde9cda1">00248</a> <span class="preprocessor">#define MCS_SEP                         "|"</span>
<a name="l00249"></a>00249 <span class="preprocessor"></span>
<a name="l00251"></a><a class="code" href="mcs_8hh.html#18c1333eb002476a5cd36e93369953b5">00251</a> <span class="preprocessor">#define MCS_PROMPT_OK           MCS_PRE "0--"</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span>
<a name="l00254"></a><a class="code" href="mcs_8hh.html#abdd6cecc1fdb68b07213df9b6ddba58">00254</a> <span class="preprocessor">#define MCS_PROMPT_WARN         MCS_PRE "0W-"</span>
<a name="l00255"></a>00255 <span class="preprocessor"></span>
<a name="l00257"></a><a class="code" href="mcs_8hh.html#7dafdc5c32bc4e129d9cfe7ed5759e67">00257</a> <span class="preprocessor">#define MCS_PROMPT_ERROR        MCS_PRE "0E-"</span>
<a name="l00258"></a>00258 <span class="preprocessor"></span>
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="comment">//Protocol messages and numeric identifiers</span>
<a name="l00261"></a>00261 <span class="preprocessor">#include &lt;mcsmsg.hh&gt;</span>
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <span class="comment">//Protocol commands: (help lines MUST ends on column 93)</span>
<a name="l00264"></a>00264 
<a name="l00266"></a><a class="code" href="mcs_8hh.html#68a838387a2356457499150767a60906">00266</a> <span class="preprocessor">#define MCS_CMD_NOP                     "NOP"</span>
<a name="l00267"></a><a class="code" href="mcs_8hh.html#30c095ca2bc093062d2583b21e5760b4">00267</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_NOP_HELP                "No operation (dummy) command."</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span>
<a name="l00269"></a>00269 
<a name="l00271"></a><a class="code" href="mcs_8hh.html#b3c09b6d5e17caa7d9436a7dd34cb620">00271</a> <span class="preprocessor">#define MCS_CMD_CLIENT_INFO             "CLINFO"</span>
<a name="l00272"></a><a class="code" href="mcs_8hh.html#4b1a3d69f74e731e55a2b163721f0325">00272</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_CLIENT_INFO_HELP        "Return all client informations."</span>
<a name="l00273"></a>00273 <span class="preprocessor"></span>
<a name="l00274"></a>00274 
<a name="l00276"></a><a class="code" href="mcs_8hh.html#2aa4b58c7038c36840b92b67ef0ad94b">00276</a> <span class="preprocessor">#define MCS_CMD_USERNAME                "USR"</span>
<a name="l00277"></a><a class="code" href="mcs_8hh.html#c8d1efc87521483d18ee6c11b31f6aad">00277</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_USERNAME_HELP           "Supply user name.\n" \</span>
<a name="l00278"></a>00278 <span class="preprocessor">                                        "USR &lt;user_name&gt;"</span>
<a name="l00279"></a>00279 <span class="preprocessor"></span>
<a name="l00281"></a><a class="code" href="mcs_8hh.html#bed512dd5dce1e9df1cc30d0a41200f5">00281</a> <span class="preprocessor">#define MCS_CMD_PASSWORD                "PWD"</span>
<a name="l00282"></a><a class="code" href="mcs_8hh.html#345378a7aa9199831e24d6ea5219598d">00282</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_PASSWORD_HELP           "Supply password.\n"  \</span>
<a name="l00283"></a>00283 <span class="preprocessor">                                        "PWD &lt;password&gt;"</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span>
<a name="l00286"></a><a class="code" href="mcs_8hh.html#00d7f07690f371de6399b2e3d267ac86">00286</a> <span class="preprocessor">#define MCS_CMD_DBNAME                  "DBN"</span>
<a name="l00287"></a><a class="code" href="mcs_8hh.html#353425a1c5afd5f4b28b3cf94eb121b9">00287</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_DBNAME_HELP             "Supply application (database) name.\n" \</span>
<a name="l00288"></a>00288 <span class="preprocessor">                                        "DBN &lt;application_name&gt;"</span>
<a name="l00289"></a>00289 <span class="preprocessor"></span>
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="mcs_8hh.html#f5bb5dd7bdba98240325df2059f62a12">00292</a> <span class="preprocessor">#define MCS_CMD_DBCONNECT               "CON"</span>
<a name="l00293"></a><a class="code" href="mcs_8hh.html#7e7f005ea3855dad440428436105f1ba">00293</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_DBCONNECT_HELP          "Finalize the authentication process and log in.\n" \</span>
<a name="l00294"></a>00294 <span class="preprocessor">                                        "CON"</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span>
<a name="l00297"></a><a class="code" href="mcs_8hh.html#ac7e18879fe31eb5b337dc7a0aab4058">00297</a> <span class="preprocessor">#define MCS_CMD_CLOSECLIENT             "BYE"</span>
<a name="l00298"></a><a class="code" href="mcs_8hh.html#d19a22562ee263505d0189c6fc1d59d2">00298</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_CLOSECLIENT_HELP        "Close the session.\n" \</span>
<a name="l00299"></a>00299 <span class="preprocessor">                                        "BYE"</span>
<a name="l00300"></a>00300 <span class="preprocessor"></span>
<a name="l00302"></a><a class="code" href="mcs_8hh.html#429174997b98ee73ef8fa027e893d47e">00302</a> <span class="preprocessor">#define MCS_CMD_CID                     "CID"</span>
<a name="l00303"></a><a class="code" href="mcs_8hh.html#832764c3975350ae7032a3c7ee3ec5a5">00303</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_CID_HELP                "Retrieve the Client identifier.\n" \</span>
<a name="l00304"></a>00304 <span class="preprocessor">                                        "CID"</span>
<a name="l00305"></a>00305 <span class="preprocessor"></span>
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 
<a name="l00312"></a><a class="code" href="mcs_8hh.html#ec67c654940dc0a703310d2e2145ff60">00312</a> <span class="preprocessor">#define MCS_CMD_RECORD                  "FETCH"</span>
<a name="l00313"></a><a class="code" href="mcs_8hh.html#f9e53fd98af1960bbd4a10a04f7d8c61">00313</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_RECORD_HELP             "Retrieve the record at a specified position, or at\n" \</span>
<a name="l00314"></a>00314 <span class="preprocessor">                                        "current position (if none is specified) of the last\n" \</span>
<a name="l00315"></a>00315 <span class="preprocessor">                                        "query executed.\n" \</span>
<a name="l00316"></a>00316 <span class="preprocessor">                                        "FETCH [position]"</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span>
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l00320"></a>00320 <span class="preprocessor"></span><span class="comment">//Commands for DB access</span>
<a name="l00321"></a>00321 
<a name="l00323"></a><a class="code" href="mcs_8hh.html#4ecba63de7e8d28f0d6f96d94b926ce9">00323</a> <span class="preprocessor">#define MCS_CMD_QUERY                   "QRY"</span>
<a name="l00324"></a><a class="code" href="mcs_8hh.html#d8391c53fec86f672eab6630c42afa0d">00324</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_QUERY_HELP              "Execute queries on the database.\n" \</span>
<a name="l00325"></a>00325 <span class="preprocessor">                                        "QRY &lt;SQL query&gt;"</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>
<a name="l00328"></a><a class="code" href="mcs_8hh.html#6bda3dd139c378cbf1512e456cd016ca">00328</a> <span class="preprocessor">#define MCS_CMD_SENDQUERYRES            "QRES"</span>
<a name="l00329"></a><a class="code" href="mcs_8hh.html#d93aedad4bd02a1162bd723292a668cc">00329</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_SENDQUERYRES_HELP       "Retrieve a file with an ASCII dump of the entire set\n" \</span>
<a name="l00330"></a>00330 <span class="preprocessor">                                        "of records returned by the last query." \</span>
<a name="l00331"></a>00331 <span class="preprocessor">                                        "QRES"</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span>
<a name="l00333"></a>00333 
<a name="l00335"></a><a class="code" href="mcs_8hh.html#834d6f1889e0edfa59ceaea4182c455c">00335</a> <span class="preprocessor">#define MCS_CMD_TABLELIST               "TLIST"</span>
<a name="l00336"></a><a class="code" href="mcs_8hh.html#28ae03d9ec895ca3b33e14dd453d161d">00336</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_TABLELIST_HELP          "Retrieve the list of tables actually present in the\n" \</span>
<a name="l00337"></a>00337 <span class="preprocessor">                                        "database.\n" \</span>
<a name="l00338"></a>00338 <span class="preprocessor">                                        "TLIST"</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>
<a name="l00341"></a><a class="code" href="mcs_8hh.html#edb59fc3d03992ac7aabaef1a3082470">00341</a> <span class="preprocessor">#define MCS_CMD_TABLEINFO               "TINFO"</span>
<a name="l00342"></a><a class="code" href="mcs_8hh.html#169546c105f227f6afc917ef4e31d721">00342</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_TABLEINFO_HELP          "Retrieve information about a table.\n" \</span>
<a name="l00343"></a>00343 <span class="preprocessor">                                        "TINFO"</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span><span class="preprocessor">#endif  //ENABLE_MYSQL</span>
<a name="l00345"></a>00345 <span class="preprocessor"></span>
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 <span class="comment">//Options (to be used with "-" like in a shell command)</span>
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 
<a name="l00353"></a><a class="code" href="mcs_8hh.html#e0aa08f27f854a1186d3ddc7bc070156">00353</a> <span class="preprocessor">#define MCS_OPT_SAVEQUERYFITS           "sqfits"</span>
<a name="l00354"></a><a class="code" href="mcs_8hh.html#1433aa4b154b691d5948da1f9c0a24a4">00354</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_OPT_SAVEQUERYFITS_HELP      "Save query result in FITS format.\n " \</span>
<a name="l00355"></a>00355 <span class="preprocessor">                                        "-sqfits"</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span>
<a name="l00358"></a><a class="code" href="mcs_8hh.html#86a66880c989d2d9f5b47d0ec90c1cbe">00358</a> <span class="preprocessor">#define MCS_OPT_SAVEQUERYASCII          "sqascii"</span>
<a name="l00359"></a><a class="code" href="mcs_8hh.html#839d3a8260ed08781551be6938180f11">00359</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_OPT_SAVEQUERYASCII_HELP     "Save query result in ASCII format.\n"  \</span>
<a name="l00360"></a>00360 <span class="preprocessor">                                        "-sqascii"</span>
<a name="l00361"></a>00361 <span class="preprocessor"></span>
<a name="l00362"></a>00362 
<a name="l00364"></a><a class="code" href="mcs_8hh.html#a75e69e22f789f5bd1fdc665629c96ba">00364</a> <span class="preprocessor">#define MCS_OPT_FORCE                   "force"</span>
<a name="l00365"></a><a class="code" href="mcs_8hh.html#f52631e1fc6fe87339b65e5c50bdafbc">00365</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_OPT_FORCE_HELP              "Continue execution of commands even if an error\n" \</span>
<a name="l00366"></a>00366 <span class="preprocessor">                                        "occurred.\n" \</span>
<a name="l00367"></a>00367 <span class="preprocessor">                                        "-force"</span>
<a name="l00368"></a>00368 <span class="preprocessor"></span>
<a name="l00370"></a><a class="code" href="mcs_8hh.html#de285bfcbe8c5dfb146fe53e6faee8d8">00370</a> <span class="preprocessor">#define MCS_OPT_ALL_ERRORS              "werr"</span>
<a name="l00371"></a><a class="code" href="mcs_8hh.html#df330c65760a913c0ae6f1b65affcd29">00371</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_OPT_ALL_ERRORS_HELP         "Turns all warning into errors, so that a warning can\n" \</span>
<a name="l00372"></a>00372 <span class="preprocessor">                    "stop the execution.\n" \</span>
<a name="l00373"></a>00373 <span class="preprocessor">                                        "-werr"</span>
<a name="l00374"></a>00374 <span class="preprocessor"></span>
<a name="l00376"></a><a class="code" href="mcs_8hh.html#00b31e848e24117e8a3b562adcbedfe3">00376</a> <span class="preprocessor">#define MCS_OPT_LOOP                    "loop"</span>
<a name="l00377"></a><a class="code" href="mcs_8hh.html#188b42b447b1c1717498a0a82fb2bc2c">00377</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_OPT_LOOP_HELP               "Put a copy of thr received Data object in the \n" \</span>
<a name="l00378"></a>00378 <span class="preprocessor">                                        "\"send\" vector.\n" \</span>
<a name="l00379"></a>00379 <span class="preprocessor">                                        "-loop"</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>
<a name="l00382"></a><a class="code" href="mcs_8hh.html#3dadce147114f945ad3cb50d3a76ff93">00382</a> <span class="preprocessor">#define MCS_OPT_HELP                    "help"</span>
<a name="l00383"></a>00383 <span class="preprocessor"></span>
<a name="l00384"></a>00384 
<a name="l00386"></a><a class="code" href="mcs_8hh.html#ecdd01294acadeb30df95fa91a230420">00386</a> <span class="preprocessor">#define MCS_CMD_EXEC                    "EXEC"</span>
<a name="l00387"></a><a class="code" href="mcs_8hh.html#7d7afa7f10e271335e8624a24ae47c47">00387</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_EXEC_HELP               "Execute an external program, SQL or batch file.\n" \</span>
<a name="l00388"></a>00388 <span class="preprocessor">                                        "EXEC &lt;alias&gt; [[PAR1] [PAR2] ...]"</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span>
<a name="l00391"></a><a class="code" href="mcs_8hh.html#014d63dee8870e78aea5486b37de3b5e">00391</a> <span class="preprocessor">#define MCS_CMD_GET                     "GET"</span>
<a name="l00392"></a><a class="code" href="mcs_8hh.html#f70730a6d4d686f40da24f191c023019">00392</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_GET_HELP                "Download a file from the work directory.\n" \</span>
<a name="l00393"></a>00393 <span class="preprocessor">                                        "GET &lt;filename&gt;"</span>
<a name="l00394"></a>00394 <span class="preprocessor"></span>
<a name="l00396"></a><a class="code" href="mcs_8hh.html#1c309fb43c40d5c05c568ee85870f886">00396</a> <span class="preprocessor">#define MCS_CMD_PUT                     "PUT"</span>
<a name="l00397"></a><a class="code" href="mcs_8hh.html#aff11aae24258915467b032a63b47667">00397</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_PUT_HELP                "Upload a file to the work directory.\n" \</span>
<a name="l00398"></a>00398 <span class="preprocessor">                                        "PUT &lt;filename&gt; &lt;size&gt;"</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>
<a name="l00401"></a><a class="code" href="mcs_8hh.html#063d24150943d9051b7cff7c11e0e1e8">00401</a> <span class="preprocessor">#define MCS_CMD_GETDATA                 "GDATA"</span>
<a name="l00402"></a><a class="code" href="mcs_8hh.html#c9764224bb371e7a3608ea57673e4545">00402</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_GETDATA_HELP            "Download Data objects.\n" \</span>
<a name="l00403"></a>00403 <span class="preprocessor">                                        "GDATA &lt;position&gt;"</span>
<a name="l00404"></a>00404 <span class="preprocessor"></span>
<a name="l00406"></a><a class="code" href="mcs_8hh.html#5e51cd280af3e8768d4abcd19db0a6ad">00406</a> <span class="preprocessor">#define MCS_CMD_PUTDATA                 "PDATA"</span>
<a name="l00407"></a><a class="code" href="mcs_8hh.html#2a284f5bb19bebcccf7a03fadf9bd523">00407</a> <span class="preprocessor"></span><span class="preprocessor">#define MCS_CMD_PUTDATA_HELP            "Upload Data objects.\n" \</span>
<a name="l00408"></a>00408 <span class="preprocessor">                                        "PDATA &lt;size&gt;"</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span>
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00415"></a>00415 <span class="comment">//MCS enumerations</span>
<a name="l00416"></a>00416 
<a name="l00446"></a><a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168">00446</a> <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> {
<a name="l00447"></a><a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168823349382933b2987d9a5b23813ac568">00447</a>   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168823349382933b2987d9a5b23813ac568">OK</a>,     
<a name="l00448"></a><a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168d134c80d1858d2466e08a35e05a63d8e">00448</a>   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168d134c80d1858d2466e08a35e05a63d8e">WARN</a>,   
<a name="l00449"></a><a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168ed2cfbac9ada3b8ba133a5d1bd1feb3f">00449</a>   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168ed2cfbac9ada3b8ba133a5d1bd1feb3f">ERROR</a>,  
<a name="l00450"></a><a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be16857372e9172c38860e9c92df19c137e31">00450</a>   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be16857372e9172c38860e9c92df19c137e31">FATAL</a>   
<a name="l00451"></a>00451 };
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 <span class="preprocessor">#include "mcstypes.hh"</span>
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00458"></a>00458 <span class="comment">//MCS macro facilities</span>
<a name="l00459"></a>00459 
<a name="l00461"></a>00461 <span class="preprocessor">#define csz            c_str()</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>
<a name="l00463"></a>00463 
<a name="l00465"></a>00465 <span class="preprocessor">#define my_mempcpy(D, S, N) ((void *) ((char *) memcpy (D, S, N) + (N)))</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00471"></a>00471 <span class="comment">//MCS utilities functions</span>
<a name="l00472"></a>00472 
<a name="l00474"></a>00474 <span class="preprocessor">#define MCS_SUBST_QUOTE_WITH 1</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span>
<a name="l00477"></a>00477 <span class="preprocessor">#define MCS_SUBST_LEADING    4</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>
<a name="l00480"></a>00480 <span class="preprocessor">#define MCS_SUBST_TRAILING   8</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span>
<a name="l00490"></a>00490 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#f197b908e8ff0efbdfff002be78f1ede" title="Perform substitutions on a string.">subst</a>(<span class="keywordtype">string</span> s, <span class="keywordtype">string</span> what, <span class="keywordtype">string</span> with, <span class="keywordtype">int</span> op = 0);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 
<a name="l00494"></a>00494 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#91a232705bd06b18257398951e2b32b5" title="Remove any leading or trailing blanks.">trim</a>(<span class="keywordtype">string</span> s);
<a name="l00495"></a>00495 
<a name="l00497"></a>00497 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#a684ea8a6438fce9323e47fca72c4a53" title="Remove any trailing newlines.">chomp</a>(<span class="keywordtype">string</span> s);
<a name="l00498"></a>00498 
<a name="l00500"></a>00500 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#d9e611f96b066104436c15f5964400d2" title="Remove any tab.">remTabs</a>(<span class="keywordtype">string</span> s);
<a name="l00501"></a>00501 
<a name="l00503"></a>00503 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#455cee8d271a13c4f5c4425a6dcb5673" title="Remove any leading character &amp;quot;p&amp;quot;.">remLeading</a>(<span class="keywordtype">string</span>&amp; s, <span class="keyword">const</span> <span class="keywordtype">char</span>* p);
<a name="l00504"></a>00504 
<a name="l00506"></a><a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6">00506</a> <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#e4e1d0a739ed88d3e17199300f982274" title="Remove any trailing character &amp;quot;p&amp;quot;.">remTrailing</a>(<span class="keywordtype">string</span>&amp; s, <span class="keyword">const</span> <span class="keywordtype">char</span>* p);
<a name="l00507"></a><a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca69074f49fe410c5aa5d6529cf0c524650">00507</a> 
<a name="l00515"></a><a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6f833757d2e2dea3a598a8c56f483e951">00515</a> vector&lt;string&gt; <a class="code" href="namespacemcs.html#a96e18452cfd2660261b29431ee6833f" title="Split a string into tokens.">split</a>(<span class="keywordtype">string</span> s, <span class="keywordtype">string</span> sep = <span class="stringliteral">" "</span>);
<a name="l00516"></a><a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca67f0d9185c9aaad234f4dd1facb1ff771">00516</a> 
<a name="l00518"></a><a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6ce198d7cc789f16df218d2643390891c">00518</a> <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#86516736eef1e056017deb6b0ca2fc67" title="Extract the numeric code from a server reply.">extractCode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg);
<a name="l00519"></a>00519 
<a name="l00528"></a>00528 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#52bc927c8b57027ab58700a4a5679fd3" title="Check if a file or directory exists.">File_Dir_Exist</a>(<span class="keywordtype">string</span> fn, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; size);
<a name="l00529"></a>00529 
<a name="l00531"></a>00531 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#d085d80a87c924df4f4c9403cea45aaf" title="Convert an integer to a string.">itos</a>(<span class="keywordtype">int</span> i);
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 
<a name="l00543"></a><a class="code" href="mcs_8hh.html#0a52047565b49646854705c79c6295f8">00543</a> <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#f23892ae0ff1b0ea74b1bb5ee29d9838" title="Convert a string to an integer.">stoi</a>(<span class="keywordtype">string</span> s);
<a name="l00544"></a>00544 
<a name="l00555"></a>00555 <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#f23892ae0ff1b0ea74b1bb5ee29d9838" title="Convert a string to an integer.">stoi</a>(<span class="keywordtype">string</span> s, <span class="keywordtype">int</span> errval);
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 
<a name="l00559"></a>00559 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#8c89d0c8ada70da14dec5369dad476eb" title="Convert a boolean to a string containing &amp;quot;true&amp;quot; or &amp;quot;false&amp;quot;.">btos</a>(<span class="keywordtype">bool</span> b);
<a name="l00560"></a>00560 
<a name="l00562"></a>00562 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#f5936c5a22be837da5b95deac0e95e63" title="Join a vector of strings in a single string using newlines.">vtos</a>(vector&lt;string&gt; vec);
<a name="l00563"></a>00563 
<a name="l00565"></a>00565 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#040366416a69adb8471414b939ef24a1" title="Convert an floating point number to a string.">dtos</a>(<span class="keywordtype">double</span> f);
<a name="l00566"></a>00566 
<a name="l00568"></a>00568 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#1724261c3aa5e599ca9fe1663f209590" title="Return the current working dir.">Pwd</a>();
<a name="l00569"></a>00569 
<a name="l00571"></a>00571 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#3f185e21552f8d45c033d3746bf54c59" title="Return a string with an hex dump of the buffer pointed by &amp;quot;buf&amp;quot;, with a...">hexDump</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 <span class="preprocessor">#define MCS_MKDIR_UMASK 0</span>
<a name="l00575"></a>00575 <span class="preprocessor"></span><span class="preprocessor">#define MCS_MKDIR_PROTECT S_IRUSR | S_IWUSR | S_IXUSR</span>
<a name="l00576"></a>00576 <span class="preprocessor"></span>
<a name="l00578"></a>00578 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#6d3f66a8f0acbecc8a1a0bc5a63bc839" title="Create a directory.">mkDir</a>(<span class="keywordtype">string</span> path, mode_t perm = 0, <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 
<a name="l00582"></a>00582 mode_t <a class="code" href="namespacemcs.html#8135680566709db608056e6322895611" title="Read the file creation mask of the current process.">read_umask</a>();
<a name="l00583"></a>00583 
<a name="l00585"></a>00585 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#313870649d5d692417f39f8df8922be3" title="Removes a directory.">rmDir</a>(<span class="keywordtype">string</span> path, <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587 <span class="keyword">class </span>Record;
<a name="l00588"></a>00588 
<a name="l00590"></a>00590 <span class="keywordtype">void</span> <a class="code" href="namespacemcs.html#ceaae1c63cfa9fd8d484631ee1615b61" title="Fill a vector with a list of file.">ls2Record</a>(<span class="keywordtype">string</span> fn, Record&amp; v);
<a name="l00591"></a>00591 
<a name="l00593"></a>00593 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#52e42dd8b59e963698612d030206c2b6" title="Return the name of the type given in &amp;quot;type&amp;quot; and &amp;quot;isunsigned&amp;quot;...">Types2Str</a>(Types type, <span class="keywordtype">bool</span> isunsigned);
<a name="l00594"></a>00594 
<a name="l00596"></a>00596 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#1d2fda0d77c15f3b7d150807ca78148e" title="Tell if &amp;quot;type&amp;quot; is a variable length type.">VarLenType</a>(Types type);
<a name="l00597"></a>00597 
<a name="l00599"></a>00599 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#0c5dba71f8e38eead14d723064d38f73" title="Tell if &amp;quot;type&amp;quot; is an integer type.">IntType</a>(Types type);
<a name="l00600"></a>00600 
<a name="l00602"></a>00602 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#aba09084094910fcc5984869fd6bb8b6" title="Tell if &amp;quot;type&amp;quot; is a float type.">FloatType</a>(Types type);
<a name="l00603"></a>00603 
<a name="l00615"></a>00615 <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#4a29a5f99998775903e5d1949736f2f2" title="Copy a file from OLDNAME to NEWNAME.">copy</a>(<span class="keywordtype">char</span>* OLDNAME, <span class="keywordtype">char</span>* NEWNAME);
<a name="l00616"></a>00616 
<a name="l00630"></a>00630 <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#0370896fbffa0f2b398a1fde4322e2db" title="Move a file from OLDNAME to NEWNAME.">move</a>(<span class="keywordtype">char</span>* OLDNAME, <span class="keywordtype">char</span>* NEWNAME);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l00635"></a>00635 <span class="preprocessor">string MYSQL2Str(enum_field_types type);</span>
<a name="l00636"></a>00636 <span class="preprocessor"></span>
<a name="l00637"></a>00637 
<a name="l00645"></a>00645 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#e58c29f6f0a106aba2c98ae95ac2d3a7" title="Convert a MySQL type into a MCS type.">MYSQL2Types</a>(enum_field_types mtype, Types&amp; type);
<a name="l00646"></a>00646 
<a name="l00654"></a>00654 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#0830574fa738e9ea799fdd0a034e996b" title="Convert a MCS type into a MySQL type.">Types2MYSQL</a>(Types&amp; type, enum_field_types&amp; mtype);
<a name="l00655"></a>00655 
<a name="l00663"></a>00663 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#fd92acafeee9a4ed104e257f22b3f642" title="Convert a MCS type into a MySQL type.">Types2MYSQLStr</a>(Types&amp; type, <span class="keywordtype">bool</span> isunsigned);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665 <span class="preprocessor">#endif //ENABLE_MYSQL</span>
<a name="l00666"></a>00666 <span class="preprocessor"></span>
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 <span class="preprocessor">#if ENABLE_CFITSIO</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>
<a name="l00676"></a>00676 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#ec15de26aab931e83149cf371e4e3c5c" title="Convert a FITSIO type into a MCS type.">FITS2Types</a>(<span class="keywordtype">int</span> fits, Types&amp; dbt, <span class="keywordtype">bool</span>&amp; isunsigned);
<a name="l00677"></a>00677 
<a name="l00685"></a>00685 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#717605cd083f53e1428a04ea53cb18f6" title="Convert a MCS type into a FITSIO type.">Types2FITS</a>(Types dbt, <span class="keywordtype">bool</span> isunsigned, <span class="keywordtype">int</span>&amp; fits);
<a name="l00686"></a>00686 
<a name="l00694"></a>00694 <span class="keywordtype">bool</span> <a class="code" href="namespacemcs.html#270f2d6f46ae22a65f6035c34779c1ea" title="Convert a MCS type into a FITSIO type code.">Types2S_FITS</a>(Types dbt, <span class="keywordtype">int</span> len, <span class="keywordtype">bool</span> isunsigned, <span class="keywordtype">string</span>&amp; fits);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696 
<a name="l00698"></a>00698 <span class="keywordtype">string</span> <a class="code" href="namespacemcs.html#719af6f417d5940505a4131e071bf143" title="Return a description of a FITS error.">fitsError</a>(<span class="keywordtype">int</span> status);
<a name="l00699"></a>00699 <span class="preprocessor">#endif //ENABLE_CFITSIO</span>
<a name="l00700"></a>00700 <span class="preprocessor"></span>
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 
<a name="l00703"></a>00703 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l00705"></a>00705 <span class="comment"></span><span class="preprocessor">#define MCS_VMSG_SIZE 1000</span>
<a name="l00706"></a>00706 <span class="preprocessor"></span>
<a name="l00789"></a>00789 <span class="keyword">class </span>Event
<a name="l00790"></a>00790 {
<a name="l00791"></a>00791 <span class="keyword">private</span>:
<a name="l00793"></a>00793   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#9fe3208553667c8b918cf0a1a1c68677" title="Source file.">latFile</a>;
<a name="l00794"></a>00794 
<a name="l00796"></a>00796   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#18550dad05ca9ad58b99c9a4e05766cf" title="Line number.">latLine</a>;
<a name="l00797"></a>00797 
<a name="l00799"></a>00799   <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Event.html#cd532645d30ef0880c198f60148d34aa" title="Temporary buffer.">buf</a>[<a class="code" href="mcs_8hh.html#43af1d4ff8875b624c2ad8e7b67b14d9" title="Max length of a message being sent between client and server.">MCS_COMMBUFSIZE</a>];
<a name="l00800"></a>00800 
<a name="l00802"></a>00802   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#31f0af29e26f98e33183225a53d70b09" title="Message.">lmsg</a>;
<a name="l00803"></a>00803 
<a name="l00805"></a>00805   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#144cbe0028433993ac93b104b2a50744" title="Event code;.">lcode</a>;
<a name="l00806"></a>00806 
<a name="l00808"></a>00808   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#6964fc32ac43978826eb14d82c2eff9e" title="Event subcode, usually an external library message code;.">lsubcode</a>;
<a name="l00809"></a>00809 
<a name="l00811"></a>00811   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#646fd0ac4270a7500a2d17fbfa1094b7" title="Event type.">ltype</a>;
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmcs_1_1Event.html#0a281e1701d4e7a6b51cbe5f8ca9a33b">UserThread</a>;
<a name="l00814"></a>00814 
<a name="l00816"></a>00816   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Event.html#cef0feff1acd500b2ea1ebede1816737" title="Static array of descriptive messages.">vmsg</a>[<a class="code" href="mcs_8hh.html#da14093fb1be953a97f8dd6c1a408386" title="Size of the Event.vmsg static array.">MCS_VMSG_SIZE</a>];
<a name="l00817"></a>00817 
<a name="l00819"></a>00819   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Event.html#c9de217b545bb8a387ba1205c4453430" title="Initialize the vmsg array.">init_vmsg</a>();
<a name="l00820"></a>00820 
<a name="l00822"></a>00822   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Event.html#c72dd08235289a1f36436e09a59c9007" title="Flag to tell if the init() method has been already called.">flInitialized</a>;
<a name="l00823"></a>00823 
<a name="l00824"></a>00824   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Event.html#6d03de14b771303d2ccecec34d24a4b6">init</a>(<span class="keywordtype">string</span> atFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> atLine, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>);
<a name="l00825"></a>00825 
<a name="l00826"></a>00826 <span class="keyword">public</span>:
<a name="l00828"></a>00828   <span class="keyword">static</span> void (*<a class="code" href="classmcs_1_1Event.html#6e912173bf8f924dadb4e9ec542c4cc3" title="Pointer to a callback function to initialize custom messages in the vmsg static array...">custom_init_vmsg</a>) (<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Event.html#cef0feff1acd500b2ea1ebede1816737" title="Static array of descriptive messages.">vmsg</a>[<a class="code" href="mcs_8hh.html#da14093fb1be953a97f8dd6c1a408386" title="Size of the Event.vmsg static array.">MCS_VMSG_SIZE</a>]);
<a name="l00829"></a>00829 
<a name="l00843"></a>00843   <a class="code" href="classmcs_1_1Event.html#4e0534b7cce1e201029d4e2cc6c1ce39" title="Constructor with three optional strings.">Event</a>(<span class="keywordtype">string</span> atFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> atLine, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>,
<a name="l00844"></a>00844     <span class="keywordtype">string</span> s1 = <span class="stringliteral">""</span>, <span class="keywordtype">string</span> s2 = <span class="stringliteral">""</span>, <span class="keywordtype">string</span> s3 = <span class="stringliteral">""</span>);
<a name="l00845"></a>00845 
<a name="l00853"></a>00853   <a class="code" href="classmcs_1_1Event.html#4e0534b7cce1e201029d4e2cc6c1ce39" title="Constructor with three optional strings.">Event</a>(<span class="keywordtype">string</span> atFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> atLine, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>,
<a name="l00854"></a>00854     <span class="keywordtype">string</span> s1, <span class="keywordtype">int</span> i1);
<a name="l00855"></a>00855 
<a name="l00863"></a>00863   <a class="code" href="classmcs_1_1Event.html#4e0534b7cce1e201029d4e2cc6c1ce39" title="Constructor with three optional strings.">Event</a>(<span class="keywordtype">string</span> atFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> atLine, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>,
<a name="l00864"></a>00864     <span class="keywordtype">int</span> i1, <span class="keywordtype">string</span> s1 = <span class="stringliteral">""</span>);
<a name="l00865"></a><a class="code" href="classmcs_1_1Event.html#18550dad05ca9ad58b99c9a4e05766cf">00865</a> 
<a name="l00866"></a>00866 
<a name="l00874"></a><a class="code" href="classmcs_1_1Event.html#144cbe0028433993ac93b104b2a50744">00874</a>   <a class="code" href="classmcs_1_1Event.html#4e0534b7cce1e201029d4e2cc6c1ce39" title="Constructor with three optional strings.">Event</a>(<span class="keywordtype">string</span> atFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> atLine, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>,
<a name="l00875"></a>00875     <span class="keywordtype">int</span> i1, <span class="keywordtype">int</span> i2);
<a name="l00876"></a>00876 
<a name="l00878"></a>00878   <a class="code" href="classmcs_1_1Event.html#9023f3008fa622a8770bc8643334e2fb" title="Destructor.">~Event</a>();
<a name="l00879"></a>00879 
<a name="l00881"></a>00881   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#e52bdf8d42216e800bbd66cd58b949e4" title="Returns the message.">msg</a>();
<a name="l00882"></a><a class="code" href="classmcs_1_1Event.html#0a281e1701d4e7a6b51cbe5f8ca9a33b">00882</a> 
<a name="l00884"></a>00884   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#7b051f84d5455990ef30c4daafdffecf" title="Returns the place where the error occurred formatted as FILE:LINE (CODE).">where</a>();
<a name="l00885"></a><a class="code" href="classmcs_1_1Event.html#cef0feff1acd500b2ea1ebede1816737">00885</a> 
<a name="l00887"></a>00887   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#124ac527c96b23b290d757789be43c0e" title="Returns the event code.">code</a>();
<a name="l00888"></a>00888 
<a name="l00890"></a>00890   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#b34f976d71782fb596d40ba2c31347a6" title="Return event subcode.">subcode</a>();
<a name="l00891"></a><a class="code" href="classmcs_1_1Event.html#c72dd08235289a1f36436e09a59c9007">00891</a> 
<a name="l00912"></a>00912   <a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a>&amp; <a class="code" href="classmcs_1_1Event.html#b34f976d71782fb596d40ba2c31347a6" title="Return event subcode.">subcode</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#b34f976d71782fb596d40ba2c31347a6" title="Return event subcode.">subcode</a>);
<a name="l00913"></a>00913 
<a name="l00916"></a>00916   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#43e145e0f0c5a266ead2cb43f2b71f0f" title="Return the code and the message, formatted as MCS_PRE CODE MESSAGE.">codemsg</a>();
<a name="l00917"></a>00917 
<a name="l00919"></a>00919   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#56b3633193d8f08125c015daec00d10c" title="Source file name where the event occurred.">file</a>();
<a name="l00920"></a>00920 
<a name="l00922"></a>00922   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Event.html#4423627114cfc8d2639da13ada6237fb" title="Source line number where the event occurred.">line</a>();
<a name="l00923"></a>00923 
<a name="l00925"></a>00925   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> <a class="code" href="classmcs_1_1Event.html#661dab9463b32214f58372ad578c43e9" title="Return the event type.">type</a>();
<a name="l00926"></a>00926 
<a name="l00928"></a>00928   <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Event.html#b45825b7821b3742b701a37d0bbb1db8" title="Return the msg in the i-th position of the vmsg array.">static_vmsg</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i);
<a name="l00929"></a>00929 };
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 
<a name="l00933"></a>00933 <span class="preprocessor">#define MCS_OK(A, rest...)     mcs::Event(__FILE__, __LINE__, mcs::OK,    A, ## rest)</span>
<a name="l00934"></a>00934 <span class="preprocessor"></span>
<a name="l00936"></a>00936 <span class="preprocessor">#define MCS_WARN(A, rest...)   mcs::Event(__FILE__, __LINE__, mcs::WARN,  A, ## rest)</span>
<a name="l00937"></a>00937 <span class="preprocessor"></span>
<a name="l00939"></a>00939 <span class="preprocessor">#define MCS_ERROR(A, rest...)  mcs::Event(__FILE__, __LINE__, mcs::ERROR, A, ## rest)</span>
<a name="l00940"></a>00940 <span class="preprocessor"></span>
<a name="l00942"></a>00942 <span class="preprocessor">#define MCS_FATAL(A, rest...)  mcs::Event(__FILE__, __LINE__, mcs::FATAL, A, ## rest)</span>
<a name="l00943"></a>00943 <span class="preprocessor"></span>
<a name="l00945"></a>00945 <span class="preprocessor">#define MCS_(TYPE, rest...)    mcs::Event(__FILE__, __LINE__, TYPE    , ## rest)</span>
<a name="l00946"></a>00946 <span class="preprocessor"></span>
<a name="l00947"></a>00947 
<a name="l00948"></a>00948 <span class="preprocessor">#ifndef DOXYGEN_SKIP</span>
<a name="l00949"></a>00949 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------------</span>
<a name="l00950"></a>00950 <span class="comment">//MCS macro facilities for debug, see also the Debug class</span>
<a name="l00951"></a>00951 <span class="preprocessor">#ifndef NOARGS</span>
<a name="l00952"></a>00952 <span class="preprocessor"></span><span class="preprocessor">#define NOARGS</span>
<a name="l00953"></a>00953 <span class="preprocessor"></span><span class="preprocessor">#endif  //NOARGS</span>
<a name="l00954"></a>00954 <span class="preprocessor"></span>
<a name="l00955"></a>00955 <span class="preprocessor">#define MCS_DEBUG_ALLOC</span>
<a name="l00956"></a>00956 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_SETUP(A, B)</span>
<a name="l00957"></a>00957 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG(A)</span>
<a name="l00958"></a>00958 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_ENTER(A)</span>
<a name="l00959"></a>00959 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_LEAVE(A)</span>
<a name="l00960"></a>00960 <span class="preprocessor"></span>
<a name="l00961"></a>00961 <span class="preprocessor">#if ENABLE_DEBUG</span>
<a name="l00962"></a>00962 <span class="preprocessor"></span><span class="preprocessor">#undef  MCS_DEBUG_ALLOC</span>
<a name="l00963"></a>00963 <span class="preprocessor"></span><span class="preprocessor">#undef  MCS_DEBUG_SETUP</span>
<a name="l00964"></a>00964 <span class="preprocessor"></span><span class="preprocessor">#undef  MCS_DEBUG</span>
<a name="l00965"></a>00965 <span class="preprocessor"></span><span class="preprocessor">#undef  MCS_DEBUG_ENTER</span>
<a name="l00966"></a>00966 <span class="preprocessor"></span><span class="preprocessor">#undef  MCS_DEBUG_LEAVE</span>
<a name="l00967"></a>00967 <span class="preprocessor"></span>
<a name="l00968"></a>00968 <span class="preprocessor">#define MCS_DEBUG_ALLOC Debug _debug_</span>
<a name="l00969"></a>00969 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_SETUP(A, B) _debug_.setDebug(B, this, A)</span>
<a name="l00970"></a>00970 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG(A)  if (_debug_.getDebugFlag()) { cout &lt;&lt; _debug_.debug(__FILE__, __LINE__, __FUNCTION__) &lt;&lt; A &lt;&lt; endl; }</span>
<a name="l00971"></a>00971 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_ENTER(A) MCS_DEBUG("-&gt; "  A);</span>
<a name="l00972"></a>00972 <span class="preprocessor"></span><span class="preprocessor">#define MCS_DEBUG_LEAVE(A) MCS_DEBUG("&lt;- "  A);</span>
<a name="l00973"></a>00973 <span class="preprocessor"></span>
<a name="l00974"></a>00974 <span class="preprocessor">#define MCS_DEBUG_NTHR 100</span>
<a name="l00975"></a>00975 <span class="preprocessor"></span>
<a name="l00976"></a>00976 <span class="keyword">class </span>Debug
<a name="l00977"></a>00977 {
<a name="l00978"></a>00978 <span class="keyword">private</span>:
<a name="l00979"></a>00979   <span class="keywordtype">bool</span> active;
<a name="l00980"></a>00980   <span class="keywordtype">string</span> className;
<a name="l00981"></a>00981   <span class="keywordtype">void</span>* pThis;
<a name="l00982"></a>00982 
<a name="l00983"></a>00983   <span class="keyword">static</span> pthread_t thrs[MCS_DEBUG_NTHR];
<a name="l00984"></a>00984   <span class="keyword">static</span> <span class="keywordtype">bool</span> thrmap[MCS_DEBUG_NTHR];
<a name="l00985"></a>00985   <span class="keyword">static</span> <span class="keywordtype">int</span> dummy;
<a name="l00986"></a>00986   <span class="keyword">static</span> <span class="keywordtype">int</span> init();
<a name="l00987"></a>00987 
<a name="l00988"></a>00988 <span class="keyword">public</span>:
<a name="l00989"></a>00989   Debug();
<a name="l00990"></a>00990   ~Debug();
<a name="l00991"></a>00991 
<a name="l00992"></a>00992   <span class="keywordtype">string</span> debug(<span class="keyword">const</span> <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* function);
<a name="l00993"></a>00993 
<a name="l00994"></a>00994   <span class="keywordtype">void</span> setDebug(<span class="keywordtype">string</span> className, <span class="keywordtype">void</span>* pthis = 0, <span class="keywordtype">bool</span> active = <span class="keyword">false</span>);
<a name="l00995"></a>00995   <span class="keywordtype">void</span> setDebug();
<a name="l00996"></a>00996   <span class="keywordtype">bool</span> getDebugFlag();
<a name="l00997"></a>00997 };
<a name="l00998"></a>00998 <span class="preprocessor">#endif  //ENABLE_DEBUG</span>
<a name="l00999"></a>00999 <span class="preprocessor"></span><span class="preprocessor">#endif  //DOXYGEN_SKIP</span>
<a name="l01000"></a>01000 <span class="preprocessor"></span>
<a name="l01001"></a>01001 
<a name="l01002"></a><a class="code" href="mcs_8hh.html#f03adc13188ef54a971eb1efb6ecf95e">01002</a> 
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 
<a name="l01005"></a><a class="code" href="mcs_8hh.html#9f75afc3af015883963d4dc4ec6e4a7b">01005</a> 
<a name="l01070"></a>01070 <span class="keyword">class </span>Buffer {
<a name="l01071"></a>01071 <span class="keyword">private</span>:
<a name="l01073"></a>01073   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Buffer.html#0aadb0dbbd11e6f55714259c9da93acd" title="Pointer to internal buffer.">buf</a>;
<a name="l01074"></a>01074 
<a name="l01076"></a>01076   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Buffer.html#74544fb0b8e3f6c517958c745584eb52" title="Size of the buffer.">bufsize</a>;
<a name="l01077"></a>01077 
<a name="l01079"></a>01079   <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730" title="Values to be used in Buffer class constructor.">BufferFreeOnDestroy</a> <a class="code" href="classmcs_1_1Buffer.html#a18f9107761f30f63d1c6e1f78f3608b" title="Tell if the buffer should be freed once the object is destroyed.">freebuffer</a>;
<a name="l01080"></a>01080 
<a name="l01082"></a>01082   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Buffer.html#8a1adad41142f4a6b5e7e1c5906a0f0f" title="Tell if we are handling a user allocated buffer.">extbuffer</a>;
<a name="l01083"></a>01083 
<a name="l01085"></a>01085   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Buffer.html#790d4db18a794c913fa8af20f1678ede" title="If a window has been selected.">select</a>;
<a name="l01086"></a>01086 
<a name="l01088"></a>01088   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Buffer.html#6fa2b0ae268f7f3a7bada39b416e7a8a" title="Beginning of the window (0-based).">wstart</a>;
<a name="l01089"></a>01089 
<a name="l01091"></a>01091   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Buffer.html#6b71fb35a810fbb40db188fdaced5ca4" title="Length of the window.">wlen</a>;
<a name="l01092"></a>01092 
<a name="l01093"></a>01093 <span class="keyword">public</span>:
<a name="l01100"></a>01100   <a class="code" href="classmcs_1_1Buffer.html#3cdd2557ed827cbd1a3500f382e6e50a" title="Constructor, buffer allocation is handled internally.">Buffer</a>(<span class="keyword">enum</span> <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730" title="Values to be used in Buffer class constructor.">BufferFreeOnDestroy</a> freeBuffer = <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc580173011c897691e03531db0ea127460b02f33">AUTO_FREE</a>);
<a name="l01101"></a>01101 
<a name="l01108"></a>01108   <a class="code" href="classmcs_1_1Buffer.html#3cdd2557ed827cbd1a3500f382e6e50a" title="Constructor, buffer allocation is handled internally.">Buffer</a>(<span class="keywordtype">void</span>* extbuf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Buffer.html#deec0575702c78ce384c9cf995a2bacd" title="Return size of the buffer.">size</a>,
<a name="l01109"></a>01109      <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730" title="Values to be used in Buffer class constructor.">BufferFreeOnDestroy</a> freeBuffer = <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc58017307c7d89f377d9e2daac9b412a8d01617e">DONT_FREE</a>);
<a name="l01110"></a>01110 
<a name="l01117"></a>01117   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Buffer.html#3cdd2557ed827cbd1a3500f382e6e50a" title="Constructor, buffer allocation is handled internally.">Buffer</a>);
<a name="l01118"></a>01118 
<a name="l01119"></a>01119 
<a name="l01126"></a>01126   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Buffer.html#3cdd2557ed827cbd1a3500f382e6e50a" title="Constructor, buffer allocation is handled internally.">Buffer</a>);
<a name="l01127"></a>01127 
<a name="l01129"></a>01129   <a class="code" href="classmcs_1_1Buffer.html#7566ba8aef21a2bf1a11be5d300ed9d5" title="Destructor, will free the buffer if &amp;quot;freeBuffer&amp;quot; is true.">~Buffer</a>();
<a name="l01130"></a>01130 
<a name="l01131"></a>01131 
<a name="l01132"></a>01132   <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keywordtype">void</span>* extbuf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#92ce752ad81ac31a04624a3fc5801730" title="Values to be used in Buffer class constructor.">BufferFreeOnDestroy</a> freeBuffer);
<a name="l01133"></a>01133 
<a name="l01134"></a>01134 
<a name="l01146"></a>01146   <a class="code" href="classmcs_1_1Buffer.html#3cdd2557ed827cbd1a3500f382e6e50a" title="Constructor, buffer allocation is handled internally.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#6bcfcc9ac3fda8d8e150857251333e8e" title="Select a &amp;quot;window&amp;quot; in the buffer.">operator()</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);
<a name="l01147"></a>01147 
<a name="l01148"></a><a class="code" href="classmcs_1_1Buffer.html#a18f9107761f30f63d1c6e1f78f3608b">01148</a> 
<a name="l01157"></a><a class="code" href="classmcs_1_1Buffer.html#6fa2b0ae268f7f3a7bada39b416e7a8a">01157</a>   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#6bcfcc9ac3fda8d8e150857251333e8e" title="Select a &amp;quot;window&amp;quot; in the buffer.">operator()</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);
<a name="l01158"></a>01158 
<a name="l01159"></a>01159 
<a name="l01168"></a>01168   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#c5c915840cef6adddb5cf6abf73ef6de" title="Copy data from an external buffer.">operator&lt;&lt;</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* extbuf);
<a name="l01169"></a>01169 
<a name="l01170"></a>01170   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#c5c915840cef6adddb5cf6abf73ef6de" title="Copy data from an external buffer.">operator&lt;&lt;</a>(istream&amp; stream);
<a name="l01171"></a>01171 
<a name="l01181"></a>01181   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#a7968a9d99e3a1c474247636025cdee3" title="Copy data into an external buffer.">operator&gt;&gt;</a>(<span class="keywordtype">void</span>* extbuf);
<a name="l01182"></a>01182 
<a name="l01183"></a>01183   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; <a class="code" href="classmcs_1_1Buffer.html#a7968a9d99e3a1c474247636025cdee3" title="Copy data into an external buffer.">operator&gt;&gt;</a>(ostream&amp; stream);
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   <a class="code" href="classmcs_1_1Buffer.html#c8cd7cb174e670413e9941a4b379ea30">operator void*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Buffer.html#0aadb0dbbd11e6f55714259c9da93acd" title="Pointer to internal buffer.">buf</a>; }
<a name="l01186"></a>01186 
<a name="l01187"></a>01187 
<a name="l01189"></a>01189   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Buffer.html#c4450ed730100a2bb725350544871aea" title="Use the Buffer class an an array of pointers to char.">operator[]</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos);
<a name="l01190"></a>01190 
<a name="l01191"></a>01191 
<a name="l01199"></a>01199   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Buffer.html#d884c6ac3fe4f03a291fda19fceea32b" title="Free allocated buffer.">free</a>();
<a name="l01200"></a>01200 
<a name="l01201"></a>01201 
<a name="l01217"></a>01217   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Buffer.html#b6079f4395cd3d474a314869d22c7e65" title="Check size, and eventually enlarge allocated memory.">resize</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
<a name="l01218"></a>01218 
<a name="l01220"></a>01220   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Buffer.html#deec0575702c78ce384c9cf995a2bacd" title="Return size of the buffer.">size</a>();
<a name="l01221"></a>01221 };
<a name="l01222"></a>01222 
<a name="l01223"></a>01223 
<a name="l01224"></a>01224 
<a name="l01225"></a>01225 
<a name="l01226"></a>01226 
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 
<a name="l01230"></a>01230 
<a name="l01231"></a>01231 
<a name="l01232"></a>01232 
<a name="l01233"></a>01233 
<a name="l01234"></a>01234 
<a name="l01235"></a>01235 
<a name="l01236"></a>01236 
<a name="l01237"></a>01237 
<a name="l01238"></a>01238 
<a name="l01239"></a>01239 
<a name="l01240"></a>01240 <span class="preprocessor">#define MCS_SERIAL_UNKNOWN       0</span>
<a name="l01241"></a>01241 <span class="preprocessor"></span><span class="preprocessor">#define MCS_SERIAL_BUFFER        1</span>
<a name="l01242"></a>01242 <span class="preprocessor"></span><span class="preprocessor">#define MCS_SERIAL_FILENAME      2</span>
<a name="l01243"></a>01243 <span class="preprocessor"></span>
<a name="l01244"></a>01244 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l01245"></a>01245 <span class="comment">//MCS Serializable class</span>
<a name="l01265"></a>01265 <span class="comment"></span><span class="keyword">class </span>Serializable
<a name="l01266"></a>01266 {
<a name="l01267"></a>01267 <span class="keyword">private</span>:
<a name="l01268"></a>01268   <a class="code" href="classmcs_1_1Serializable.html#414717ea5fb13bbc3a480639155b45d7">MCS_DEBUG_ALLOC</a>;
<a name="l01269"></a>01269 
<a name="l01271"></a>01271   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#f73eb5e408f01170c5755bc3401d8eb0" title="Pointer to temporary buffer containing the next chunk.">buf</a>;
<a name="l01272"></a>01272 
<a name="l01274"></a>01274   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#c2ea65080800576deaa0508933b21193" title="Maximum size of the chunk.">maxChunksize</a>;
<a name="l01275"></a>01275 
<a name="l01277"></a>01277   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#36527b23931838e4ac1b4522719d3f8e" title="Size of the actual chunk.">lsize</a>;
<a name="l01278"></a>01278 
<a name="l01280"></a>01280   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Serializable.html#a9de7bda8cab9cc669941ff4993d6c85" title="Filename of the file being sent, if type = MCS_SERIAL_FILENAME.">filename</a>;
<a name="l01281"></a>01281 
<a name="l01283"></a>01283   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#c3aff07262341c5d9a846aea7659f893" title="Type of data to be sent.">type</a>;
<a name="l01284"></a>01284 
<a name="l01286"></a>01286   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#ba9931166fc85556d7aea1c34604c686" title="Pointer to source buffer, if type = MCS_SERIAL_BUFFER.">from</a>;
<a name="l01287"></a>01287 
<a name="l01292"></a>01292   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#38d538767f4ee55dfb8ce26f64bd1d28" title="If true the external buffer will be automatically freed, used when type = MCS_SERIAL_BUFFER...">freeAfterUse</a>;
<a name="l01293"></a>01293 
<a name="l01295"></a>01295   ifstream* <a class="code" href="classmcs_1_1Serializable.html#83c257b35fcb95c46bc6f0a23c20e02e" title="Pointer to an ifstream, if type = MCS_SERIAL_FILENAME.">stream</a>;
<a name="l01296"></a>01296 
<a name="l01302"></a>01302   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Serializable.html#d7c8828767f5c3c2f822614aa59a2a2a" title="Common initialization.">init</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#c3aff07262341c5d9a846aea7659f893" title="Type of data to be sent.">type</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmaxChunksize);
<a name="l01303"></a>01303 
<a name="l01304"></a>01304   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#1992bb25834d56c803af7208c0f04651">userdata</a>; <span class="comment">//To be used with virtual_nextChunk</span>
<a name="l01305"></a>01305 
<a name="l01306"></a>01306   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#50f1b282665edd618d0b08afbdb59d6f">firstTime</a>; <span class="comment">//To be used with virtual_nextChunk</span>
<a name="l01307"></a>01307 
<a name="l01319"></a>01319   <span class="keyword">virtual</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#30f1333d2015c2b96125aea53b6e74cc" title="Custom routine to fill a buffer with a chunk.">nextChunk_unknown</a>(<span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#1992bb25834d56c803af7208c0f04651">userdata</a>, <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#f73eb5e408f01170c5755bc3401d8eb0" title="Pointer to temporary buffer containing the next chunk.">buf</a>,
<a name="l01320"></a>01320                   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; chunksize, <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#50f1b282665edd618d0b08afbdb59d6f">firstTime</a>);
<a name="l01321"></a>01321 
<a name="l01322"></a>01322   <span class="keyword">virtual</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Serializable.html#caaddd93be1ef101979444be4fd481f8">serialize_unknown</a>();
<a name="l01323"></a>01323 
<a name="l01324"></a>01324   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#ec3e3a56c291735ee8206fb56e196c14">serialize_buffer</a>(<span class="keywordtype">char</span>*&amp; <a class="code" href="classmcs_1_1Serializable.html#ba9931166fc85556d7aea1c34604c686" title="Pointer to source buffer, if type = MCS_SERIAL_BUFFER.">from</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>);
<a name="l01325"></a>01325 
<a name="l01326"></a>01326   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Serializable.html#2a191798da95527d81423795c8f1e44a">serialize_filename</a>();
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Serializable.html#839e587559e16749d0b660f15effaf62">serialize</a>();
<a name="l01329"></a>01329 
<a name="l01330"></a>01330   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Serializable.html#77e4df6e6a557c59dfe3fee02ee31a84">serialize_end</a>();
<a name="l01331"></a>01331 
<a name="l01332"></a>01332 <span class="keyword">public</span>:
<a name="l01339"></a>01339   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Serializable.html#2e77672af11d6e7af9ded18ef2a47c8b" title="Declared to avoid using of default copy constructor.">Serializable</a>);
<a name="l01340"></a><a class="code" href="classmcs_1_1Serializable.html#f73eb5e408f01170c5755bc3401d8eb0">01340</a> 
<a name="l01341"></a>01341 
<a name="l01348"></a>01348   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Serializable.html" title="Serialize memory buffers or files into chunks.">Serializable</a>);
<a name="l01349"></a><a class="code" href="classmcs_1_1Serializable.html#a9de7bda8cab9cc669941ff4993d6c85">01349</a> 
<a name="l01356"></a>01356   <a class="code" href="classmcs_1_1Serializable.html#2e77672af11d6e7af9ded18ef2a47c8b" title="Declared to avoid using of default copy constructor.">Serializable</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmaxChunksize = <a class="code" href="mcs_8hh.html#1cdee0e385ceab25d2781f6f59b9ca0e" title="File chunk size.">MCS_DEFAULTCHUNKSIZE</a>);
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 
<a name="l01367"></a>01367   <a class="code" href="classmcs_1_1Serializable.html#2e77672af11d6e7af9ded18ef2a47c8b" title="Declared to avoid using of default copy constructor.">Serializable</a>(<span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Serializable.html#ba9931166fc85556d7aea1c34604c686" title="Pointer to source buffer, if type = MCS_SERIAL_BUFFER.">from</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>, <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#38d538767f4ee55dfb8ce26f64bd1d28" title="If true the external buffer will be automatically freed, used when type = MCS_SERIAL_BUFFER...">freeAfterUse</a>,
<a name="l01368"></a>01368            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmaxChunksize = <a class="code" href="mcs_8hh.html#1cdee0e385ceab25d2781f6f59b9ca0e" title="File chunk size.">MCS_DEFAULTCHUNKSIZE</a>);
<a name="l01369"></a>01369 
<a name="l01370"></a>01370 
<a name="l01378"></a>01378   <a class="code" href="classmcs_1_1Serializable.html#2e77672af11d6e7af9ded18ef2a47c8b" title="Declared to avoid using of default copy constructor.">Serializable</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Serializable.html#a9de7bda8cab9cc669941ff4993d6c85" title="Filename of the file being sent, if type = MCS_SERIAL_FILENAME.">filename</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmaxChunksize = <a class="code" href="mcs_8hh.html#1cdee0e385ceab25d2781f6f59b9ca0e" title="File chunk size.">MCS_DEFAULTCHUNKSIZE</a>);
<a name="l01379"></a>01379 
<a name="l01380"></a>01380   <a class="code" href="classmcs_1_1Serializable.html#2e77672af11d6e7af9ded18ef2a47c8b" title="Declared to avoid using of default copy constructor.">Serializable</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#c3aff07262341c5d9a846aea7659f893" title="Type of data to be sent.">type</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmaxChunksize = <a class="code" href="mcs_8hh.html#1cdee0e385ceab25d2781f6f59b9ca0e" title="File chunk size.">MCS_DEFAULTCHUNKSIZE</a>);
<a name="l01381"></a>01381 
<a name="l01385"></a>01385     <span class="keyword">virtual</span> <a class="code" href="classmcs_1_1Serializable.html#8502a6b355f5d8482fec9dede5568f11" title="Destructor.">~Serializable</a>();
<a name="l01386"></a>01386 
<a name="l01387"></a>01387 
<a name="l01388"></a>01388 <span class="comment">//    /*!</span>
<a name="l01389"></a>01389 <span class="comment">//      \brief Fills a buffer with next chunk to be sent.</span>
<a name="l01390"></a>01390 <span class="comment">//</span>
<a name="l01391"></a>01391 <span class="comment">//      \param chunksize Upon exit contains the size of the chunk.</span>
<a name="l01392"></a>01392 <span class="comment">//      \return Address of the buffer containing the chunk, or NULL if there are</span>
<a name="l01393"></a>01393 <span class="comment">//      no more data.</span>
<a name="l01394"></a>01394 <span class="comment">//    */</span>
<a name="l01395"></a>01395 <span class="comment">//    char* fillBuffer(unsigned int&amp; chunksize);</span>
<a name="l01396"></a>01396 
<a name="l01397"></a>01397   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Serializable.html#4b3019554072a0894901932751b465c3" title="Fills a buffer with next chunk to be sent.">nextChunk</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; chunksize);
<a name="l01398"></a>01398 
<a name="l01399"></a>01399   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Serializable.html#d1f01d44944f2e4451d81470fa8f9685">getEntireBuffer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>);
<a name="l01400"></a>01400 
<a name="l01402"></a>01402     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#96b3104f2e5de680bf9ebaa10a69210b" title="Return the max size allowed for a chunk.">maxChunkSize</a>();
<a name="l01403"></a>01403 
<a name="l01404"></a>01404 
<a name="l01405"></a>01405 <span class="comment">//    /*!</span>
<a name="l01406"></a>01406 <span class="comment">//      \brief Reinitialize internal data.</span>
<a name="l01407"></a>01407 <span class="comment">//</span>
<a name="l01408"></a>01408 <span class="comment">//      Reinitialize internal data, so that next call to fillBuffer() will read</span>
<a name="l01409"></a>01409 <span class="comment">//      data from the beginning of the buffer or the file. If type =</span>
<a name="l01410"></a>01410 <span class="comment">//      SERIAL_UNKNOWN the next call to fillBuffer will have firstTime =</span>
<a name="l01411"></a>01411 <span class="comment">//      true.</span>
<a name="l01412"></a>01412 <span class="comment">//    */</span>
<a name="l01413"></a>01413 <span class="comment">//    void abort();</span>
<a name="l01414"></a>01414 
<a name="l01415"></a>01415 
<a name="l01416"></a>01416 <span class="comment">//    /*!</span>
<a name="l01417"></a>01417 <span class="comment">//      \brief Tells if the object is in use.</span>
<a name="l01418"></a>01418 <span class="comment">//</span>
<a name="l01419"></a>01419 <span class="comment">//      If a call to fillBuffer() has already be done, and data are not yet</span>
<a name="l01420"></a>01420 <span class="comment">//      finished this will return true. Otherwise return false.</span>
<a name="l01421"></a>01421 <span class="comment">//    */</span>
<a name="l01422"></a>01422 <span class="comment">//    bool inUse();</span>
<a name="l01423"></a>01423 
<a name="l01424"></a>01424 
<a name="l01432"></a>01432     <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Serializable.html#c400f5d91c9cab4d32ca5d45e59ae6ab" title="Reinitialize internal data.">knowSize</a>();
<a name="l01433"></a>01433 
<a name="l01438"></a>01438     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#21e1da2dac49034ad0860dde79a9b195" title="If knowSize() is true, return how many chunks are required to send all data.">nChunk</a>();
<a name="l01439"></a>01439 
<a name="l01440"></a>01440 
<a name="l01445"></a>01445     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>();
<a name="l01446"></a>01446 };
<a name="l01447"></a>01447 
<a name="l01448"></a>01448 
<a name="l01449"></a>01449 
<a name="l01450"></a>01450 
<a name="l01451"></a>01451 
<a name="l01452"></a>01452 
<a name="l01453"></a>01453 
<a name="l01454"></a>01454 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l01462"></a>01462 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1NetInterface.html" title="Retrieve informations about network interfaces.">NetInterface</a>
<a name="l01463"></a>01463 {
<a name="l01464"></a>01464 <span class="keyword">protected</span>:
<a name="l01465"></a>01465   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#c3c790cb5f33c3cc42c308dbd0ef61c3">lindex</a>;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#6765113950fe24704af7e5206fafd93e">req</a>(<span class="keywordtype">int</span> ioctl_num, <span class="keyword">struct</span> ifreq *ifr);
<a name="l01468"></a>01468   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#35fde7bea3dd30ad81856036dfb9932b">getflags</a>();
<a name="l01469"></a>01469   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1NetInterface.html#9d550831ea9fd69366b3f825a6b77fba">isup</a>();
<a name="l01470"></a>01470   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1NetInterface.html#8338d7922f2d61baf4b84a5b19685b69">str_sockaddr</a>(<span class="keyword">struct</span> sockaddr* sa);
<a name="l01471"></a>01471   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1NetInterface.html#6690c8122943c02e09656a83fb26ff9a">str_sockaddr_in</a>(<span class="keyword">struct</span> sockaddr_in* sin);
<a name="l01472"></a>01472 
<a name="l01474"></a>01474   vector&lt;string&gt; <a class="code" href="classmcs_1_1NetInterface.html#3df81d3becc04058aee8e501bee2b3c4" title="Vector containing the name of all interfaces present in the system.">names</a>;
<a name="l01475"></a>01475 
<a name="l01476"></a>01476 <span class="keyword">public</span>:
<a name="l01491"></a>01491 <span class="comment">//LN-darwin</span>
<a name="l01492"></a>01492 <span class="preprocessor">#ifdef __APPLE__</span>
<a name="l01493"></a>01493 <span class="preprocessor"></span>  <a class="code" href="classmcs_1_1NetInterface.html#275a75f74e31ee8b826ffb8a9f52df0c" title="Constructor.">NetInterface</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1NetInterface.html#e8b06e71dff7098e8f726467e66a9510" title="Return the name of an interface.">name</a> = <span class="stringliteral">"lo0"</span>);
<a name="l01494"></a>01494 <span class="preprocessor">#else</span>
<a name="l01495"></a>01495 <span class="preprocessor"></span>  <a class="code" href="classmcs_1_1NetInterface.html#275a75f74e31ee8b826ffb8a9f52df0c" title="Constructor.">NetInterface</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1NetInterface.html#e8b06e71dff7098e8f726467e66a9510" title="Return the name of an interface.">name</a> = <span class="stringliteral">"lo"</span>);
<a name="l01496"></a>01496 <span class="preprocessor">#endif</span>
<a name="l01497"></a>01497 <span class="preprocessor"></span><span class="comment">//NetInterface(string name = "127.0.0.1");</span>
<a name="l01498"></a>01498 
<a name="l01500"></a>01500   <a class="code" href="classmcs_1_1NetInterface.html#b7e8fb645ef9864ab00bae12104e12bf" title="Destructor.">~NetInterface</a>();
<a name="l01501"></a>01501 
<a name="l01508"></a>01508   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1NetInterface.html" title="Retrieve informations about network interfaces.">NetInterface</a>);
<a name="l01509"></a>01509 
<a name="l01515"></a>01515   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1NetInterface.html" title="Retrieve informations about network interfaces.">NetInterface</a>);
<a name="l01516"></a>01516 
<a name="l01527"></a>01527   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1NetInterface.html#e8b06e71dff7098e8f726467e66a9510" title="Return the name of an interface.">name</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#e7c5ac38b6f1646d330e178f1f70b56c" title="Return the index of the actual interface.">index</a> = -1);
<a name="l01528"></a>01528 
<a name="l01530"></a>01530   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#e7c5ac38b6f1646d330e178f1f70b56c" title="Return the index of the actual interface.">index</a>();
<a name="l01531"></a><a class="code" href="classmcs_1_1NetInterface.html">01531</a> 
<a name="l01533"></a>01533   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#2abdc0bd595e6f72ceae1051cc3dfbf1" title="Return how many network interfaces are present in the system.">count</a>();
<a name="l01534"></a><a class="code" href="classmcs_1_1NetInterface.html#c3c790cb5f33c3cc42c308dbd0ef61c3">01534</a> 
<a name="l01545"></a>01545   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1NetInterface.html#fc6a30361dc835daa5681e1cbfc74c23" title="Return the IP address of an interface.">ipaddress</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1NetInterface.html#e7c5ac38b6f1646d330e178f1f70b56c" title="Return the index of the actual interface.">index</a> = -1);
<a name="l01546"></a>01546 };
<a name="l01547"></a>01547 
<a name="l01548"></a>01548 
<a name="l01549"></a>01549 
<a name="l01550"></a>01550 
<a name="l01551"></a>01551 
<a name="l01552"></a>01552 
<a name="l01553"></a>01553 
<a name="l01554"></a>01554 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l01562"></a>01562 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1HostInfo.html" title="Retrieve informations about a network host.">HostInfo</a>
<a name="l01563"></a>01563 {
<a name="l01564"></a>01564 <span class="keyword">protected</span>:
<a name="l01565"></a>01565   <span class="keyword">struct </span>sockaddr_in <a class="code" href="classmcs_1_1HostInfo.html#a7c2b3c0389d2ed8f9dab10764cb9035">sin</a>;
<a name="l01566"></a>01566   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#999e679b701458c41d60af863414933f">host</a>;
<a name="l01567"></a>01567   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#31466ffdf0ff2d8bd752d83017d5bc0f">ipaddr</a>;
<a name="l01568"></a>01568   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1HostInfo.html#b3c8c552e9359b2671f7d988dcd1d096">populate_sockaddr_in</a>();
<a name="l01569"></a>01569 
<a name="l01570"></a>01570 <span class="keyword">public</span>:
<a name="l01577"></a>01577   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1HostInfo.html" title="Retrieve informations about a network host.">HostInfo</a>);
<a name="l01578"></a>01578 
<a name="l01584"></a>01584   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1HostInfo.html" title="Retrieve informations about a network host.">HostInfo</a>);
<a name="l01585"></a>01585 
<a name="l01596"></a>01596   <a class="code" href="classmcs_1_1HostInfo.html#042b5791f25aa36d951cca26e3c795c3" title="Declared to avoid using of default copy constructor.">HostInfo</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#999e679b701458c41d60af863414933f">host</a>);
<a name="l01597"></a>01597 
<a name="l01603"></a>01603   <a class="code" href="classmcs_1_1HostInfo.html#042b5791f25aa36d951cca26e3c795c3" title="Declared to avoid using of default copy constructor.">HostInfo</a>(<span class="keywordtype">int</span> sockfd);
<a name="l01604"></a>01604 
<a name="l01606"></a>01606   <a class="code" href="classmcs_1_1HostInfo.html#8d8fcc4b4ba80b30b3009476a02b26dc" title="Destructor.">~HostInfo</a>();
<a name="l01607"></a>01607 
<a name="l01609"></a>01609   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#30534ad1f255728b4c1ed2e46e306440" title="Return the host name.">hostname</a>();
<a name="l01610"></a>01610 
<a name="l01612"></a>01612   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#b2b1dd4a091111bff3108d8a86a3d194" title="Return the host IP address.">ipaddress</a>();
<a name="l01613"></a>01613 };
<a name="l01614"></a>01614 
<a name="l01615"></a>01615 
<a name="l01616"></a>01616 
<a name="l01617"></a>01617 
<a name="l01618"></a>01618 
<a name="l01619"></a>01619 
<a name="l01620"></a>01620 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l01636"></a><a class="code" href="classmcs_1_1HostInfo.html#31466ffdf0ff2d8bd752d83017d5bc0f">01636</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Socket.html" title="Manage TCP sockets.">Socket</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1HostInfo.html" title="Retrieve informations about a network host.">HostInfo</a>
<a name="l01637"></a>01637 {
<a name="l01638"></a>01638 <span class="keyword">private</span>:
<a name="l01639"></a>01639   <a class="code" href="classmcs_1_1Socket.html#c136af08ff222e4fa2b88f4c13921133">MCS_DEBUG_ALLOC</a>;
<a name="l01640"></a>01640 
<a name="l01642"></a>01642   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#39cea2c8724818fa3f99152026db62e5" title="C socket file descriptor.">sockfd</a>;
<a name="l01643"></a>01643 
<a name="l01645"></a>01645   fd_set <a class="code" href="classmcs_1_1Socket.html#db748fda3f41f3fe031eae5ed9b5f7f3" title="Set of socket file descriptors, used with select().">fds</a>;
<a name="l01646"></a>01646 
<a name="l01647"></a>01647 <span class="preprocessor">#ifdef HAVE_OPENSSL_SSL_H</span>
<a name="l01649"></a>01649 <span class="preprocessor">  SSL_CTX* ssl_ctx;</span>
<a name="l01650"></a>01650 <span class="preprocessor"></span>
<a name="l01652"></a>01652   SSL *<a class="code" href="classmcs_1_1Socket.html#bbfc7d03a9904c14a76318eec97ddd2d" title="Pointer to a SSL object.">ssl</a>;
<a name="l01653"></a>01653 
<a name="l01655"></a>01655   BIO *<a class="code" href="classmcs_1_1Socket.html#57747eb87c88269daf69fd00abda5ff2" title="Pointer to a SSL BIO object.">sbio</a>;
<a name="l01656"></a>01656 
<a name="l01657"></a>01657   <span class="keywordtype">void</span> initialize_ssl_bio(<span class="keywordtype">string</span> keyfile);
<a name="l01658"></a>01658 <span class="preprocessor">#endif //HAVE_OPENSSL_SSL_H</span>
<a name="l01659"></a>01659 <span class="preprocessor"></span>
<a name="l01661"></a>01661   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#9ef6456488101cf02bcd3be49a719a4a" title="Port on which this socket will connect.">port</a>;
<a name="l01662"></a>01662 
<a name="l01664"></a>01664   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Socket.html#0dfc6263868f74a9b418454d52d0e4bf" title="True if the connection should be encrypted.">use_ssl</a>;
<a name="l01665"></a>01665 
<a name="l01667"></a>01667   <span class="keyword">struct </span>timeval readto;
<a name="l01668"></a>01668 
<a name="l01670"></a>01670   <span class="keyword">struct </span>timeval writeto;
<a name="l01671"></a>01671 
<a name="l01686"></a>01686   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#c51abfaf21096943d84bed073b0ec1c8" title="Connect to the host.">socketToHost</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classmcs_1_1Socket.html#9ef6456488101cf02bcd3be49a719a4a" title="Port on which this socket will connect.">port</a>);
<a name="l01687"></a>01687 
<a name="l01688"></a>01688 
<a name="l01702"></a>01702   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Socket.html#d2fcbead9884cb9062641cff5d858dc5" title="Send a chunk of binary data through the socket.">sendChunk</a>(<span class="keywordtype">void</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
<a name="l01703"></a>01703 
<a name="l01704"></a>01704 
<a name="l01720"></a>01720   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#7d496695e993968ee87926904400f375" title="Receive a chunk of binary data from the socket.">recvChunk</a>(<span class="keywordtype">void</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
<a name="l01721"></a><a class="code" href="classmcs_1_1Socket.html#bbfc7d03a9904c14a76318eec97ddd2d">01721</a> 
<a name="l01727"></a>01727   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#7d496695e993968ee87926904400f375" title="Receive a chunk of binary data from the socket.">recvChunk</a>(<a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>* buf);
<a name="l01728"></a>01728 
<a name="l01729"></a>01729 <span class="keyword">protected</span>:
<a name="l01747"></a>01747   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Socket.html#8a60f19e81e1295be315e49a14a2e23d" title="Check if you can send data through this socket.">chkSend</a>(<span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>);
<a name="l01748"></a>01748 
<a name="l01749"></a>01749 
<a name="l01773"></a>01773   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Socket.html#020a3375f6d84936cd0317ef083071c8" title="Check if you can read data from this socket.">chkRecv</a>(<span class="keywordtype">bool</span> chkDataAvailable = <span class="keyword">false</span>, <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>);
<a name="l01774"></a>01774 
<a name="l01775"></a>01775 
<a name="l01776"></a>01776 
<a name="l01777"></a>01777 
<a name="l01778"></a>01778 <span class="keyword">public</span>:
<a name="l01785"></a>01785   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Socket.html" title="Manage TCP sockets.">Socket</a>);
<a name="l01786"></a>01786 
<a name="l01792"></a>01792   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Socket.html" title="Manage TCP sockets.">Socket</a>);
<a name="l01793"></a>01793 
<a name="l01808"></a>01808   <a class="code" href="classmcs_1_1Socket.html#adeaa4522ec7837e904e999bbbede7b9" title="Declared to avoid using of default copy constructor.">Socket</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1HostInfo.html#999e679b701458c41d60af863414933f">host</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> port=0,
<a name="l01809"></a>01809      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> readTimeout = 1000,
<a name="l01810"></a>01810      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> writeTimeout = 1000,
<a name="l01811"></a>01811      <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Socket.html#bbfc7d03a9904c14a76318eec97ddd2d" title="Pointer to a SSL object.">ssl</a> = <span class="keyword">false</span>);
<a name="l01812"></a>01812 
<a name="l01813"></a>01813 
<a name="l01827"></a>01827   <a class="code" href="classmcs_1_1Socket.html#adeaa4522ec7837e904e999bbbede7b9" title="Declared to avoid using of default copy constructor.">Socket</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#39cea2c8724818fa3f99152026db62e5" title="C socket file descriptor.">sockfd</a>,
<a name="l01828"></a>01828      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> readTimeout = 1000,
<a name="l01829"></a>01829      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> writeTimeout = 1000,
<a name="l01830"></a>01830      <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Socket.html#28069238155a78a7502db5a0bc73fb6b" title="Pointer to a SSL context object, provided in the constructor.">ssl_ctx</a> = NULL);
<a name="l01831"></a>01831 
<a name="l01832"></a>01832 
<a name="l01839"></a>01839   <a class="code" href="classmcs_1_1Socket.html#0b149693f95b1b3fe8d0914d600695a9" title="Destructor.">~Socket</a>();
<a name="l01840"></a>01840 
<a name="l01842"></a>01842   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Socket.html#7f9b2d7d6b330388af8abcd0ca7fde50" title="Close the socket.">Close</a>();
<a name="l01843"></a>01843 
<a name="l01850"></a>01850   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Socket.html#80d4acc3d16acbf5f49c03fc6b205ef8" title="Fill a &amp;quot;struct timeval&amp;quot; with the given interval.">set_struct_timeval</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> millisec, <span class="keyword">struct</span> timeval* time);
<a name="l01851"></a>01851 
<a name="l01852"></a>01852 
<a name="l01867"></a>01867   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#84c16af53794d90eaedd70b1f0528583" title="Reads data from the socket and write in a buffer.">read</a>(<span class="keywordtype">void</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count);
<a name="l01868"></a>01868 
<a name="l01869"></a>01869 
<a name="l01883"></a>01883   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#0f80849fb4dd44213a530208d3a914ff" title="Reads data from a buffer and write in the socket.">write</a>(<span class="keywordtype">void</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count);
<a name="l01884"></a>01884 
<a name="l01885"></a>01885 
<a name="l01896"></a>01896   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Socket.html#b3bd76461d8e91d1aafbf5ff68f75596" title="Reads from a socket until a newline is encountered.">getline</a>();
<a name="l01897"></a>01897 
<a name="l01898"></a>01898 
<a name="l01909"></a>01909   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Socket.html#2ddbda409c018fe82f48fc148005c2cb" title="Writes a string in the socket adding a newline.">print</a>(<span class="keywordtype">string</span> s);
<a name="l01910"></a>01910 
<a name="l01911"></a>01911 
<a name="l01919"></a>01919   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Socket.html#1dfba7ff731a74edb3e4d20d3ec04fbc" title="Send a block of data through the socket.">sendData</a>(<a class="code" href="classmcs_1_1Serializable.html" title="Serialize memory buffers or files into chunks.">Serializable</a>* from);
<a name="l01920"></a>01920 
<a name="l01921"></a>01921 
<a name="l01941"></a>01941   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#148a41b51d0c7e1602a4062ef7e07641" title="Receive data and store in a buffer.">recvData</a>(<span class="keywordtype">char</span>** buffer, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxsize);
<a name="l01942"></a>01942 
<a name="l01943"></a>01943 
<a name="l01953"></a>01953   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#148a41b51d0c7e1602a4062ef7e07641" title="Receive data and store in a buffer.">recvData</a>(<span class="keywordtype">string</span> filename);
<a name="l01954"></a>01954 
<a name="l01963"></a>01963   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#148a41b51d0c7e1602a4062ef7e07641" title="Receive data and store in a buffer.">recvData</a>(<span class="keywordtype">int</span> filedes);
<a name="l01964"></a>01964 
<a name="l01973"></a>01973   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Socket.html#148a41b51d0c7e1602a4062ef7e07641" title="Receive data and store in a buffer.">recvData</a>(ofstream&amp; stream);
<a name="l01974"></a>01974 };
<a name="l01975"></a>01975 
<a name="l01976"></a>01976 
<a name="l01977"></a>01977 
<a name="l01978"></a>01978 
<a name="l01979"></a>01979 
<a name="l01980"></a>01980 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l01989"></a>01989 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1ServerSocket.html" title="Manage TCP server sockets.">ServerSocket</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1NetInterface.html" title="Retrieve informations about network interfaces.">NetInterface</a>
<a name="l01990"></a>01990 {
<a name="l01991"></a>01991 <span class="keyword">private</span>:
<a name="l01993"></a>01993   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ServerSocket.html#9527fab7a8d604fda4c4b59e72000d98" title="Server socket descriptor.">sockfd</a>;
<a name="l01994"></a>01994 
<a name="l01996"></a>01996   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1ServerSocket.html#4f9baae56e70481bc107c61fd40ebb4f" title="True if the connection should be encrypted.">use_ssl</a>;
<a name="l01997"></a>01997 
<a name="l01998"></a>01998 <span class="preprocessor">#ifdef HAVE_OPENSSL_SSL_H</span>
<a name="l02000"></a>02000 <span class="preprocessor">  SSL_CTX* ssl_ctx;</span>
<a name="l02001"></a>02001 <span class="preprocessor"></span><span class="preprocessor">#endif //HAVE_OPENSSL_SSL_H</span>
<a name="l02002"></a>02002 <span class="preprocessor"></span>
<a name="l02003"></a>02003 <span class="keyword">public</span>:
<a name="l02010"></a>02010   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1ServerSocket.html" title="Manage TCP server sockets.">ServerSocket</a>);
<a name="l02011"></a>02011 
<a name="l02018"></a>02018   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1ServerSocket.html" title="Manage TCP server sockets.">ServerSocket</a>);
<a name="l02019"></a>02019 
<a name="l02033"></a>02033   <a class="code" href="classmcs_1_1ServerSocket.html#1bdd273c57afb281cbc89ab79555d43f" title="Declared to avoid using of default copy constructor.">ServerSocket</a>(<span class="keywordtype">string</span> interface, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> port,
<a name="l02034"></a>02034            <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1ServerSocket.html#4f9baae56e70481bc107c61fd40ebb4f" title="True if the connection should be encrypted.">use_ssl</a> = <span class="keyword">false</span>, <span class="keywordtype">string</span> sslcert = <span class="stringliteral">""</span>, <span class="keywordtype">string</span> sslpriv = <span class="stringliteral">""</span>);
<a name="l02035"></a>02035 
<a name="l02037"></a>02037   <a class="code" href="classmcs_1_1ServerSocket.html#d5474dae3a232d645a52407e60cb9498" title="Destructor.">~ServerSocket</a>();
<a name="l02038"></a>02038 
<a name="l02051"></a>02051   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1ServerSocket.html#ed9b456780b14c0c18abe6ec1b03fcce" title="Wait for an incoming connection.">acceptConnection</a>(<span class="keywordtype">int</span>&amp; newsock, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> millisec);
<a name="l02052"></a>02052 
<a name="l02053"></a>02053   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1ServerSocket.html#053fe9efa73026babbb0b3557ed2db1f">getSSLContext</a>();
<a name="l02054"></a>02054 };
<a name="l02055"></a>02055 
<a name="l02056"></a>02056 
<a name="l02057"></a>02057 
<a name="l02058"></a><a class="code" href="classmcs_1_1ServerSocket.html">02058</a> 
<a name="l02059"></a>02059 
<a name="l02060"></a>02060 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l02161"></a>02161 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Synchro.html" title="A simple class to implement &amp;quot;critical sections&amp;quot;.">Synchro</a>
<a name="l02162"></a>02162 {
<a name="l02163"></a>02163 <span class="keyword">private</span>:
<a name="l02164"></a>02164   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l02165"></a>02165 
<a name="l02166"></a>02166 <span class="comment">//LN-darwin</span>
<a name="l02167"></a>02167 <span class="preprocessor">#if defined(_POSIX_TIMEOUTS) &amp;&amp; (_POSIX_TIMEOUTS - 200112L) &gt;= 0L</span>
<a name="l02168"></a>02168 <span class="preprocessor"></span><span class="comment">/* POSIX Timeouts are supported - option group [TMO] */</span>
<a name="l02169"></a>02169  
<a name="l02171"></a>02171   <span class="keyword">struct </span>_pthread_cleanup_buffer _buf;
<a name="l02172"></a>02172 <span class="preprocessor">#endif</span>
<a name="l02173"></a>02173 <span class="preprocessor"></span>
<a name="l02175"></a>02175   pthread_mutex_t <a class="code" href="classmcs_1_1Synchro.html#3b5874ddda84d54769999d99b6395e92" title="The mutex used to do the job.">mutex</a>;
<a name="l02176"></a>02176 
<a name="l02178"></a>02178   pthread_mutexattr_t <a class="code" href="classmcs_1_1Synchro.html#52385e968802b2eb57f2d895f5fb3780" title="Attribute of the mutex (PTHREAD_MUTEX_RECURSIVE_NP).">attr</a>;
<a name="l02179"></a>02179 
<a name="l02181"></a>02181   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Synchro.html#d3ec7e4123b14161b010e569b8752074" title="How many time the Mutex has been locked, or a thread entered a critical section.">Count</a>;
<a name="l02182"></a>02182 
<a name="l02184"></a>02184   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Synchro.html#b3a51b01a3c97ecf58c9fde1484f63c4" title="Whether this object is a &amp;quot;dummy&amp;quot; object or not.">isActive</a>;
<a name="l02185"></a>02185 
<a name="l02186"></a>02186 <span class="keyword">public</span>:
<a name="l02193"></a>02193   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Synchro.html" title="A simple class to implement &amp;quot;critical sections&amp;quot;.">Synchro</a>);
<a name="l02194"></a>02194 
<a name="l02201"></a>02201   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Synchro.html" title="A simple class to implement &amp;quot;critical sections&amp;quot;.">Synchro</a>);
<a name="l02202"></a>02202 
<a name="l02212"></a>02212   <a class="code" href="classmcs_1_1Synchro.html#c0cc917a0b99ca5ee6782645fb02ad43" title="Constructor.">Synchro</a>();
<a name="l02213"></a>02213 
<a name="l02217"></a>02217   <a class="code" href="classmcs_1_1Synchro.html#b3126c5415561a0d2fba44f494971a5d" title="Destructor.">~Synchro</a>();
<a name="l02218"></a>02218 
<a name="l02229"></a>02229   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Synchro.html#0d179e8c385d3a6a6f9ddcd18655b4ed" title="Enable or disable the synchronization feature.">synchronize</a>(<span class="keywordtype">bool</span> setactive);
<a name="l02230"></a><a class="code" href="classmcs_1_1Synchro.html">02230</a> 
<a name="l02232"></a>02232 <span class="preprocessor">#define MCS_SYNCHRO_LOCK        1</span>
<a name="l02233"></a><a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">02233</a> <span class="preprocessor"></span>
<a name="l02235"></a>02235 <span class="preprocessor">#define MCS_SYNCHRO_TRY_LOCK    2</span>
<a name="l02236"></a>02236 <span class="preprocessor"></span>
<a name="l02239"></a>02239 <span class="preprocessor">#define MCS_SYNCHRO_TRY_TIMED   3</span>
<a name="l02240"></a>02240 <span class="preprocessor"></span>
<a name="l02274"></a>02274   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Synchro.html#cb252a6eff363f3ac5f3bff91dc59e35" title="Enter, or try to enter a critical section.">enter</a>(<span class="keywordtype">int</span> op = <a class="code" href="mcs_8hh.html#5e66b33a6597df7c5e08c8452d807a82" title="To be used with Synchro.enter(): enter a critical section.">MCS_SYNCHRO_LOCK</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout = 0);
<a name="l02275"></a>02275 
<a name="l02278"></a>02278   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Synchro.html#f4b452b2d6392a4eed9f653c644c2650" title="Wrapper around enter(), using op=MCS_SYNCHRO_TRY_LOCK if the parameter is 0, op=MCS_SYNCHRO_TRY_TIME...">tryenter</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout = 0);
<a name="l02279"></a>02279 
<a name="l02281"></a>02281   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Synchro.html#a58b76d7761a1c968f4a4946c0656b62" title="Return how many times the current thread has locked the section.">count</a>();
<a name="l02282"></a>02282 
<a name="l02292"></a>02292   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Synchro.html#8c726a3d1036b22f2273c26d94d99baf" title="Leave a critical section.">leave</a>();
<a name="l02293"></a>02293 
<a name="l02294"></a>02294 <span class="preprocessor">#ifdef ENABLE_CLEANUP_HANDLERS</span>
<a name="l02295"></a>02295 <span class="preprocessor"></span>
<a name="l02303"></a>02303  <span class="keyword">static</span> <span class="keywordtype">void</span> CH_leave(<span class="keywordtype">void</span>* This);
<a name="l02304"></a><a class="code" href="mcs_8hh.html#20d907d5798415418c421b390ddd045a">02304</a> <span class="preprocessor">#endif //ENABLE_CLEANUP_HANDLERS</span>
<a name="l02305"></a>02305 <span class="preprocessor"></span>
<a name="l02307"></a><a class="code" href="mcs_8hh.html#9ada0722c6bfeb5e6d0ba3490da2845b">02307</a>   <span class="comment">//  \brief Waits until some other thread locks and unlocks the same</span>
<a name="l02308"></a>02308   <span class="comment">//  Synchro object.</span>
<a name="l02309"></a>02309   <span class="comment">//</span>
<a name="l02310"></a>02310   <span class="comment">//  The mutex MUST be locked before using wait() (with enter()) and unlocked</span>
<a name="l02311"></a>02311   <span class="comment">//  after this method returns (with leave()).</span>
<a name="l02312"></a>02312   <span class="comment">//</span>
<a name="l02313"></a>02313   <span class="comment">//  When this method is called it immediately unlock the mutex, so</span>
<a name="l02314"></a>02314   <span class="comment">//  that another thread can lock it.</span>
<a name="l02315"></a>02315   <span class="comment">//</span>
<a name="l02316"></a>02316   <span class="comment">//  If it return true then another thread has locked and unlocked the same</span>
<a name="l02317"></a>02317   <span class="comment">//  Synchro object, if it returns false a timeout occurred before other</span>
<a name="l02318"></a>02318   <span class="comment">//  threads can lock and unlock the mutex. in any case the mutex is now locked</span>
<a name="l02319"></a>02319   <span class="comment">//  by the current thread, so you have to unlock it with leave().</span>
<a name="l02320"></a>02320   <span class="comment">//</span>
<a name="l02321"></a>02321   <span class="comment">//  An example follows:</span>
<a name="l02322"></a>02322   <span class="comment">//  \code</span>
<a name="l02323"></a>02323   <span class="comment">//  ...</span>
<a name="l02324"></a>02324   <span class="comment">//  enter();</span>
<a name="l02325"></a>02325   <span class="comment">//  bool b = wait(1000); //Leaving the critical section and wait</span>
<a name="l02326"></a>02326   <span class="comment">//                       //for someone else to lock and unlock the</span>
<a name="l02327"></a>02327   <span class="comment">//             //same Synchro object, or a timeout of 1</span>
<a name="l02328"></a>02328   <span class="comment">//             //second occur.</span>
<a name="l02329"></a>02329   <span class="comment">//</span>
<a name="l02330"></a>02330   <span class="comment">//  if (b) {  //Another thread entered and leave a critical section</span>
<a name="l02331"></a>02331   <span class="comment">//    ... //Do some work</span>
<a name="l02332"></a>02332   <span class="comment">//  }</span>
<a name="l02333"></a>02333   <span class="comment">//  else { //A timeout occurred</span>
<a name="l02334"></a>02334   <span class="comment">//    ...</span>
<a name="l02335"></a>02335   <span class="comment">//  }</span>
<a name="l02336"></a>02336   <span class="comment">//  leave();</span>
<a name="l02337"></a>02337   <span class="comment">//  \endcode</span>
<a name="l02338"></a>02338   <span class="comment">//</span>
<a name="l02339"></a>02339   <span class="comment">//  \param timeout Timeout in millisecond.</span>
<a name="l02340"></a>02340   <span class="comment">//  \return False if a timeout or an interrupt occurred, true otherwise.</span>
<a name="l02341"></a>02341   <span class="comment">//*/</span>
<a name="l02343"></a>02343 <span class="comment"></span>};
<a name="l02344"></a>02344 
<a name="l02345"></a>02345 
<a name="l02348"></a>02348 <span class="preprocessor">#define MCS_CRITICAL_SECTION_BEGIN  enter(); try {</span>
<a name="l02349"></a>02349 <span class="preprocessor"></span>
<a name="l02350"></a>02350 
<a name="l02353"></a>02353 <span class="preprocessor">#define MCS_CRITICAL_SECTION_END    } catch(Event e) { leave(); throw e; } leave();</span>
<a name="l02354"></a>02354 <span class="preprocessor"></span>
<a name="l02355"></a>02355 <span class="preprocessor">#define MCS_CRITICAL_SECTION_END_RETURN(What...)  \</span>
<a name="l02356"></a>02356 <span class="preprocessor">leave(); return What; }                           \</span>
<a name="l02357"></a>02357 <span class="preprocessor">catch(Event e) { leave(); throw e; }</span>
<a name="l02358"></a>02358 <span class="preprocessor"></span>
<a name="l02359"></a>02359 
<a name="l02366"></a>02366 <span class="preprocessor">#define MCS_CRITICAL_SECTION(BLOCK...) \</span>
<a name="l02367"></a>02367 <span class="preprocessor">MCS_CRITICAL_SECTION_BEGIN             \</span>
<a name="l02368"></a>02368 <span class="preprocessor">  BLOCK;                               \</span>
<a name="l02369"></a>02369 <span class="preprocessor">MCS_CRITICAL_SECTION_END</span>
<a name="l02370"></a>02370 <span class="preprocessor"></span>
<a name="l02371"></a>02371 
<a name="l02372"></a>02372 
<a name="l02373"></a>02373 
<a name="l02374"></a>02374 
<a name="l02375"></a>02375 
<a name="l02376"></a>02376 
<a name="l02377"></a>02377 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l02379"></a>02379 <span class="comment"></span><span class="preprocessor">#define MCS_STATE_CREATED                1</span>
<a name="l02380"></a>02380 <span class="preprocessor"></span>
<a name="l02382"></a>02382 <span class="preprocessor">#define MCS_STATE_RUNNING                2</span>
<a name="l02383"></a>02383 <span class="preprocessor"></span>
<a name="l02386"></a>02386 <span class="preprocessor">#define MCS_STATE_TERMINATING            3</span>
<a name="l02387"></a>02387 <span class="preprocessor"></span>
<a name="l02389"></a>02389 <span class="preprocessor">#define MCS_STATE_END                    4</span>
<a name="l02390"></a>02390 <span class="preprocessor"></span>
<a name="l02391"></a>02391 
<a name="l02392"></a>02392 
<a name="l02456"></a>02456 <span class="keyword">class </span>Thread
<a name="l02457"></a>02457 {
<a name="l02458"></a>02458 <span class="keyword">private</span>:
<a name="l02459"></a>02459   <a class="code" href="classmcs_1_1Thread.html#b37213532c273250e4ee212c6ae8ca7c">MCS_DEBUG_ALLOC</a>;
<a name="l02460"></a>02460 
<a name="l02462"></a>02462   <a class="code" href="classmcs_1_1Thread.html#27f1207f5b2abd8e64b9e6fb7baa3083" title="Declared to avoid using of default copy constructor.">Thread</a>* <a class="code" href="classmcs_1_1Thread.html#13d7e651aab32d8038b180222d012e9a" title="Reference to parent Thread object, if any is given in the constructor.">lparent</a>;
<a name="l02463"></a>02463 
<a name="l02465"></a>02465   pthread_t <a class="code" href="classmcs_1_1Thread.html#c8bdf91611a8f4e6d33fd364f68286bd" title="System&amp;#39;s thread identifier.">lthrID</a>;
<a name="l02466"></a>02466 
<a name="l02468"></a>02468   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Thread.html#a935b0e2da0da9b7e50044a70d6d6558" title="General purpose Thread identifier.">lid</a>;
<a name="l02469"></a>02469 
<a name="l02471"></a>02471   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Thread.html#becc58eadc7041a0ae0d014e8bdf9f6c" title="State of the object, see state() method.">lstate</a>;
<a name="l02472"></a>02472 
<a name="l02473"></a>02473   <span class="comment">//Synchronization for lstate variable.</span>
<a name="l02474"></a>02474   Synchro <a class="code" href="classmcs_1_1Thread.html#2a04116e8b2446b575003de0c9351e2a">syn_lstate</a>;
<a name="l02475"></a>02475 
<a name="l02482"></a>02482   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#443c55621b550e66b2c8d3a26116c9a1" title="Static wrapper around final().">cleanup_Handler</a>(<span class="keywordtype">void</span>* This);
<a name="l02483"></a>02483 
<a name="l02489"></a>02489   <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Thread.html#e787ee67dad9e10c7751d94d38bc73d9" title="Starting point for the separate thread.">RunThread</a>(<span class="keywordtype">void</span>* args);
<a name="l02490"></a>02490 
<a name="l02492"></a>02492   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Thread.html#a4f04123b60b243b609dead194437381" title="Check if the thread is already terminating (true) or not (false).">checkTerminating</a>();
<a name="l02493"></a>02493 
<a name="l02495"></a>02495   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Thread.html#ed2c5cd6205fad399fcc985b632b9e4c" title="Tell if the thread is to be created in the detached state.">detached</a>;
<a name="l02496"></a>02496 
<a name="l02499"></a>02499   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Thread.html#be2585343c5daeb262344f5cf79805b9" title="Tell if the object should delete himself once the thread is terminated.">selfDelete</a>;
<a name="l02500"></a>02500 
<a name="l02501"></a>02501 <span class="keyword">protected</span>:
<a name="l02525"></a><a class="code" href="classmcs_1_1Thread.html#b37213532c273250e4ee212c6ae8ca7c">02525</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#15f64156eee8e714f4ade8d79d614cea" title="A method called from child threads to notify their termination.">notify</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* ref);
<a name="l02526"></a>02526 
<a name="l02527"></a>02527 
<a name="l02538"></a>02538   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#a50e87b8ece11ed8db7b2ebea4b56339" title="Initialization method.">initial</a>();
<a name="l02539"></a>02539 
<a name="l02540"></a><a class="code" href="classmcs_1_1Thread.html#2a04116e8b2446b575003de0c9351e2a">02540</a> 
<a name="l02556"></a>02556   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <span class="keyword">final</span>();
<a name="l02557"></a>02557 
<a name="l02558"></a>02558 
<a name="l02568"></a>02568   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#5a994a15b01ba2dabff50bb6fcb174f2" title="Body of the thread execution.">run</a>();
<a name="l02569"></a>02569 
<a name="l02573"></a>02573   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#d0898504bbeb0b022e4588cf6ec9d9a9" title="Set cancellation state for current thread.">set_cancel_state</a>(<span class="keywordtype">bool</span> cancel);
<a name="l02574"></a>02574 
<a name="l02578"></a>02578   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#f63c2df145b0a4e05d6ae3cd1e7a4960" title="Test if a cancellation request is pending.">test_cancel</a>();
<a name="l02579"></a>02579 
<a name="l02581"></a>02581   <a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a>* <a class="code" href="classmcs_1_1Thread.html#6d42534d9f9877087a262d78ea09f827" title="Last error.">lerror</a>;
<a name="l02582"></a>02582 
<a name="l02583"></a>02583 <span class="keyword">public</span>:
<a name="l02585"></a>02585   <a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a>* <a class="code" href="classmcs_1_1Thread.html#6939c43afe1a403a8eb4e11fb6a78f71" title="Return last error message.">error</a>();
<a name="l02586"></a>02586 
<a name="l02593"></a>02593   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>);
<a name="l02594"></a>02594 
<a name="l02601"></a>02601   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>);
<a name="l02602"></a>02602 
<a name="l02613"></a>02613   <a class="code" href="classmcs_1_1Thread.html#27f1207f5b2abd8e64b9e6fb7baa3083" title="Declared to avoid using of default copy constructor.">Thread</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0, <a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* <a class="code" href="classmcs_1_1Thread.html#9bfbcf69370fd696e42f0d3f1e7d9ed6" title="Returns the address of the parent.">parent</a> = NULL);
<a name="l02614"></a>02614 
<a name="l02626"></a>02626   <span class="keyword">virtual</span> <a class="code" href="classmcs_1_1Thread.html#46f61ff14e039b2065a4ecc603b74fa1" title="Destructor.">~Thread</a>();
<a name="l02627"></a>02627 
<a name="l02639"></a>02639   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#c92e7e99365b117d358ee88af919db02" title="Start a new thread in the joinable state.">start</a>();
<a name="l02640"></a>02640 
<a name="l02641"></a>02641 
<a name="l02656"></a>02656   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#a447c6d9b640f92e74a7a3eb6e4b960e" title="Start a new thread in the detached state.">startDetached</a>(<span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Thread.html#be2585343c5daeb262344f5cf79805b9" title="Tell if the object should delete himself once the thread is terminated.">selfDelete</a> = <span class="keyword">false</span>);
<a name="l02657"></a>02657 
<a name="l02658"></a>02658 
<a name="l02668"></a>02668   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Thread.html#a2e02534e8c6cafc9ae43a7ec2ac00d4" title="Stop thread execution.">stop</a>();
<a name="l02669"></a>02669 
<a name="l02678"></a>02678   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Thread.html#92cba5a3262685adc8b0bed8833473aa" title="Returns the Thread object identificator.">id</a>();
<a name="l02679"></a>02679 
<a name="l02683"></a>02683   <a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* <a class="code" href="classmcs_1_1Thread.html#9bfbcf69370fd696e42f0d3f1e7d9ed6" title="Returns the address of the parent.">parent</a>();
<a name="l02684"></a>02684 
<a name="l02685"></a>02685 
<a name="l02697"></a>02697   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Thread.html#16548a4ee316fb483168403226fdb340" title="Return the state of the thread.">state</a>();
<a name="l02698"></a>02698 };
<a name="l02699"></a>02699 
<a name="l02700"></a>02700 
<a name="l02701"></a>02701 
<a name="l02702"></a>02702 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l02703"></a>02703 <span class="keyword">class </span><a class="code" href="classmcs_1_1ThreadSpecificData.html">ThreadSpecificData</a>
<a name="l02704"></a>02704 {
<a name="l02705"></a>02705 <span class="keyword">private</span>:
<a name="l02706"></a>02706   pthread_key_t <a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>;
<a name="l02707"></a>02707   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#31a3499e71c849b8727aef4637d63038">ltag</a>;
<a name="l02708"></a>02708 
<a name="l02709"></a>02709   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#e31174fffdbc31e5c091858445948d93">generic_destructor</a>(<span class="keywordtype">void</span>* p)
<a name="l02710"></a>02710   { <span class="keyword">delete</span> ((BASE*) p); }
<a name="l02711"></a>02711 
<a name="l02712"></a>02712   void (*destructor)(<span class="keywordtype">void</span>*);
<a name="l02713"></a>02713 
<a name="l02714"></a>02714 <span class="keyword">public</span>:
<a name="l02715"></a>02715   <a class="code" href="classmcs_1_1ThreadSpecificData.html#abeda19d1e36bd935f0138b76d1f4a66">ThreadSpecificData</a>(<span class="keywordtype">void</span> (*ext_destructor)(<span class="keywordtype">void</span>*) = NULL)
<a name="l02716"></a>02716   {
<a name="l02717"></a>02717     destructor = <a class="code" href="classmcs_1_1ThreadSpecificData.html#e31174fffdbc31e5c091858445948d93">generic_destructor</a>;
<a name="l02718"></a>02718     <span class="keywordflow">if</span> (ext_destructor)
<a name="l02719"></a>02719       destructor = ext_destructor;
<a name="l02720"></a>02720 
<a name="l02721"></a>02721     pthread_key_create(&amp;<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>, destructor);
<a name="l02722"></a>02722   }
<a name="l02723"></a>02723 
<a name="l02724"></a>02724   <a class="code" href="classmcs_1_1ThreadSpecificData.html#75c83a43437874855e3844d6557d859c">~ThreadSpecificData</a>()
<a name="l02725"></a>02725   { pthread_key_delete(<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>); }
<a name="l02726"></a>02726 
<a name="l02727"></a>02727   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#1cf5cc014198d53f35a52ed27e9e70e6">clear</a>()
<a name="l02728"></a>02728   {
<a name="l02729"></a>02729     <span class="keywordtype">void</span>* p = <a class="code" href="classmcs_1_1ThreadSpecificData.html#69d89b89a158b8fe6b4dcbe4ffc0a381">getp</a>();
<a name="l02730"></a>02730     <span class="keywordflow">if</span> (p)
<a name="l02731"></a>02731       (destructor)(p);
<a name="l02732"></a>02732 
<a name="l02733"></a>02733     pthread_setspecific(<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>, NULL);
<a name="l02734"></a>02734   }
<a name="l02735"></a>02735 
<a name="l02736"></a>02736   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#aea41ee70afb38545daf878fd439ac0f">init</a>(BASE* p = NULL, <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#03f19d8ee85bae927d8155eb10b3d838">tag</a> = 0)
<a name="l02737"></a>02737   {
<a name="l02738"></a>02738     <a class="code" href="classmcs_1_1ThreadSpecificData.html#1cf5cc014198d53f35a52ed27e9e70e6">clear</a>();
<a name="l02739"></a>02739 
<a name="l02740"></a>02740     <span class="keywordflow">if</span> (! p)
<a name="l02741"></a>02741       p = <span class="keyword">new</span> BASE();
<a name="l02742"></a>02742 
<a name="l02743"></a>02743     pthread_setspecific(<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>, p);
<a name="l02744"></a>02744     <a class="code" href="classmcs_1_1ThreadSpecificData.html#31a3499e71c849b8727aef4637d63038">ltag</a> = <a class="code" href="classmcs_1_1ThreadSpecificData.html#03f19d8ee85bae927d8155eb10b3d838">tag</a>;
<a name="l02745"></a>02745   }
<a name="l02746"></a>02746 
<a name="l02747"></a>02747   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#03f19d8ee85bae927d8155eb10b3d838">tag</a>()
<a name="l02748"></a>02748   { <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1ThreadSpecificData.html#31a3499e71c849b8727aef4637d63038">ltag</a>; }
<a name="l02749"></a>02749 
<a name="l02750"></a>02750   BASE* <a class="code" href="classmcs_1_1ThreadSpecificData.html#45fa213182b648744b895e0190eea643">operator-&gt;</a>()<span class="keyword"> const</span>
<a name="l02751"></a>02751 <span class="keyword">  </span>{ <span class="keywordflow">return</span>  ((BASE*) pthread_getspecific(<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>)); }
<a name="l02752"></a>02752 
<a name="l02753"></a>02753   BASE* <a class="code" href="classmcs_1_1ThreadSpecificData.html#69d89b89a158b8fe6b4dcbe4ffc0a381">getp</a>()
<a name="l02754"></a>02754   { <span class="keywordflow">return</span>  ((BASE*) pthread_getspecific(<a class="code" href="classmcs_1_1ThreadSpecificData.html#c203373d1c6607ccddbb97d686bb3cee">key</a>)); }
<a name="l02755"></a>02755 };
<a name="l02756"></a>02756 
<a name="l02757"></a>02757 
<a name="l02758"></a>02758 
<a name="l02759"></a>02759 
<a name="l02760"></a>02760 
<a name="l02761"></a>02761 <span class="keyword">class </span>ThreadFunc : <span class="keyword">public</span> Thread
<a name="l02762"></a>02762 {
<a name="l02763"></a>02763 <span class="keyword">private</span>:
<a name="l02764"></a>02764   int    (*start_routine1)(<span class="keywordtype">void</span>*);
<a name="l02765"></a>02765   Event* (*start_routine2)(<span class="keywordtype">void</span>*);
<a name="l02766"></a>02766   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1ThreadFunc.html#cf026fb0240178a6838598cc5c3755c0">arg</a>;
<a name="l02767"></a>02767   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ThreadFunc.html#3a227091099689f494d17b7e1ead5875">ret</a>;
<a name="l02768"></a>02768 
<a name="l02769"></a><a class="code" href="classmcs_1_1ThreadSpecificData.html">02769</a>   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1ThreadFunc.html#fa663fe5bd6145e58f95eedaaac1cc05">run</a>();
<a name="l02770"></a>02770 
<a name="l02771"></a>02771 <span class="keyword">public</span>:
<a name="l02773"></a><a class="code" href="classmcs_1_1ThreadSpecificData.html#31a3499e71c849b8727aef4637d63038">02773</a>   <a class="code" href="classmcs_1_1ThreadFunc.html#10929e802a8d877b898a925a72586fe2" title="Constructor, run a user function in a separate thread.">ThreadFunc</a>(<span class="keywordtype">int</span>    (*start_routine)(<span class="keywordtype">void</span>*), <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1ThreadFunc.html#cf026fb0240178a6838598cc5c3755c0">arg</a>);
<a name="l02774"></a>02774   <a class="code" href="classmcs_1_1ThreadFunc.html#10929e802a8d877b898a925a72586fe2" title="Constructor, run a user function in a separate thread.">ThreadFunc</a>(<a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a>* (*start_routine)(<span class="keywordtype">void</span>*), <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1ThreadFunc.html#cf026fb0240178a6838598cc5c3755c0">arg</a>);
<a name="l02775"></a><a class="code" href="classmcs_1_1ThreadSpecificData.html#e31174fffdbc31e5c091858445948d93">02775</a> 
<a name="l02776"></a>02776   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1ThreadFunc.html#51ac80338fcec7249a844af4e8c7e5d3">retcode</a>();
<a name="l02777"></a>02777 };
<a name="l02778"></a>02778 
<a name="l02779"></a>02779 
<a name="l02780"></a>02780 
<a name="l02787"></a>02787 <span class="keywordtype">void</span> <a class="code" href="namespacemcs.html#f1a42eb6bb713bfa98ac131c657c028e" title="A millisecond resolution sleep function.">sleep_ms</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> millisec);
<a name="l02788"></a>02788 
<a name="l02789"></a>02789 
<a name="l02790"></a><a class="code" href="classmcs_1_1ThreadSpecificData.html#75c83a43437874855e3844d6557d859c">02790</a> 
<a name="l02797"></a>02797 <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bd" title="Enumerate operational mode for a DateTime object.">TimeMode</a> {
<a name="l02798"></a>02798   <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bda2b03c13794d4d09dc7473ad5e2d948c">UTC</a>,
<a name="l02799"></a>02799   <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bda8845b89caec11eb1bfd40cc9063f133">LOCAL</a>
<a name="l02800"></a>02800 };
<a name="l02801"></a>02801 
<a name="l02802"></a><a class="code" href="classmcs_1_1ThreadSpecificData.html#aea41ee70afb38545daf878fd439ac0f">02802</a> 
<a name="l02803"></a>02803 
<a name="l02804"></a>02804 
<a name="l02805"></a>02805 
<a name="l02806"></a>02806 time_t <a class="code" href="namespacemcs.html#48dc56c581715084f158d74b02b78d65">my_timelocal</a>(<span class="keyword">struct</span> tm* tm);
<a name="l02807"></a>02807 
<a name="l02808"></a>02808 
<a name="l02809"></a>02809 
<a name="l02810"></a>02810 
<a name="l02829"></a>02829 <span class="keyword">class </span><a class="code" href="classmcs_1_1DateTime.html" title="A class to hold date time information.">DateTime</a> {
<a name="l02830"></a>02830 
<a name="l02831"></a>02831 <span class="keyword">private</span>:
<a name="l02833"></a><a class="code" href="classmcs_1_1ThreadFunc.html#3a227091099689f494d17b7e1ead5875">02833</a>   time_t <a class="code" href="classmcs_1_1DateTime.html#fdbfc149f3da37e3a0c10649511a8c93" title="Internal storage (seconds elapsed since 1970-01-01 00:00:00 UTC).">time</a>;
<a name="l02834"></a>02834 
<a name="l02836"></a>02836   <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bd" title="Enumerate operational mode for a DateTime object.">TimeMode</a> <a class="code" href="classmcs_1_1DateTime.html#2c2b78e912a7a79fc606e30b9684fb2e" title="Operational time mode.">timemode</a>;
<a name="l02837"></a>02837 
<a name="l02839"></a>02839   MYSQL_TIME* <a class="code" href="classmcs_1_1DateTime.html#09dec540721e553b8e5ef35f9ed1c5c4" title="Pointer to linked MYSQL_TIME structure.">mysql</a>;
<a name="l02840"></a>02840 
<a name="l02853"></a>02853   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1DateTime.html#a80f7c609000ffcf057211abbbf529f1" title="Parse a string to extract datetime information.">parseTime</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* s, <span class="keyword">struct</span> tm* tm);
<a name="l02854"></a>02854 
<a name="l02855"></a>02855 
<a name="l02857"></a>02857   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#aba1f19fa2bd0cd86d4cf81ed60b5eb7" title="Update linked MYSQL_TIME structure (if any) with internal value.">to_MYSQL_TIME</a>();
<a name="l02858"></a>02858 
<a name="l02859"></a>02859 
<a name="l02867"></a>02867   time_t <a class="code" href="classmcs_1_1DateTime.html#40209b49ebf466227c83f9056e841f37" title="Return stored time.">getTime</a>() <span class="keyword">const</span>;
<a name="l02868"></a>02868 
<a name="l02869"></a>02869 
<a name="l02870"></a>02870 <span class="keyword">public</span>:
<a name="l02872"></a>02872   <a class="code" href="classmcs_1_1DateTime.html#4062c6373b36921442bac78b7765c1d1" title="Constructor.">DateTime</a>();
<a name="l02873"></a>02873 
<a name="l02881"></a>02881   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#3c8ca99a7e5d4ab1ba72b9c28089e616" title="Set a pointer to a MYSQL_TIME structure.">setMysqlBuffer</a>(MYSQL_TIME* <a class="code" href="classmcs_1_1DateTime.html#09dec540721e553b8e5ef35f9ed1c5c4" title="Pointer to linked MYSQL_TIME structure.">mysql</a>);
<a name="l02882"></a>02882 
<a name="l02897"></a>02897   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#edc888fa24a45f45124fe146680fe60c" title="Set operational time mode.">setTimeMode</a>(<span class="keyword">enum</span> <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bd" title="Enumerate operational mode for a DateTime object.">TimeMode</a> tm);
<a name="l02898"></a>02898 
<a name="l02899"></a><a class="code" href="classmcs_1_1DateTime.html#fdbfc149f3da37e3a0c10649511a8c93">02899</a> 
<a name="l02901"></a>02901   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#a54f77691ebe04b44fbda25348a061b1" title="Set the current datetime value.">now</a>();
<a name="l02902"></a><a class="code" href="classmcs_1_1DateTime.html#2c2b78e912a7a79fc606e30b9684fb2e">02902</a> 
<a name="l02903"></a>02903 
<a name="l02905"></a><a class="code" href="classmcs_1_1DateTime.html#09dec540721e553b8e5ef35f9ed1c5c4">02905</a>   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#e9249b82245d7a62d86c3dc2bff5c44a" title="Assign a time_t value.">settval</a>(time_t t);
<a name="l02906"></a>02906 
<a name="l02908"></a>02908   <a class="code" href="classmcs_1_1DateTime.html" title="A class to hold date time information.">DateTime</a>&amp; <a class="code" href="classmcs_1_1DateTime.html#39a8e664a1fafce622b5bb376fe88806" title="Wrapper to settval(time_t).">operator=</a>(time_t t)
<a name="l02909"></a>02909     { <a class="code" href="classmcs_1_1DateTime.html#e9249b82245d7a62d86c3dc2bff5c44a" title="Assign a time_t value.">settval</a>(t); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l02910"></a>02910 
<a name="l02911"></a>02911 
<a name="l02915"></a>02915   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#eb7ed164693e72916fb384ff967772bd" title="Parse a string to extract a datetime value.">setsval</a>(<span class="keywordtype">string</span> s);
<a name="l02916"></a>02916 
<a name="l02918"></a>02918   <a class="code" href="classmcs_1_1DateTime.html" title="A class to hold date time information.">DateTime</a>&amp; <a class="code" href="classmcs_1_1DateTime.html#39a8e664a1fafce622b5bb376fe88806" title="Wrapper to settval(time_t).">operator=</a>(<span class="keywordtype">string</span> s)
<a name="l02919"></a>02919     { <a class="code" href="classmcs_1_1DateTime.html#eb7ed164693e72916fb384ff967772bd" title="Parse a string to extract a datetime value.">setsval</a>(s); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l02920"></a>02920 
<a name="l02936"></a>02936   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1DateTime.html#cf3919b2993cb70c779af75c690cefcb" title="Assign a struct tm value.">settmval</a>(<span class="keyword">struct</span> tm&amp; ltm);
<a name="l02937"></a>02937 
<a name="l02939"></a>02939   <a class="code" href="classmcs_1_1DateTime.html#4062c6373b36921442bac78b7765c1d1" title="Constructor.">DateTime</a>&amp; <a class="code" href="classmcs_1_1DateTime.html#39a8e664a1fafce622b5bb376fe88806" title="Wrapper to settval(time_t).">operator=</a>(<span class="keyword">struct</span> tm&amp; ltm)
<a name="l02940"></a>02940     { <a class="code" href="classmcs_1_1DateTime.html#cf3919b2993cb70c779af75c690cefcb" title="Assign a struct tm value.">settmval</a>(ltm); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l02941"></a>02941 
<a name="l02942"></a>02942 
<a name="l02944"></a>02944   time_t <a class="code" href="classmcs_1_1DateTime.html#781354dba580bb9541d1a55c6388c9de" title="Retrieve a time_t value.">tval</a>() <span class="keyword">const</span>;
<a name="l02945"></a>02945 
<a name="l02947"></a>02947   <a class="code" href="classmcs_1_1DateTime.html#a54e04708dafe06914890dcbff3caff7" title="Wrapper to tval().">operator time_t</a>()<span class="keyword"> const</span>
<a name="l02948"></a>02948 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1DateTime.html#781354dba580bb9541d1a55c6388c9de" title="Retrieve a time_t value.">tval</a>(); }
<a name="l02949"></a>02949 
<a name="l02950"></a>02950 
<a name="l02952"></a>02952   <span class="keyword">struct </span>tm <a class="code" href="classmcs_1_1DateTime.html#540dbb4ccde67438f5b0513e0254b377" title="Retrieve a struct tm object.">tmval</a>() const;
<a name="l02953"></a>02953 
<a name="l02955"></a>02955   <a class="code" href="classmcs_1_1DateTime.html#9ed68522c41f654747052247ed1acaab" title="Wrapper to tval().">operator struct tm</a>()<span class="keyword"> const</span>
<a name="l02956"></a>02956 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1DateTime.html#540dbb4ccde67438f5b0513e0254b377" title="Retrieve a struct tm object.">tmval</a>(); }
<a name="l02957"></a>02957 
<a name="l02959"></a>02959   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1DateTime.html#63d7d27395151cec785ac1a5bb7b1792" title="Retrieve a string representation of the datetime value.">sval</a>() <span class="keyword">const</span>;
<a name="l02960"></a>02960 
<a name="l02962"></a>02962   <a class="code" href="classmcs_1_1DateTime.html#6d2f7201fde457879ad92808065edef8" title="Wrapper to sval().">operator string</a>()<span class="keyword"> const</span>
<a name="l02963"></a>02963 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1DateTime.html#63d7d27395151cec785ac1a5bb7b1792" title="Retrieve a string representation of the datetime value.">sval</a>(); }
<a name="l02964"></a>02964 };
<a name="l02965"></a>02965 
<a name="l02966"></a>02966 
<a name="l02967"></a>02967 
<a name="l02968"></a>02968 <span class="preprocessor">#define MCS_ID_UNKNOWN  -1</span>
<a name="l02969"></a>02969 <span class="preprocessor"></span><span class="preprocessor">#define MCS_ID_LOCAL    -2</span>
<a name="l02970"></a>02970 <span class="preprocessor"></span><span class="preprocessor">#define MCS_ID_CLIENT   -3</span>
<a name="l02971"></a>02971 <span class="preprocessor"></span>
<a name="l02972"></a>02972 
<a name="l02973"></a>02973 <span class="comment">//  Another wide use of the Data class is to to set/retrieve data of</span>
<a name="l02974"></a><a class="code" href="classmcs_1_1DateTime.html#39a8e664a1fafce622b5bb376fe88806">02974</a> <span class="comment">//  prepared statement executions on the database. The Query class has</span>
<a name="l02975"></a>02975 <span class="comment">//  two fundamental methods that returns address of Data objects:</span>
<a name="l02976"></a>02976 <span class="comment">//  param() (to input data on prepared statement) and field() (to</span>
<a name="l02977"></a>02977 <span class="comment">//  retrieve data from an executed query on the database.</span>
<a name="l02978"></a>02978 
<a name="l02979"></a>02979 
<a name="l02980"></a>02980 
<a name="l02981"></a>02981 <span class="comment">//Max number of dimensions in a Data multi-dimensional array. Note</span>
<a name="l02982"></a>02982 <span class="comment">//that this number influences the declaration and implementation of</span>
<a name="l02983"></a>02983 <span class="comment">//Data::array and Data::operator=.</span>
<a name="l02984"></a><a class="code" href="classmcs_1_1DateTime.html#d3f31b9bac1c8915151b565b9635fbf0">02984</a> <span class="preprocessor">#define MCS_DATA_NDIM   15</span>
<a name="l02985"></a>02985 <span class="preprocessor"></span>
<a name="l02986"></a>02986 
<a name="l02987"></a>02987 
<a name="l02988"></a>02988 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l03056"></a>03056 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1Serializable.html" title="Serialize memory buffers or files into chunks.">Serializable</a>
<a name="l03057"></a>03057 {
<a name="l03058"></a>03058 <span class="keyword">private</span>:
<a name="l03059"></a>03059   <a class="code" href="classmcs_1_1Data.html#907f960c7229c01b0ae50fe3fc1f0388">MCS_DEBUG_ALLOC</a>;
<a name="l03060"></a>03060 
<a name="l03061"></a>03061   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#3aa508419121e0393e94d5de156443a5">reallocBuffer</a>();
<a name="l03062"></a>03062 
<a name="l03063"></a>03063 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l03065"></a>03065 <span class="preprocessor">  MYSQL_BIND* lbind;</span>
<a name="l03066"></a>03066 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l03067"></a>03067 <span class="preprocessor"></span>
<a name="l03069"></a>03069   <a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#26bfcea1928dd921f3f97dc131acbf88" title="Object base type.">ltype</a>;
<a name="l03070"></a>03070 
<a name="l03072"></a>03072   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Data.html#3adbfcf170db5a817da7a79d20c933bc" title="Object name.">lname</a>;
<a name="l03073"></a>03073 
<a name="l03075"></a>03075   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#7512d1da1116324a86fc9ba35e74d05d" title="Flags (EXPERIMENTAL).">lflags</a>;
<a name="l03076"></a>03076 
<a name="l03079"></a>03079   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#6f0932d0a765eccedcfa06c4a871abfb" title="Max number of bytes that can be stored in the buffer (size of the buffer).">lmaxlength</a>;
<a name="l03080"></a>03080 
<a name="l03085"></a>03085   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classmcs_1_1Data.html#c8b1394fc8c6358eaa52008c8abc7a0b" title="Actual length of real data in the buffer, useful only when the base type is a variable...">llength</a>;
<a name="l03086"></a>03086 
<a name="l03088"></a>03088   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#b0b1b93214f1c475231a85af3b46cb39" title="Base type is unsigned.">lisunsigned</a>;
<a name="l03089"></a>03089 
<a name="l03091"></a>03091   my_bool <a class="code" href="classmcs_1_1Data.html#5aabe8b23ba7d2bbf014c54875f5d662" title="The object has a null value.">lisnull</a>;
<a name="l03092"></a>03092 
<a name="l03094"></a>03094   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#2d3e402950873fee61b2f0a3685a8e6f" title="If the AUTO_INCREMENT flag is true.">lautoincr</a>;
<a name="l03095"></a>03095 
<a name="l03097"></a>03097   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a>;
<a name="l03098"></a>03098 
<a name="l03100"></a>03100   <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#53a7f9f4cb916df86128244a861dcee4" title="Data buffer.">buf</a>;
<a name="l03101"></a>03101 
<a name="l03103"></a>03103   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#a669a9ce69ce40f06fa0b728f04b6dd6" title="Size of data buffer.">bufsize</a>;
<a name="l03104"></a>03104 
<a name="l03106"></a>03106   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#4e04ba999db2b209492b551e1ad73315" title="Format to handle datetime in sprintf/sscanf calls.">dtfmt</a>;
<a name="l03107"></a>03107 
<a name="l03109"></a>03109   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#2ada4b5227a40a2b3d9d15476336697a" title="Format to handle date in sprintf/sscanf calls.">dafmt</a>;
<a name="l03110"></a>03110 
<a name="l03112"></a>03112   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#a8c4bff53de8679b738781025c2dd160" title="Format to handle time in sprintf/sscanf calls.">tmfmt</a>;
<a name="l03113"></a>03113 
<a name="l03115"></a>03115   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#5046de0ca64e03477ac10f0d7cb0a0ed" title="Format to handle integers in sprintf/sscanf calls.">ifmt</a>;
<a name="l03116"></a>03116 
<a name="l03118"></a>03118   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#e1e9a46ee23bf490c13566076ca069f2" title="Format to handle long integers in sprintf/sscanf calls.">lfmt</a>;
<a name="l03119"></a>03119 
<a name="l03121"></a>03121   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#80c4c4b5d0fe1db0833d5dedc93aa533" title="Format to handle float in sprintf/sscanf calls.">ffmt</a>;
<a name="l03122"></a><a class="code" href="classmcs_1_1Data.html">03122</a> 
<a name="l03124"></a>03124   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#c9903e40e1999f6b5ea25e72a73d1bd8" title="Format to handle double float in sprintf/sscanf calls.">dfmt</a>;
<a name="l03125"></a><a class="code" href="classmcs_1_1Data.html#907f960c7229c01b0ae50fe3fc1f0388">03125</a> 
<a name="l03126"></a>03126   <a class="code" href="classmcs_1_1DateTime.html" title="A class to hold date time information.">DateTime</a> <a class="code" href="classmcs_1_1Data.html#07bef2f74ceb0487f7fad8e2cbede13d">dt</a>;
<a name="l03127"></a>03127 
<a name="l03128"></a>03128 
<a name="l03130"></a>03130   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#3d7788b0988d535b3c7a3ee8862e936b" title="Initialize internal structures.">init</a>(MYSQL_BIND* bind, <a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#73ec14d9f0d5b8b6d262f1150185e978" title="Return the base type of the object.">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#68de591bdbb52973ef92af9ac8e7cd1f" title="Return the name of the object.">name</a>=<span class="stringliteral">""</span>,
<a name="l03131"></a><a class="code" href="classmcs_1_1Data.html#b9c076b7c9b9261bcfaf4990a899d308">03131</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#3091d6701598a55cd2c9b7f5c2af38f2" title="Return the size of the internal buffer.">maxLength</a>=0, <span class="keywordtype">bool</span> isunsigned=<span class="keyword">false</span>,
<a name="l03132"></a>03132         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags = 0);
<a name="l03133"></a>03133 
<a name="l03135"></a><a class="code" href="classmcs_1_1Data.html#26bfcea1928dd921f3f97dc131acbf88">03135</a>   <span class="comment">//void MySQL_TIME_2_time_t(MYSQL_TIME* mtime, time_t* t);</span>
<a name="l03136"></a>03136   <span class="comment">//</span>
<a name="l03138"></a><a class="code" href="classmcs_1_1Data.html#3adbfcf170db5a817da7a79d20c933bc">03138</a> <span class="comment"></span>  <span class="comment">//void time_t_2_MySQL_TIME(time_t* t, MYSQL_TIME* mtime);</span>
<a name="l03139"></a>03139 
<a name="l03157"></a>03157   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#da76c32bf3431b7a1af176bc6bcad2ac" title="Prepare a buffer with all informations contained in the object.">serialize_buffer</a>(<span class="keywordtype">char</span>*&amp; <a class="code" href="classmcs_1_1Serializable.html#ba9931166fc85556d7aea1c34604c686" title="Pointer to source buffer, if type = MCS_SERIAL_BUFFER.">from</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>);
<a name="l03158"></a>03158 
<a name="l03160"></a>03160   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#27a57b2fa7f9b266506d4870722e7604" title="The userid of the thread who send this object.">id_source</a>;
<a name="l03161"></a>03161 
<a name="l03163"></a>03163   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#8ba9a3327b1305dd9af65ecb583f06dd" title="The userid of the thread that will receive this object.">id_dest</a>;
<a name="l03164"></a>03164 
<a name="l03170"></a>03170   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#f9874468a9966ce55b6753f7a416296c" title="Multi-dimensional array specification.">ldimspec</a>;
<a name="l03171"></a><a class="code" href="classmcs_1_1Data.html#4e04ba999db2b209492b551e1ad73315">03171</a> 
<a name="l03173"></a>03173   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#d7637d90c4963f922439c9320bb2c614" title="Size of each dimension.">ldim</a>[<a class="code" href="mcs_8hh.html#eeda57fb9584b05782d704bef11357ab">MCS_DATA_NDIM</a>];
<a name="l03174"></a><a class="code" href="classmcs_1_1Data.html#2ada4b5227a40a2b3d9d15476336697a">03174</a> 
<a name="l03176"></a>03176   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#00df99689b516283ca92f9319fe86b8c" title="Multiplicative coefficients to calculate arrpos.">mult</a>[<a class="code" href="mcs_8hh.html#eeda57fb9584b05782d704bef11357ab">MCS_DATA_NDIM</a>];
<a name="l03177"></a><a class="code" href="classmcs_1_1Data.html#a8c4bff53de8679b738781025c2dd160">03177</a> 
<a name="l03179"></a>03179   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#f55b4d2cb6776d816ec71bc1348aba2b" title="Array size, i.e. how many cells are in the array.">arrsize</a>;
<a name="l03180"></a><a class="code" href="classmcs_1_1Data.html#5046de0ca64e03477ac10f0d7cb0a0ed">03180</a> 
<a name="l03182"></a>03182   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#a908fc5212365466f03d4becad6c5334" title="Last selected array cell.">arrpos</a>;
<a name="l03183"></a><a class="code" href="classmcs_1_1Data.html#e1e9a46ee23bf490c13566076ca069f2">03183</a> 
<a name="l03184"></a>03184 <span class="keyword">public</span>:
<a name="l03186"></a><a class="code" href="classmcs_1_1Data.html#80c4c4b5d0fe1db0833d5dedc93aa533">03186</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#42f613231921c17daf740fb9461376f9" title="Return how many bytes require the object to be serialized.">objSize</a>();
<a name="l03187"></a>03187 
<a name="l03188"></a>03188 
<a name="l03190"></a>03190   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>();
<a name="l03191"></a><a class="code" href="classmcs_1_1Data.html#07bef2f74ceb0487f7fad8e2cbede13d">03191</a> 
<a name="l03193"></a>03193   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keyword">const</span> <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Serializable.html#ba9931166fc85556d7aea1c34604c686" title="Pointer to source buffer, if type = MCS_SERIAL_BUFFER.">from</a>);
<a name="l03194"></a>03194 
<a name="l03195"></a>03195 
<a name="l03211"></a>03211   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#73ec14d9f0d5b8b6d262f1150185e978" title="Return the base type of the object.">type</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#3091d6701598a55cd2c9b7f5c2af38f2" title="Return the size of the internal buffer.">maxLength</a> = 0,
<a name="l03212"></a>03212        <span class="keywordtype">bool</span> isunsigned = <span class="keyword">false</span>, <span class="keywordtype">string</span> dimSpec = <span class="stringliteral">""</span>);
<a name="l03213"></a>03213 
<a name="l03214"></a>03214 
<a name="l03237"></a>03237   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(MYSQL_BIND* bind = NULL, <a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#73ec14d9f0d5b8b6d262f1150185e978" title="Return the base type of the object.">type</a> = <a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6f48ff081bdb57c87e8ec848522e2df7b">STRING</a>,
<a name="l03238"></a><a class="code" href="classmcs_1_1Data.html#d7637d90c4963f922439c9320bb2c614">03238</a>        <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classmcs_1_1Data.html#68de591bdbb52973ef92af9ac8e7cd1f" title="Return the name of the object.">name</a>=<span class="stringliteral">""</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#3091d6701598a55cd2c9b7f5c2af38f2" title="Return the size of the internal buffer.">maxLength</a>=0,
<a name="l03239"></a>03239        <span class="keywordtype">bool</span> isunsigned=<span class="keyword">false</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags = 0,
<a name="l03240"></a>03240        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03241"></a><a class="code" href="classmcs_1_1Data.html#00df99689b516283ca92f9319fe86b8c">03241</a> 
<a name="l03242"></a>03242 
<a name="l03249"></a>03249   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">int</span>                    v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03250"></a>03250 
<a name="l03257"></a>03257   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>          v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03258"></a>03258 
<a name="l03265"></a>03265   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">double</span>                 v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03266"></a>03266 
<a name="l03275"></a>03275   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">string</span>                 v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03276"></a>03276 
<a name="l03283"></a>03283   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keyword">struct</span> tm             v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03284"></a>03284 
<a name="l03291"></a>03291   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(time_t                 v, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03292"></a>03292 
<a name="l03304"></a>03304   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">void</span>* lbuf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a> = 0);
<a name="l03305"></a>03305 
<a name="l03306"></a>03306 
<a name="l03314"></a>03314   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>(<span class="keywordtype">void</span>* lbuf);
<a name="l03315"></a>03315 
<a name="l03317"></a>03317   <a class="code" href="classmcs_1_1Data.html#667aa9af0ebdee6a90d33cd6aebb8cbf" title="Destructor Frees internal buffer.">~Data</a>();
<a name="l03318"></a>03318 
<a name="l03325"></a>03325   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#498b0de0f34c47feb09d7826d5e0ec84" title="Set the object name to an empty string.">emptyName</a>();
<a name="l03326"></a>03326 
<a name="l03327"></a>03327 
<a name="l03329"></a>03329   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Data.html#68de591bdbb52973ef92af9ac8e7cd1f" title="Return the name of the object.">name</a>();
<a name="l03330"></a>03330 
<a name="l03331"></a>03331   <span class="comment">//Set the name of the object.</span>
<a name="l03332"></a>03332   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#5952481491c13e04c0edeaf64ebf001b">setName</a>(<span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Data.html#68de591bdbb52973ef92af9ac8e7cd1f" title="Return the name of the object.">name</a>);
<a name="l03333"></a>03333 
<a name="l03335"></a>03335   <span class="comment">//unsigned int flags();</span>
<a name="l03336"></a>03336 
<a name="l03338"></a>03338   <a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#73ec14d9f0d5b8b6d262f1150185e978" title="Return the base type of the object.">type</a>();
<a name="l03339"></a>03339 
<a name="l03341"></a>03341   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#3091d6701598a55cd2c9b7f5c2af38f2" title="Return the size of the internal buffer.">maxLength</a>();
<a name="l03342"></a>03342 
<a name="l03344"></a>03344   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#372dc0694d8c956807aadd9030e71b3a" title="Return the actual length of the data in the internal buffer.">length</a>();
<a name="l03345"></a>03345 
<a name="l03347"></a>03347   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#0971f7fbdffa5fe685db6539b620a41a" title="Tell if the object contains unsigned integers.">isUnsigned</a>();
<a name="l03348"></a>03348 
<a name="l03350"></a>03350   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#e3090b899c18f6105a77a309fd2bf473" title="Tells if no value is stored.">isNull</a>();
<a name="l03351"></a>03351 
<a name="l03353"></a>03353   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Data.html#63ba1cea6aca121f826f3c4108f6909a" title="Tells if the database field is an auto increment field.">isAutoIncrement</a>();
<a name="l03354"></a>03354 
<a name="l03356"></a>03356   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Data.html#96df2346a3a5dcc640d17b30efd958f6" title="Return a pointer to the internal buffer, use this at your own risk.">buffer</a>() <span class="keyword">const</span>;
<a name="l03357"></a>03357 
<a name="l03364"></a>03364   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#97d444867d31f88183a6bdac117c1394" title="Convert internal data to a integer value.">ival</a>() <span class="keyword">const</span>;
<a name="l03365"></a>03365 
<a name="l03372"></a>03372   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#fe5c9f5f0f046ca236227702a1b8a623" title="Convert internal data to an unsigned integer value.">uival</a>() <span class="keyword">const</span>;
<a name="l03373"></a>03373 
<a name="l03380"></a>03380   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#40077b9cd5eb624d8b0d5f4a7ed9c5ef" title="Convert internal data to a long long integer value.">lval</a>() <span class="keyword">const</span>;
<a name="l03381"></a>03381 
<a name="l03388"></a>03388   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#e65d28953a2ea179a560bba4c8ccacf6" title="Convert internal data to an unsigned long long integer value.">ulval</a>() <span class="keyword">const</span>;
<a name="l03389"></a>03389 
<a name="l03396"></a>03396   <span class="keywordtype">float</span> <a class="code" href="classmcs_1_1Data.html#ccedb7c5b1e27d52881b223bfd2426cf" title="Convert internal data to a floating point value.">fval</a>() <span class="keyword">const</span>;
<a name="l03397"></a>03397 
<a name="l03404"></a>03404   <span class="keywordtype">double</span> <a class="code" href="classmcs_1_1Data.html#3e4b628e18f8d2f3b83083c27bf7ed48" title="Convert internal data to a double (8 bytes) floating point value.">dval</a>() <span class="keyword">const</span>;
<a name="l03405"></a>03405 
<a name="l03412"></a>03412   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Data.html#16156d4d24fc7fa5b248a34b5635d10f" title="Convert internal data to a string object.">sval</a>(<span class="keywordtype">bool</span> addWhiteSpaces = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l03413"></a>03413 
<a name="l03425"></a>03425   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#2a90ff685d243daefef0e1acea4070bf" title="Convert internal data to a NULL terminated string and store it in a buffer.">cval</a>(<span class="keywordtype">char</span>* c, <span class="keywordtype">int</span> maxlength) <span class="keyword">const</span>;
<a name="l03426"></a>03426 
<a name="l03430"></a>03430   time_t <a class="code" href="classmcs_1_1Data.html#22ce7f595d158f256992fe918775995e" title="Convert internal data to a time_t value.">tval</a>() <span class="keyword">const</span>;
<a name="l03431"></a>03431 
<a name="l03439"></a>03439   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#22ce7f595d158f256992fe918775995e" title="Convert internal data to a time_t value.">tval</a>(<span class="keyword">struct</span> tm* t) <span class="keyword">const</span>;
<a name="l03440"></a>03440 
<a name="l03441"></a>03441 
<a name="l03442"></a>03442   <span class="keywordtype">void</span>* <a class="code" href="classmcs_1_1Data.html#899a0f83b1dd6689eb40ff454e6d4798">pval</a>() <span class="keyword">const</span>;
<a name="l03443"></a>03443 
<a name="l03444"></a>03444   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#3d679924d396348a6fcaea7c9a1715c9">setpval</a>(<span class="keywordtype">void</span>* p);
<a name="l03445"></a>03445 
<a name="l03446"></a>03446 
<a name="l03448"></a>03448   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#41243205a16deefc7ac471138454cbc3" title="Set null flag. Following call to isNull() returns the value used here as parameter...">setNull</a>(<span class="keywordtype">bool</span> null = <span class="keyword">true</span>);
<a name="l03449"></a>03449 
<a name="l03451"></a>03451   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#147d9ed582d54b89afa57654247c2a3b" title="Convert int value to base type and store in internal buffer.">setival</a>(<span class="keywordtype">int</span> v);
<a name="l03452"></a>03452 
<a name="l03454"></a>03454   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#8a748bca5cc3a36fbafce1224bc708e9" title="Convert unsigned int value to base type and store in internal buffer.">setuival</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v);
<a name="l03455"></a>03455 
<a name="l03457"></a>03457   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#f316486d64b06d9e331db6445e2dcf39" title="Convert long int value to base type and store in internal buffer.">setlval</a>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> v);
<a name="l03458"></a>03458 
<a name="l03460"></a>03460   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#c0e3cc14575a387751e8ddde3aaf69f7" title="Convert unsigned long int value to base type and store in internal buffer.">setulval</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> v);
<a name="l03461"></a>03461 
<a name="l03463"></a>03463   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#1036e5517d036e7fe564e94def200389" title="Convert double value to base type and store in internal buffer.">setdval</a>(<span class="keywordtype">double</span> v);
<a name="l03464"></a>03464 
<a name="l03466"></a>03466   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#c269e9c22df5f011fd3aa627d4f48bb7" title="Convert string value to base type and store in internal buffer.">setcval</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* v);
<a name="l03467"></a>03467 
<a name="l03469"></a>03469   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#bcad780e5e5ad1fe585096173fbf4384" title="Convert string value to base type and store in internal buffer.">setsval</a>(<span class="keywordtype">string</span> v);
<a name="l03470"></a>03470 
<a name="l03472"></a>03472   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#51985ded380ae24b503755ece9fa36dd" title="Copy &amp;quot;size&amp;quot; bytes from the address given in &amp;quot;lbuf&amp;quot; parameter...">setblob</a>(<span class="keywordtype">void</span>* lbuf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Serializable.html#4af5b6bbfcc0796a4fce8b183ea91d69" title="If knowSize() is true, return the size of the entire block of data.">size</a>);
<a name="l03473"></a>03473 
<a name="l03475"></a>03475   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#14bd613eaf7f29ab19096ee2f42e796c" title="Convert &amp;quot;struct tm&amp;quot; value to base type and store in internal buffer.">settimeval</a>(<span class="keyword">struct</span> tm v);
<a name="l03476"></a>03476 
<a name="l03478"></a>03478   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#14bd613eaf7f29ab19096ee2f42e796c" title="Convert &amp;quot;struct tm&amp;quot; value to base type and store in internal buffer.">settimeval</a>(time_t v);
<a name="l03479"></a>03479 
<a name="l03481"></a>03481   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#6096a6cd429a7897e3d5d19d0e91d506" title="Convert current time value to base type and store in internal buffer.">settimenow</a>();
<a name="l03482"></a>03482 
<a name="l03483"></a>03483   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#17c040adb0ca06ded69f73da5a3902a6">setTimeMode</a>(<span class="keyword">enum</span> <a class="code" href="namespacemcs.html#b70d4cb69842a84bf070a4d8fc57c8bd" title="Enumerate operational mode for a DateTime object.">TimeMode</a> tm);
<a name="l03484"></a>03484 
<a name="l03485"></a>03485   <span class="comment">//Wrapper to setsval(int).</span>
<a name="l03486"></a>03486   <span class="comment">//void setval(string v);</span>
<a name="l03487"></a>03487 
<a name="l03488"></a>03488   <span class="comment">//Wrapper to setival(int).</span>
<a name="l03489"></a>03489   <span class="comment">//void setval(int v);</span>
<a name="l03490"></a>03490 
<a name="l03491"></a>03491   <span class="comment">//Wrapper to setdval(int).</span>
<a name="l03492"></a>03492   <span class="comment">//void setval(double v);</span>
<a name="l03493"></a>03493 
<a name="l03494"></a>03494   <span class="comment">//Wrapper to setcval(int).</span>
<a name="l03495"></a>03495   <span class="comment">//void setval(const char* v);</span>
<a name="l03496"></a>03496 
<a name="l03523"></a>03523   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#83016f2c22af2a8b2dee8dad44715d97" title="Create or resize a multi-dimensional array.">resize</a>(<span class="keywordtype">string</span> dimSpec);
<a name="l03524"></a>03524 
<a name="l03536"></a>03536   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#cdb300e35a5abde28450696c18794990" title="Resize variable length dimension.">resizeVaryingDim</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> newsize);
<a name="l03537"></a>03537 
<a name="l03543"></a>03543   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#60d98c8d68a4eb60901223fd58e57b9b" title="Return length of a dimension.">dim</a>(<span class="keywordtype">int</span> d);
<a name="l03544"></a>03544 
<a name="l03545"></a>03545 
<a name="l03546"></a>03546   <span class="comment">//How many dimensions, 0 means scalar value</span>
<a name="l03547"></a>03547 
<a name="l03554"></a>03554   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#987adf12599c055dbc868546a65894b6" title="Return how many dimensions are in the array.">howManyDim</a>();
<a name="l03555"></a>03555 
<a name="l03565"></a>03565   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#16570fe3f079ca06ad3223680a48d89e" title="Return the index of the dimension that may vary.">varyingDim</a>();
<a name="l03566"></a>03566 
<a name="l03572"></a>03572   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#b3e27f376ca3af1dd85ea9d4bd5d6bff" title="Return size of array.">arraySize</a>();
<a name="l03573"></a>03573 
<a name="l03574"></a>03574 
<a name="l03581"></a>03581   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#6f8d38f3d43c608cca29c4b60996a6ea" title="Select a cell from the array.">array</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i1 = 0,
<a name="l03582"></a>03582              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i2 = 0,
<a name="l03583"></a>03583              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i3 = 0,
<a name="l03584"></a>03584              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i4 = 0,
<a name="l03585"></a>03585              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i5 = 0,
<a name="l03586"></a>03586              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i6 = 0,
<a name="l03587"></a>03587              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i7 = 0,
<a name="l03588"></a>03588              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i8 = 0,
<a name="l03589"></a>03589              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i9 = 0,
<a name="l03590"></a>03590              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i10 = 0,
<a name="l03591"></a>03591              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i11 = 0,
<a name="l03592"></a>03592              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i12 = 0,
<a name="l03593"></a>03593              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i13 = 0,
<a name="l03594"></a>03594              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i14 = 0,
<a name="l03595"></a>03595              <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> i15 = 0);
<a name="l03596"></a>03596 
<a name="l03600"></a>03600   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#8e345bf635ddf5d5007caaeee19f844e" title="Same as array().">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> i1 = 0,
<a name="l03601"></a>03601            <span class="keyword">const</span> <span class="keywordtype">int</span> i2 = 0,
<a name="l03602"></a>03602            <span class="keyword">const</span> <span class="keywordtype">int</span> i3 = 0,
<a name="l03603"></a>03603            <span class="keyword">const</span> <span class="keywordtype">int</span> i4 = 0,
<a name="l03604"></a>03604            <span class="keyword">const</span> <span class="keywordtype">int</span> i5 = 0,
<a name="l03605"></a>03605            <span class="keyword">const</span> <span class="keywordtype">int</span> i6 = 0,
<a name="l03606"></a>03606            <span class="keyword">const</span> <span class="keywordtype">int</span> i7 = 0,
<a name="l03607"></a>03607            <span class="keyword">const</span> <span class="keywordtype">int</span> i8 = 0,
<a name="l03608"></a>03608            <span class="keyword">const</span> <span class="keywordtype">int</span> i9 = 0,
<a name="l03609"></a>03609            <span class="keyword">const</span> <span class="keywordtype">int</span> i10 = 0,
<a name="l03610"></a>03610            <span class="keyword">const</span> <span class="keywordtype">int</span> i11 = 0,
<a name="l03611"></a>03611            <span class="keyword">const</span> <span class="keywordtype">int</span> i12 = 0,
<a name="l03612"></a>03612            <span class="keyword">const</span> <span class="keywordtype">int</span> i13 = 0,
<a name="l03613"></a>03613            <span class="keyword">const</span> <span class="keywordtype">int</span> i14 = 0,
<a name="l03614"></a>03614            <span class="keyword">const</span> <span class="keywordtype">int</span> i15 = 0);
<a name="l03615"></a>03615 
<a name="l03617"></a>03617   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> v)
<a name="l03618"></a>03618     { <a class="code" href="classmcs_1_1Data.html#147d9ed582d54b89afa57654247c2a3b" title="Convert int value to base type and store in internal buffer.">setival</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03619"></a>03619 
<a name="l03621"></a>03621   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> v)
<a name="l03622"></a>03622     { <a class="code" href="classmcs_1_1Data.html#8a748bca5cc3a36fbafce1224bc708e9" title="Convert unsigned int value to base type and store in internal buffer.">setuival</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03623"></a>03623 
<a name="l03625"></a>03625   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> v)
<a name="l03626"></a>03626     { <a class="code" href="classmcs_1_1Data.html#f316486d64b06d9e331db6445e2dcf39" title="Convert long int value to base type and store in internal buffer.">setlval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03627"></a>03627 
<a name="l03629"></a>03629   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> v)
<a name="l03630"></a>03630     { <a class="code" href="classmcs_1_1Data.html#c0e3cc14575a387751e8ddde3aaf69f7" title="Convert unsigned long int value to base type and store in internal buffer.">setulval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03631"></a>03631 
<a name="l03633"></a>03633   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> v)
<a name="l03634"></a>03634     { <a class="code" href="classmcs_1_1Data.html#1036e5517d036e7fe564e94def200389" title="Convert double value to base type and store in internal buffer.">setdval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03635"></a>03635 
<a name="l03637"></a>03637   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*  v)
<a name="l03638"></a>03638     { <a class="code" href="classmcs_1_1Data.html#bcad780e5e5ad1fe585096173fbf4384" title="Convert string value to base type and store in internal buffer.">setsval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03639"></a>03639 
<a name="l03641"></a>03641   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> v)
<a name="l03642"></a>03642     { <a class="code" href="classmcs_1_1Data.html#bcad780e5e5ad1fe585096173fbf4384" title="Convert string value to base type and store in internal buffer.">setsval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03643"></a>03643 
<a name="l03645"></a>03645   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> <span class="keyword">struct</span> tm v)
<a name="l03646"></a>03646     { <a class="code" href="classmcs_1_1Data.html#14bd613eaf7f29ab19096ee2f42e796c" title="Convert &amp;quot;struct tm&amp;quot; value to base type and store in internal buffer.">settimeval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03647"></a>03647 
<a name="l03649"></a>03649   <a class="code" href="classmcs_1_1Data.html#c00c61505858269edbb08ad88a3ae38e" title="Build Data object of base type STRING and length zero.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<span class="keyword">const</span> time_t v)
<a name="l03650"></a>03650     { <a class="code" href="classmcs_1_1Data.html#14bd613eaf7f29ab19096ee2f42e796c" title="Convert &amp;quot;struct tm&amp;quot; value to base type and store in internal buffer.">settimeval</a>(v); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l03651"></a>03651 
<a name="l03653"></a>03653   <a class="code" href="classmcs_1_1Data.html#a71c15ccfae29543bcb9096a358baecf" title="Wrapper cast operator to ival().">operator const int                    </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#97d444867d31f88183a6bdac117c1394" title="Convert internal data to a integer value.">ival</a>     (); }
<a name="l03654"></a>03654 
<a name="l03656"></a>03656   <a class="code" href="classmcs_1_1Data.html#20abe1b0b20fe825a65112a56315d771" title="Wrapper cast operator to uival().">operator const unsigned int           </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#fe5c9f5f0f046ca236227702a1b8a623" title="Convert internal data to an unsigned integer value.">uival</a>    (); }
<a name="l03657"></a>03657 
<a name="l03659"></a>03659   <a class="code" href="classmcs_1_1Data.html#4ba61bcdff9e441465dee9250078e49f" title="Wrapper cast operator to lval().">operator const long long int          </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#40077b9cd5eb624d8b0d5f4a7ed9c5ef" title="Convert internal data to a long long integer value.">lval</a>     (); }
<a name="l03660"></a>03660 
<a name="l03662"></a>03662   <a class="code" href="classmcs_1_1Data.html#fe8be2d1d721de16fc6d113c01e9e30c" title="Wrapper cast operator to ulval().">operator const unsigned long long int </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#e65d28953a2ea179a560bba4c8ccacf6" title="Convert internal data to an unsigned long long integer value.">ulval</a>    (); }
<a name="l03663"></a>03663 
<a name="l03665"></a>03665   <a class="code" href="classmcs_1_1Data.html#5c73747f3c1ad9163deb7c53602f935f" title="Wrapper cast operator to dval().">operator const float                  </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#3e4b628e18f8d2f3b83083c27bf7ed48" title="Convert internal data to a double (8 bytes) floating point value.">dval</a>     (); }
<a name="l03666"></a>03666 
<a name="l03668"></a>03668   <a class="code" href="classmcs_1_1Data.html#6c5e91f9e47a892350f66c6fe5e7f968" title="Wrapper cast operator to dval().">operator const double                 </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#3e4b628e18f8d2f3b83083c27bf7ed48" title="Convert internal data to a double (8 bytes) floating point value.">dval</a>     (); }
<a name="l03669"></a>03669 
<a name="l03671"></a>03671   <a class="code" href="classmcs_1_1Data.html#0eb26fea40a344bc7970f56c232f0502" title="Wrapper cast operator to pval().">operator const char*                  </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*) <a class="code" href="classmcs_1_1Data.html#899a0f83b1dd6689eb40ff454e6d4798">pval</a>(); }
<a name="l03672"></a>03672 
<a name="l03674"></a>03674   <a class="code" href="classmcs_1_1Data.html#8e182b91068591daf2f01936f2bd7f68" title="Wrapper cast operator to sval().">operator const string                 </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#16156d4d24fc7fa5b248a34b5635d10f" title="Convert internal data to a string object.">sval</a>     (); }
<a name="l03675"></a>03675 
<a name="l03677"></a>03677   <a class="code" href="classmcs_1_1Data.html#763438bcc91956fb3171f329d0e8de86" title="Wrapper cast operator to tval(struct tm).">operator const struct tm              </a>()<span class="keyword"> const </span>{ <span class="keyword">struct </span>tm v; <a class="code" href="classmcs_1_1Data.html#22ce7f595d158f256992fe918775995e" title="Convert internal data to a time_t value.">tval</a>(&amp;v); <span class="keywordflow">return</span> v; }
<a name="l03678"></a>03678 
<a name="l03680"></a>03680   <a class="code" href="classmcs_1_1Data.html#939743cea74b307d07eec3bf78e7bbc4" title="Wrapper cast operator to tval().">operator const time_t                 </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Data.html#22ce7f595d158f256992fe918775995e" title="Convert internal data to a time_t value.">tval</a>     (); }
<a name="l03681"></a>03681 
<a name="l03682"></a><a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670">03682</a> 
<a name="l03694"></a><a class="code" href="classmcs_1_1Data.html#350b48c086149c1d8f7bdb63e4f09f84">03694</a>   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Data.html#d4ce8769526c509b2063cf15fc98e670" title="Wrapper assignment operator to setival(int).">operator=</a>(<a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; d);
<a name="l03695"></a>03695 
<a name="l03697"></a>03697   <span class="comment">//static void default_struct_tm(struct tm* t);</span>
<a name="l03698"></a><a class="code" href="classmcs_1_1Data.html#8e40e26f8040faac6ff90e73220724ef">03698</a> 
<a name="l03714"></a><a class="code" href="classmcs_1_1Data.html#915083eda793aef726efdc9ef274bd5d">03714</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#5e26063ddf65c6bee62caa06ecc199bb" title="Fills the &amp;quot;struct tm*&amp;quot; passed as argument with the current local datetime...">parseTime</a>(<span class="keywordtype">string</span> s, <span class="keyword">struct</span> tm* ts);
<a name="l03715"></a>03715 
<a name="l03730"></a><a class="code" href="classmcs_1_1Data.html#5c73747f3c1ad9163deb7c53602f935f">03730</a>   <span class="keyword">static</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#0ae350b5769d5ab2ea15b0efb699ef79" title="Return the minimum integer value for the base type specified.">MinValue</a>(<a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#26bfcea1928dd921f3f97dc131acbf88" title="Object base type.">ltype</a>, <span class="keywordtype">bool</span> flunsigned);
<a name="l03731"></a>03731 
<a name="l03744"></a>03744   <span class="keyword">static</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#cbdb5e7425d63c7e3fe2e99692fce319" title="Return the maximum integer value for the base type specified.">MaxValue</a>(<a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> <a class="code" href="classmcs_1_1Data.html#26bfcea1928dd921f3f97dc131acbf88" title="Object base type.">ltype</a>, <span class="keywordtype">bool</span> flunsigned);
<a name="l03745"></a><a class="code" href="classmcs_1_1Data.html#939743cea74b307d07eec3bf78e7bbc4">03745</a> 
<a name="l03747"></a>03747   <span class="keywordtype">string</span> <a class="code" href="classmcs_1_1Data.html#8837de9fa74419ddfc1a482c3f341d7e" title="Returns a string representation of the object, for debug purpose.">print</a>();
<a name="l03748"></a>03748 
<a name="l03750"></a>03750   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#962572734033c68bbddf25ffef118b59" title="Set a new value to internal tag.">setTag</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#e3b2f3296d7e6a6d77bfd1409735876f" title="Tag for user convenience.">tag</a>);
<a name="l03751"></a>03751 
<a name="l03753"></a>03753   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classmcs_1_1Data.html#769c93a12c8e5a482e417a8f6aaf3f1a" title="Retrieve the value of the tag.">getTag</a>();
<a name="l03754"></a>03754 
<a name="l03755"></a>03755   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#9a51f170a24186f93d11dee833fb201e">getSourceID</a>();
<a name="l03756"></a>03756   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Data.html#2025a4887effe62ce22adb39c2d3ff3e">getDestID</a>();
<a name="l03757"></a>03757   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#ed82de20bbb815562c9f0fc6562dac95">setSourceID</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l03758"></a>03758   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Data.html#8e47c5563a06aa7b1afd55afabb7dd1f">setDestID</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l03759"></a>03759 };
<a name="l03760"></a>03760 
<a name="l03761"></a>03761 
<a name="l03762"></a>03762 
<a name="l03764"></a>03764 <span class="preprocessor">#define DYNAMIC_ARRAY_DEFAULT_STEP 10</span>
<a name="l03765"></a>03765 <span class="preprocessor"></span>
<a name="l03766"></a>03766 
<a name="l03767"></a>03767 
<a name="l03776"></a>03776 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l03777"></a>03777 <span class="keyword">class </span><a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1Synchro.html" title="A simple class to implement &amp;quot;critical sections&amp;quot;.">Synchro</a> {
<a name="l03778"></a>03778 <span class="keyword">private</span>:
<a name="l03780"></a>03780   BASE** <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>;
<a name="l03781"></a>03781 
<a name="l03783"></a>03783   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#e3211f4fa4863d3d850a521e73bcb21c" title="How many blocks are allocated.">step_alloc</a>;
<a name="l03784"></a>03784 
<a name="l03786"></a>03786   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>;
<a name="l03787"></a>03787 
<a name="l03795"></a>03795   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9e124f61f74c6003f0906d0171d9bc23" title="Alloc necessary memory to store data in the array.">check_allocation</a>(<span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#b9017fb1a01a6814ee0839845a4c3c8c" title="Returns number of elements in the array.">count</a>);
<a name="l03796"></a>03796 
<a name="l03797"></a>03797 <span class="keyword">protected</span>:
<a name="l03798"></a>03798   <a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array&lt;BASE&gt;</a>&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#fe904ebdc791124f99f0894c24b51477">array</a>;
<a name="l03799"></a>03799 
<a name="l03800"></a>03800 <span class="keyword">public</span>:
<a name="l03806"></a>03806   <a class="code" href="classmcs_1_1Dynamic__Array.html#fe6a319848623c0476783d32b4618d0b" title="Constructor with optional synchronization.">Dynamic_Array</a>(<span class="keywordtype">bool</span> synchro);
<a name="l03807"></a>03807 
<a name="l03814"></a>03814   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array</a>);
<a name="l03815"></a>03815 
<a name="l03816"></a>03816 
<a name="l03818"></a>03818   <a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array</a>&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#51fd83dc587c7ba28790ad7cd7bbfe19" title="Assignment operator.">operator=</a>(<a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array</a>&amp; from);
<a name="l03819"></a>03819 
<a name="l03820"></a>03820 
<a name="l03822"></a>03822   <a class="code" href="classmcs_1_1Dynamic__Array.html#9d021c698dc42360c7bc72a7733dd84b" title="Destructor, this also destroy all objects in the array.">~Dynamic_Array</a>();
<a name="l03823"></a>03823 
<a name="l03829"></a>03829   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#b9017fb1a01a6814ee0839845a4c3c8c" title="Returns number of elements in the array.">count</a>();
<a name="l03830"></a><a class="code" href="mcs_8hh.html#67ca1b84c60436f2bff66b780a71fc68">03830</a> 
<a name="l03841"></a>03841   <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#cdc2f61b5469419c3f682ea7b3f855e8" title="Tells if there are objects in the array.">ready</a>();
<a name="l03842"></a>03842 
<a name="l03872"></a>03872   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9c2e96e9be75f7f8ec75803e9e015dad" title="Push an existing element at the end of the array.">push</a>(BASE* d);
<a name="l03873"></a>03873 
<a name="l03883"></a>03883   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9c2e96e9be75f7f8ec75803e9e015dad" title="Push an existing element at the end of the array.">push</a>(BASE&amp; d);
<a name="l03884"></a>03884 
<a name="l03897"></a>03897   BASE <a class="code" href="classmcs_1_1Dynamic__Array.html#38aa6baa882b6073831404d39f2a0664" title="Extracts an element from the array.">pop</a>(<span class="keywordtype">int</span> pos = 0);
<a name="l03898"></a>03898 
<a name="l03928"></a>03928   BASE&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#1e6c5d0bdd9831e58c3ae87e86d7c96c" title="The operator[] for the array.">operator[]</a>(<span class="keywordtype">int</span> pos);
<a name="l03929"></a>03929 
<a name="l03943"></a>03943   BASE <a class="code" href="classmcs_1_1Dynamic__Array.html#54e5f5d333015306d2e87286f9819abf" title="Retrieve an element from the array but don&amp;#39;t extract it.">peek</a>(<span class="keywordtype">int</span> pos);
<a name="l03944"></a>03944 
<a name="l03950"></a>03950   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#bf9b2f5d6e0cc76c7feae459a48657a8" title="Empty the array.">clear</a>();
<a name="l03951"></a>03951 };
<a name="l03952"></a>03952 
<a name="l03953"></a>03953 
<a name="l03954"></a>03954 <span class="comment">//Methods implementation of template classes must be in the header file</span>
<a name="l03955"></a>03955 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l03956"></a>03956 <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9e124f61f74c6003f0906d0171d9bc23" title="Alloc necessary memory to store data in the array.">mcs::Dynamic_Array&lt;BASE&gt;::check_allocation</a>(<span class="keywordtype">int</span> count) {
<a name="l03957"></a>03957   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;
<a name="l03958"></a>03958   <span class="keyword">static</span> <span class="keywordtype">int</span> max_size = Data::MaxValue(<a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6de26c49c40ef546bd776d734a8deecf0">SMALL</a>, <span class="keyword">true</span>);
<a name="l03959"></a>03959 
<a name="l03960"></a>03960   <span class="keywordflow">if</span> (count &gt;= max_size)
<a name="l03961"></a>03961     <span class="keywordflow">throw</span> <a class="code" href="mcs_8hh.html#641a1a9e13c7a3ed2861f2572af8a3f4" title="Facility to easily pass all necessary parameter to an Event constructor.">MCS_ERROR</a>(MSG_INDEX_OUT_RANGE, count, max_size);
<a name="l03962"></a>03962 
<a name="l03963"></a>03963   <span class="keywordflow">if</span> (count &gt; (step_alloc * <a class="code" href="mcs_8hh.html#67ca1b84c60436f2bff66b780a71fc68" title="Size of allocation block for the Dynamic_Array class.">DYNAMIC_ARRAY_DEFAULT_STEP</a>)) {
<a name="l03964"></a>03964     step_alloc++;
<a name="l03965"></a>03965     size = <span class="keyword">sizeof</span>(BASE*) * step_alloc * DYNAMIC_ARRAY_DEFAULT_STEP;
<a name="l03966"></a>03966 
<a name="l03967"></a>03967     <span class="keywordflow">if</span> (step_alloc == 1) <span class="comment">//First allocation</span>
<a name="l03968"></a>03968       arr = (BASE**) malloc(size);
<a name="l03969"></a>03969     <span class="keywordflow">else</span>
<a name="l03970"></a>03970       arr = (BASE**) realloc(arr, size);
<a name="l03971"></a>03971   }
<a name="l03972"></a>03972 }
<a name="l03973"></a>03973 
<a name="l03974"></a>03974 
<a name="l03975"></a>03975 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l03976"></a>03976 <a class="code" href="classmcs_1_1Dynamic__Array.html#fe6a319848623c0476783d32b4618d0b" title="Constructor with optional synchronization.">mcs::Dynamic_Array&lt;BASE&gt;::Dynamic_Array</a>(<span class="keywordtype">bool</span> synchro) :
<a name="l03977"></a>03977   Synchro(), array(*this)
<a name="l03978"></a>03978 {
<a name="l03979"></a>03979   synchronize(synchro);
<a name="l03980"></a>03980   lcount = 0;
<a name="l03981"></a>03981   step_alloc = 0;
<a name="l03982"></a>03982   arr = NULL;
<a name="l03983"></a>03983 }
<a name="l03984"></a>03984 
<a name="l03985"></a>03985 
<a name="l03986"></a>03986 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l03987"></a>03987 <a class="code" href="classmcs_1_1Dynamic__Array.html#9d021c698dc42360c7bc72a7733dd84b" title="Destructor, this also destroy all objects in the array.">mcs::Dynamic_Array&lt;BASE&gt;::~Dynamic_Array</a>() {
<a name="l03988"></a>03988   clear();
<a name="l03989"></a>03989 }
<a name="l03990"></a>03990 
<a name="l03991"></a>03991 
<a name="l03992"></a>03992 
<a name="l03993"></a>03993 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l03994"></a>03994 <a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">mcs::Dynamic_Array&lt;BASE&gt;</a>&amp;
<a name="l03995"></a>03995 <a class="code" href="classmcs_1_1Dynamic__Array.html#51fd83dc587c7ba28790ad7cd7bbfe19" title="Assignment operator.">mcs::Dynamic_Array&lt;BASE&gt;::operator=</a>(Dynamic_Array&lt;BASE&gt;&amp; from) {
<a name="l03996"></a>03996   <span class="keywordtype">int</span> i;
<a name="l03997"></a>03997 
<a name="l03998"></a>03998   clear();
<a name="l03999"></a>03999   <span class="keywordflow">for</span> (i=0; i&lt;from.count(); i++)
<a name="l04000"></a>04000     push(from[i]);
<a name="l04001"></a>04001 
<a name="l04002"></a>04002   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l04003"></a>04003 }
<a name="l04004"></a>04004 
<a name="l04005"></a>04005 
<a name="l04006"></a>04006 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04007"></a>04007 <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9c2e96e9be75f7f8ec75803e9e015dad" title="Push an existing element at the end of the array.">mcs::Dynamic_Array&lt;BASE&gt;::push</a>(BASE* d) {
<a name="l04008"></a>04008   <a class="code" href="mcs_8hh.html#97bf34808da5d8ab6060fe3b06ba0f75" title="Start a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot;...">MCS_CRITICAL_SECTION_BEGIN</a>;
<a name="l04009"></a>04009 
<a name="l04010"></a>04010   check_allocation(lcount + 1);
<a name="l04011"></a>04011   arr[lcount++] = d;
<a name="l04012"></a>04012 
<a name="l04013"></a>04013   <a class="code" href="mcs_8hh.html#ede8d3c9ac601cf5de5aa59c9da174af" title="End a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot; instruction...">MCS_CRITICAL_SECTION_END</a>;
<a name="l04014"></a>04014 }
<a name="l04015"></a>04015 
<a name="l04016"></a>04016 
<a name="l04017"></a>04017 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04018"></a>04018 <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#9c2e96e9be75f7f8ec75803e9e015dad" title="Push an existing element at the end of the array.">mcs::Dynamic_Array&lt;BASE&gt;::push</a>(BASE&amp; d) {
<a name="l04019"></a>04019   <a class="code" href="mcs_8hh.html#97bf34808da5d8ab6060fe3b06ba0f75" title="Start a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot;...">MCS_CRITICAL_SECTION_BEGIN</a>;
<a name="l04020"></a>04020 
<a name="l04021"></a>04021   check_allocation(lcount + 1);
<a name="l04022"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#9e124f61f74c6003f0906d0171d9bc23">04022</a>   arr[lcount++] = <span class="keyword">new</span> BASE(d);
<a name="l04023"></a>04023 
<a name="l04024"></a>04024   <a class="code" href="mcs_8hh.html#ede8d3c9ac601cf5de5aa59c9da174af" title="End a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot; instruction...">MCS_CRITICAL_SECTION_END</a>;
<a name="l04025"></a>04025 }
<a name="l04026"></a>04026 
<a name="l04027"></a>04027 
<a name="l04028"></a>04028 
<a name="l04029"></a>04029 <span class="comment">//#define EVENT_IS_THROWN(INSTR...)</span>
<a name="l04030"></a>04030 <span class="comment">//try { INSTR;}  catch(Event e) { leave(); throw; }</span>
<a name="l04031"></a>04031 <span class="comment">//{ bool _EVENT_IS_THROWN</span>
<a name="l04032"></a>04032 
<a name="l04033"></a>04033 
<a name="l04034"></a>04034 
<a name="l04035"></a>04035 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04036"></a>04036 BASE <a class="code" href="classmcs_1_1Dynamic__Array.html#38aa6baa882b6073831404d39f2a0664" title="Extracts an element from the array.">mcs::Dynamic_Array&lt;BASE&gt;::pop</a>(<span class="keywordtype">int</span> pos) {
<a name="l04037"></a>04037   <span class="keywordtype">int</span> i;
<a name="l04038"></a>04038 
<a name="l04039"></a>04039   <a class="code" href="mcs_8hh.html#97bf34808da5d8ab6060fe3b06ba0f75" title="Start a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot;...">MCS_CRITICAL_SECTION_BEGIN</a>;
<a name="l04040"></a>04040 
<a name="l04041"></a>04041   BASE d = BASE(<span class="keyword">operator</span>[](pos));
<a name="l04042"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#fe6a319848623c0476783d32b4618d0b">04042</a> 
<a name="l04043"></a>04043   <span class="keywordflow">if</span> (pos &lt; <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>) {
<a name="l04044"></a>04044     <span class="keyword">delete</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>[pos];
<a name="l04045"></a>04045 
<a name="l04046"></a>04046     <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>--;
<a name="l04047"></a>04047     <span class="keywordflow">for</span> (i=pos; i&lt;<a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>; i++)
<a name="l04048"></a>04048       <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>[i] = <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>[i+1];
<a name="l04049"></a>04049   }
<a name="l04050"></a>04050 
<a name="l04051"></a>04051   <a class="code" href="mcs_8hh.html#858a25880918abe429cbb94d31b46764">MCS_CRITICAL_SECTION_END_RETURN</a>(d);
<a name="l04052"></a>04052 }
<a name="l04053"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#9d021c698dc42360c7bc72a7733dd84b">04053</a> 
<a name="l04054"></a>04054 
<a name="l04055"></a>04055 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04056"></a>04056 BASE&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#1e6c5d0bdd9831e58c3ae87e86d7c96c" title="The operator[] for the array.">mcs::Dynamic_Array&lt;BASE&gt;::operator[]</a>(<span class="keywordtype">int</span> pos) {
<a name="l04057"></a>04057   <span class="keywordflow">if</span> (pos &lt; 0)
<a name="l04058"></a>04058     pos += <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>;
<a name="l04059"></a>04059 
<a name="l04060"></a>04060   <span class="keywordflow">if</span> (pos &lt; 0)
<a name="l04061"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#51fd83dc587c7ba28790ad7cd7bbfe19">04061</a>     <span class="keywordflow">throw</span> <a class="code" href="mcs_8hh.html#641a1a9e13c7a3ed2861f2572af8a3f4" title="Facility to easily pass all necessary parameter to an Event constructor.">MCS_ERROR</a>(MSG_INVALID_POSITION, pos);
<a name="l04062"></a>04062 
<a name="l04063"></a>04063   <span class="keywordflow">if</span> (pos &gt;= <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>)
<a name="l04064"></a>04064     <span class="keywordflow">throw</span> <a class="code" href="mcs_8hh.html#641a1a9e13c7a3ed2861f2572af8a3f4" title="Facility to easily pass all necessary parameter to an Event constructor.">MCS_ERROR</a>(MSG_INDEX_OUT_RANGE, pos, <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>);
<a name="l04065"></a>04065 
<a name="l04066"></a>04066   <span class="keywordflow">return</span> *(<a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>[pos]);
<a name="l04067"></a>04067 }
<a name="l04068"></a>04068 
<a name="l04069"></a>04069 
<a name="l04070"></a>04070 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04071"></a>04071 BASE <a class="code" href="classmcs_1_1Dynamic__Array.html#54e5f5d333015306d2e87286f9819abf" title="Retrieve an element from the array but don&amp;#39;t extract it.">mcs::Dynamic_Array&lt;BASE&gt;::peek</a>(<span class="keywordtype">int</span> pos)
<a name="l04072"></a>04072 {
<a name="l04073"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#9c2e96e9be75f7f8ec75803e9e015dad">04073</a>   <a class="code" href="mcs_8hh.html#97bf34808da5d8ab6060fe3b06ba0f75" title="Start a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot;...">MCS_CRITICAL_SECTION_BEGIN</a>;
<a name="l04074"></a>04074 
<a name="l04075"></a>04075   BASE d = <a class="code" href="classmcs_1_1Dynamic__Array.html#1e6c5d0bdd9831e58c3ae87e86d7c96c" title="The operator[] for the array.">operator[]</a>(pos);
<a name="l04076"></a>04076 
<a name="l04077"></a>04077   <a class="code" href="mcs_8hh.html#858a25880918abe429cbb94d31b46764">MCS_CRITICAL_SECTION_END_RETURN</a>(d);
<a name="l04078"></a>04078 }
<a name="l04079"></a>04079 
<a name="l04080"></a>04080 
<a name="l04081"></a>04081 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04082"></a>04082 <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#b9017fb1a01a6814ee0839845a4c3c8c" title="Returns number of elements in the array.">mcs::Dynamic_Array&lt;BASE&gt;::count</a>() {
<a name="l04083"></a>04083   <span class="keywordflow">return</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>;
<a name="l04084"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#bdda6f10b78a9850d0942c864e55e3ec">04084</a> }
<a name="l04085"></a>04085 
<a name="l04086"></a>04086 
<a name="l04087"></a>04087 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04088"></a>04088 <span class="keywordtype">bool</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#cdc2f61b5469419c3f682ea7b3f855e8" title="Tells if there are objects in the array.">mcs::Dynamic_Array&lt;BASE&gt;::ready</a>() {
<a name="l04089"></a>04089   <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) (<a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a> &gt; 0);
<a name="l04090"></a>04090 }
<a name="l04091"></a>04091 
<a name="l04092"></a>04092 
<a name="l04093"></a>04093 <span class="keyword">template</span>&lt;<span class="keyword">class</span> BASE&gt;
<a name="l04094"></a>04094 <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#bf9b2f5d6e0cc76c7feae459a48657a8" title="Empty the array.">mcs::Dynamic_Array&lt;BASE&gt;::clear</a>() {
<a name="l04095"></a>04095   <span class="keywordtype">int</span> i;
<a name="l04096"></a>04096 
<a name="l04097"></a>04097   <a class="code" href="mcs_8hh.html#97bf34808da5d8ab6060fe3b06ba0f75" title="Start a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot;...">MCS_CRITICAL_SECTION_BEGIN</a>;
<a name="l04098"></a>04098 
<a name="l04099"></a>04099   <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classmcs_1_1Dynamic__Array.html#c64206e3ea337d1da44609a8b35c525f" title="How many elements are in the array.">lcount</a>; i++)
<a name="l04100"></a>04100     <span class="keyword">delete</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>[i];
<a name="l04101"></a>04101 
<a name="l04102"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#38aa6baa882b6073831404d39f2a0664">04102</a>   <span class="keywordflow">if</span> (<a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>) {
<a name="l04103"></a>04103     free(<a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a>);
<a name="l04104"></a>04104       <a class="code" href="classmcs_1_1Dynamic__Array.html#70a5336721480f91fc55f20e8a89355d" title="Array of pointer to template objects.">arr</a> = NULL;
<a name="l04105"></a>04105   }
<a name="l04106"></a>04106 
<a name="l04107"></a>04107   lcount = 0;
<a name="l04108"></a>04108   <a class="code" href="classmcs_1_1Dynamic__Array.html#e3211f4fa4863d3d850a521e73bcb21c" title="How many blocks are allocated.">step_alloc</a> = 0;
<a name="l04109"></a>04109 
<a name="l04110"></a>04110   <a class="code" href="mcs_8hh.html#ede8d3c9ac601cf5de5aa59c9da174af" title="End a critical section, there must be no &amp;quot;return&amp;quot; or &amp;quot;goto&amp;quot; instruction...">MCS_CRITICAL_SECTION_END</a>;
<a name="l04111"></a>04111 }
<a name="l04112"></a>04112 
<a name="l04113"></a>04113 
<a name="l04114"></a>04114 
<a name="l04115"></a>04115 
<a name="l04117"></a>04117 <span class="comment">//#define MCS_VECTOR_MOVE_TO_END -1</span>
<a name="l04118"></a>04118 
<a name="l04134"></a>04134 <span class="keyword">class </span>Record : <span class="keyword">public</span> Serializable, <span class="keyword">public</span> <a class="code" href="classmcs_1_1Synchro.html#c0cc917a0b99ca5ee6782645fb02ad43" title="Constructor.">Synchro</a>
<a name="l04135"></a>04135 {
<a name="l04136"></a>04136 <span class="keyword">private</span>:
<a name="l04137"></a><a class="code" href="classmcs_1_1Dynamic__Array.html#54e5f5d333015306d2e87286f9819abf">04137</a>   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l04138"></a>04138 
<a name="l04140"></a>04140   <a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array&lt;Data&gt;</a> <a class="code" href="classmcs_1_1Dynamic__Array.html#fe904ebdc791124f99f0894c24b51477">array</a>;
<a name="l04141"></a>04141 
<a name="l04143"></a>04143   <a class="code" href="classmcs_1_1Dynamic__Array.html" title="A thread safe, template class to handle an array of objects.">Dynamic_Array&lt;int&gt;</a> lmap;
<a name="l04144"></a>04144 
<a name="l04146"></a>04146   <span class="keywordtype">string</span> smap;
<a name="l04147"></a>04147 
<a name="l04166"></a>04166   <span class="keywordtype">bool</span> serialize_buffer(<span class="keywordtype">char</span>*&amp; from, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; size);
<a name="l04167"></a>04167 
<a name="l04168"></a>04168 
<a name="l04169"></a>04169 
<a name="l04170"></a>04170 <span class="keyword">public</span>:
<a name="l04172"></a>04172   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; from);
<a name="l04173"></a>04173 
<a name="l04175"></a>04175   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#51fd83dc587c7ba28790ad7cd7bbfe19" title="Assignment operator.">operator=</a>(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; from);
<a name="l04176"></a>04176 
<a name="l04183"></a>04183   <span class="keywordtype">void</span> emptyName();
<a name="l04184"></a>04184 
<a name="l04188"></a>04188   <span class="keywordtype">void</span> setNull();
<a name="l04189"></a>04189 
<a name="l04190"></a>04190 
<a name="l04192"></a>04192   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>(<span class="keywordtype">bool</span> synchro = <span class="keyword">false</span>);
<a name="l04193"></a>04193 
<a name="l04194"></a>04194 
<a name="l04203"></a><a class="code" href="classmcs_1_1Record.html#1c7f3764190a63819888b09c6a9be5ac">04203</a>   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>(<span class="keywordtype">void</span>* lbuf, <span class="keywordtype">bool</span> synchro = <span class="keyword">false</span>);
<a name="l04204"></a>04204 
<a name="l04205"></a>04205 
<a name="l04213"></a>04213   ~<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>();
<a name="l04214"></a>04214 
<a name="l04216"></a>04216   <span class="keywordtype">int</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#b9017fb1a01a6814ee0839845a4c3c8c" title="Returns number of elements in the array.">count</a>();
<a name="l04217"></a>04217 
<a name="l04219"></a>04219   <span class="keywordtype">void</span> addField(<a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>* d);
<a name="l04220"></a>04220 
<a name="l04222"></a>04222   <span class="keywordtype">void</span> addField(<a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; d);
<a name="l04223"></a>04223 
<a name="l04232"></a>04232   <span class="keywordtype">void</span> addField(<span class="keywordtype">string</span> s, <span class="keywordtype">char</span> tag = 0);
<a name="l04233"></a>04233 
<a name="l04242"></a>04242   <span class="keywordtype">void</span> addField(<span class="keywordtype">int</span> i, <span class="keywordtype">char</span> tag = 0);
<a name="l04243"></a>04243 
<a name="l04252"></a>04252   <span class="keywordtype">void</span> addField(<span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> i, <span class="keywordtype">char</span> tag = 0);
<a name="l04253"></a>04253 
<a name="l04262"></a>04262   <span class="keywordtype">void</span> addField(<span class="keywordtype">double</span> f, <span class="keywordtype">char</span> tag = 0);
<a name="l04263"></a>04263 
<a name="l04264"></a>04264   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> <a class="code" href="classmcs_1_1Dynamic__Array.html#38aa6baa882b6073831404d39f2a0664" title="Extracts an element from the array.">pop</a>(<span class="keywordtype">int</span> x = 0);
<a name="l04265"></a>04265 
<a name="l04282"></a>04282   <span class="keywordtype">int</span> posWhoseNameIs(<span class="keywordtype">string</span> name , <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a08c075e3ac447d7a002527a20ed4a3ca">THROW</a>);
<a name="l04283"></a>04283 
<a name="l04284"></a>04284 
<a name="l04327"></a>04327   <span class="keywordtype">void</span> setFieldMap(<span class="keywordtype">string</span> s = <span class="stringliteral">""</span>);
<a name="l04328"></a>04328 
<a name="l04330"></a>04330   <span class="keywordtype">void</span> setFieldMap(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; rec);
<a name="l04331"></a>04331 
<a name="l04332"></a>04332   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#bf9b2f5d6e0cc76c7feae459a48657a8" title="Empty the array.">clear</a>();
<a name="l04333"></a>04333 
<a name="l04334"></a>04334 
<a name="l04348"></a>04348   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#1e6c5d0bdd9831e58c3ae87e86d7c96c" title="The operator[] for the array.">operator[]</a>(<span class="keywordtype">string</span> name);
<a name="l04349"></a>04349 
<a name="l04350"></a>04350   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; <a class="code" href="classmcs_1_1Dynamic__Array.html#1e6c5d0bdd9831e58c3ae87e86d7c96c" title="The operator[] for the array.">operator[]</a>(<span class="keywordtype">int</span> pos);
<a name="l04351"></a>04351 
<a name="l04353"></a>04353   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> field(<span class="keywordtype">string</span> name);
<a name="l04354"></a>04354 
<a name="l04355"></a>04355   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> field(<span class="keywordtype">int</span> pos);
<a name="l04356"></a>04356 
<a name="l04357"></a>04357 
<a name="l04359"></a>04359   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> objSize();
<a name="l04360"></a>04360 
<a name="l04362"></a>04362   <span class="keywordtype">string</span> asString(<span class="keywordtype">string</span> sep = <span class="stringliteral">"\t"</span>);
<a name="l04363"></a>04363   <span class="keywordtype">string</span> asStringNames(<span class="keywordtype">string</span> sep = <span class="stringliteral">"\t"</span>);
<a name="l04364"></a>04364   <span class="keywordtype">string</span> asStringTypes(<span class="keywordtype">string</span> sep = <span class="stringliteral">"\t"</span>);
<a name="l04365"></a>04365 
<a name="l04366"></a>04366 
<a name="l04368"></a>04368   <span class="comment">//  \brief Move element in the Record from one position to another.</span>
<a name="l04369"></a>04369   <span class="comment">//</span>
<a name="l04370"></a>04370   <span class="comment">//  Both indexes must be allowed ones, and "from" must be less than</span>
<a name="l04371"></a>04371   <span class="comment">//  "to". All elements after "from" will be shifted one position</span>
<a name="l04372"></a>04372   <span class="comment">//  towards the exit of the queue. This is a thread safe method.</span>
<a name="l04373"></a>04373   <span class="comment">//</span>
<a name="l04374"></a>04374   <span class="comment">//  \param from Source position;</span>
<a name="l04375"></a>04375   <span class="comment">//  \param to Destination position.</span>
<a name="l04376"></a>04376   <span class="comment">//</span>
<a name="l04377"></a>04377   <span class="comment">//  \exception ERROR MSG_INDEX_OUT_RANGE.</span>
<a name="l04378"></a>04378   <span class="comment">// */</span>
<a name="l04379"></a>04379   <span class="comment">//void move(int from, int to);</span>
<a name="l04380"></a>04380 };
<a name="l04381"></a>04381 
<a name="l04382"></a>04382 
<a name="l04383"></a>04383 
<a name="l04384"></a>04384 
<a name="l04385"></a>04385 
<a name="l04386"></a>04386 
<a name="l04387"></a>04387 
<a name="l04388"></a>04388 
<a name="l04389"></a>04389 
<a name="l04390"></a>04390 
<a name="l04391"></a>04391 
<a name="l04401"></a>04401 <span class="preprocessor">#define MCS_RS_ACCUM        1</span>
<a name="l04402"></a>04402 <span class="preprocessor"></span>
<a name="l04403"></a>04403 
<a name="l04413"></a>04413 <span class="preprocessor">#define MCS_RS_USEMETAREC   2</span>
<a name="l04414"></a>04414 <span class="preprocessor"></span>
<a name="l04421"></a>04421 <span class="preprocessor">#define MCS_RS_KNOW_NROWS   4</span>
<a name="l04422"></a>04422 <span class="preprocessor"></span>
<a name="l04430"></a>04430 <span class="preprocessor">#define MCS_RS_RANDOM       8</span>
<a name="l04431"></a>04431 <span class="preprocessor"></span>
<a name="l04432"></a>04432 
<a name="l04444"></a>04444 <span class="preprocessor">#define MCS_RS_INSERT      16</span>
<a name="l04445"></a>04445 <span class="preprocessor"></span>
<a name="l04446"></a>04446 
<a name="l04447"></a>04447 
<a name="l04448"></a>04448 
<a name="l04474"></a>04474 <span class="keyword">class </span><a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a> {
<a name="l04475"></a>04475 <span class="keyword">private</span>:
<a name="l04477"></a>04477   <span class="keywordtype">short</span> <span class="keywordtype">int</span> lid;
<a name="l04478"></a>04478 
<a name="l04480"></a>04480   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code;
<a name="l04481"></a>04481 
<a name="l04483"></a>04483   <span class="keywordtype">bool</span> lknow_nrows;
<a name="l04484"></a>04484 
<a name="l04486"></a>04486   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lnrows;
<a name="l04487"></a><a class="code" href="mcs_8hh.html#a83f7221925f088f8fc0ce8267ef21e8">04487</a> 
<a name="l04489"></a>04489   <span class="keywordtype">bool</span> laccum;
<a name="l04490"></a>04490 
<a name="l04492"></a>04492   <span class="keywordtype">bool</span> lrandom;
<a name="l04493"></a>04493 
<a name="l04495"></a>04495   <span class="keywordtype">bool</span> lusemetarec;
<a name="l04496"></a><a class="code" href="mcs_8hh.html#c9028cf078aadd3a410ed726a1f1d712">04496</a> 
<a name="l04498"></a>04498   <span class="keywordtype">bool</span> lfetch;
<a name="l04499"></a>04499 
<a name="l04501"></a>04501   <span class="keywordtype">bool</span> linsert;
<a name="l04502"></a>04502 
<a name="l04504"></a>04504   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lpos;
<a name="l04505"></a>04505 
<a name="l04507"></a>04507   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> current;
<a name="l04508"></a>04508 
<a name="l04510"></a><a class="code" href="mcs_8hh.html#9dc9d93a21c04d1a78871f4013dd2e98">04510</a>   Record lmetarec;
<a name="l04511"></a>04511 
<a name="l04513"></a>04513   <span class="keywordtype">bool</span> leof;
<a name="l04514"></a>04514 
<a name="l04516"></a>04516   Dynamic_Array&lt;Record&gt; rs;
<a name="l04517"></a>04517 
<a name="l04530"></a>04530   <span class="keyword">virtual</span> Record* newRecord();
<a name="l04531"></a>04531 
<a name="l04532"></a>04532   <span class="comment">//Clear the entire Record set and the lmetarec object.</span>
<a name="l04533"></a>04533   <span class="keywordtype">void</span> <a class="code" href="classmcs_1_1Dynamic__Array.html#bf9b2f5d6e0cc76c7feae459a48657a8" title="Empty the array.">clear</a>();
<a name="l04534"></a>04534 
<a name="l04543"></a><a class="code" href="classmcs_1_1RecordSet.html#fe82bdb5bf6231dea61bf1b40b028429">04543</a>   <span class="keywordtype">bool</span> internal_fetch(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newpos);
<a name="l04544"></a>04544 
<a name="l04545"></a>04545 
<a name="l04546"></a><a class="code" href="classmcs_1_1RecordSet.html#a695da8b6a557c71718ec4e13b9d8299">04546</a> <span class="keyword">protected</span>:
<a name="l04571"></a>04571   <span class="keywordtype">void</span> init(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nrows = 0, <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* meta = NULL,
<a name="l04572"></a>04572         <span class="keywordtype">short</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0);
<a name="l04573"></a><a class="code" href="classmcs_1_1RecordSet.html#058c0d031458519ec93bdb8082fa4327">04573</a> 
<a name="l04575"></a>04575   <span class="keywordtype">void</span> startFetch();
<a name="l04576"></a><a class="code" href="classmcs_1_1RecordSet.html#dc1debb3304012a200b582c2a4d5a946">04576</a> 
<a name="l04602"></a>04602   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> fetch(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newpos, <span class="keywordtype">bool</span> random);
<a name="l04603"></a>04603 
<a name="l04605"></a>04605   <span class="keyword">virtual</span> <span class="keywordtype">void</span> hk_dump(<span class="keywordtype">string</span> fn);
<a name="l04606"></a>04606 
<a name="l04607"></a>04607 
<a name="l04608"></a>04608 <span class="keyword">public</span>:
<a name="l04615"></a>04615   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>);
<a name="l04616"></a>04616 
<a name="l04623"></a>04623   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>);
<a name="l04624"></a>04624 
<a name="l04631"></a>04631   <a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>();
<a name="l04632"></a>04632 
<a name="l04634"></a>04634   <span class="keyword">virtual</span> ~<a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>();
<a name="l04635"></a>04635 
<a name="l04636"></a>04636 
<a name="l04637"></a>04637 
<a name="l04647"></a>04647   <span class="keywordtype">void</span> setFieldMap(<span class="keywordtype">string</span> s = <span class="stringliteral">""</span>);
<a name="l04648"></a>04648 
<a name="l04649"></a>04649 
<a name="l04660"></a>04660   <span class="keywordtype">void</span> insert(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* rec);
<a name="l04661"></a>04661 
<a name="l04672"></a>04672   <span class="keywordtype">void</span> insert(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; rec);
<a name="l04673"></a>04673 
<a name="l04674"></a>04674 
<a name="l04683"></a>04683   <span class="keywordtype">bool</span> setFirst();
<a name="l04684"></a>04684 
<a name="l04694"></a>04694   <span class="keywordtype">bool</span> setLast();
<a name="l04695"></a>04695 
<a name="l04704"></a>04704   <span class="keywordtype">bool</span> setNext();
<a name="l04705"></a>04705 
<a name="l04714"></a>04714   <span class="keywordtype">bool</span> setPrev();
<a name="l04715"></a>04715 
<a name="l04733"></a>04733   <span class="keywordtype">bool</span> setWhere(<span class="keywordtype">int</span> i, <span class="keywordtype">string</span> equalTo);
<a name="l04734"></a>04734 
<a name="l04752"></a>04752   <span class="keywordtype">bool</span> setWhere(<span class="keywordtype">int</span> field, <span class="keywordtype">int</span> equalTo);
<a name="l04753"></a>04753 
<a name="l04770"></a>04770   <span class="keywordtype">bool</span> setPos(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i);
<a name="l04771"></a>04771 
<a name="l04772"></a>04772   <span class="keywordtype">void</span> dump(<span class="keywordtype">string</span> fn);
<a name="l04773"></a>04773 
<a name="l04774"></a>04774   <span class="keywordtype">bool</span> know_nRows();
<a name="l04775"></a>04775   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nRows();
<a name="l04776"></a>04776 
<a name="l04778"></a>04778   <span class="keywordtype">int</span> nFields();
<a name="l04779"></a>04779 
<a name="l04780"></a>04780   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos();
<a name="l04781"></a>04781   <span class="keywordtype">bool</span> eof();
<a name="l04782"></a>04782   <span class="keywordtype">bool</span> alwaysSameStructure();
<a name="l04783"></a>04783 
<a name="l04784"></a>04784   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; rec();
<a name="l04785"></a>04785   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; metarec();
<a name="l04786"></a>04786 
<a name="l04787"></a>04787   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* prepRecToSend();
<a name="l04788"></a>04788 };
<a name="l04789"></a>04789 
<a name="l04790"></a>04790 
<a name="l04791"></a>04791 
<a name="l04792"></a>04792 
<a name="l04793"></a>04793 
<a name="l04794"></a>04794 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l04807"></a>04807 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>
<a name="l04808"></a>04808 {
<a name="l04809"></a>04809 <span class="keyword">private</span>:
<a name="l04811"></a>04811   <span class="keywordtype">string</span> filename;
<a name="l04812"></a>04812 
<a name="l04814"></a>04814   vector&lt;string&gt; sections;
<a name="l04815"></a>04815 
<a name="l04817"></a>04817   vector&lt;string&gt; keys;
<a name="l04818"></a>04818 
<a name="l04820"></a>04820   vector&lt;string&gt; values;
<a name="l04821"></a>04821 
<a name="l04823"></a>04823   vector&lt;string&gt; comments;
<a name="l04824"></a>04824 
<a name="l04833"></a>04833   <span class="keywordtype">int</span> index(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key);
<a name="l04834"></a>04834 
<a name="l04835"></a>04835   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> lastval;
<a name="l04836"></a>04836 
<a name="l04837"></a>04837 <span class="keyword">public</span>:
<a name="l04844"></a>04844   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>);
<a name="l04845"></a>04845 
<a name="l04852"></a>04852   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>);
<a name="l04853"></a>04853 
<a name="l04859"></a>04859   <a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>(<span class="keywordtype">string</span> filename = <span class="stringliteral">""</span>);
<a name="l04860"></a>04860 
<a name="l04862"></a>04862   ~<a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>();
<a name="l04863"></a>04863 
<a name="l04864"></a>04864   <span class="keywordtype">void</span> open(<span class="keywordtype">string</span> filename);
<a name="l04865"></a>04865 
<a name="l04878"></a>04878   <span class="keywordtype">bool</span> search(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keyword">enum</span> <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1a" title="Values to be used with throwexc parameters.">ThrowExceptions</a> throwexc = <a class="code" href="namespacemcs.html#a40a5f36f6b4069dbad9ac9799a08e1aebdcbb149039624e4bfac1e0eef99327">DONT_THROW</a>);
<a name="l04879"></a>04879 
<a name="l04881"></a>04881 
<a name="l04896"></a>04896   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; val(<span class="keywordtype">string</span> section = <span class="stringliteral">""</span>, <span class="keywordtype">string</span> key = <span class="stringliteral">""</span>);
<a name="l04897"></a>04897 
<a name="l04911"></a>04911   <span class="keywordtype">string</span> sval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key);
<a name="l04912"></a>04912 
<a name="l04927"></a>04927   <span class="keywordtype">string</span> sval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">string</span> defval);
<a name="l04928"></a>04928 
<a name="l04929"></a>04929 
<a name="l04930"></a>04930 
<a name="l04944"></a>04944   <span class="keywordtype">int</span> ival(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key);
<a name="l04945"></a>04945 
<a name="l04960"></a>04960   <span class="keywordtype">int</span> ival(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">int</span> defval);
<a name="l04961"></a>04961 
<a name="l04962"></a>04962 
<a name="l04976"></a>04976   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> lval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key);
<a name="l04977"></a>04977 
<a name="l04992"></a>04992   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> lval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">int</span> defval);
<a name="l04993"></a>04993 
<a name="l04994"></a>04994 
<a name="l05009"></a>05009   <span class="keywordtype">void</span> setval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">string</span> val, <span class="keywordtype">string</span> comment = <span class="stringliteral">""</span>);
<a name="l05010"></a>05010 
<a name="l05026"></a>05026   <span class="keywordtype">void</span> setval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> val, <span class="keywordtype">string</span> comment = <span class="stringliteral">""</span>);
<a name="l05041"></a>05041   <span class="keywordtype">void</span> setval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <span class="keywordtype">int</span> val, <span class="keywordtype">string</span> comment = <span class="stringliteral">""</span>);
<a name="l05042"></a>05042 
<a name="l05057"></a>05057   <span class="keywordtype">void</span> setval(<span class="keywordtype">string</span> section, <span class="keywordtype">string</span> key, <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>* val, <span class="keywordtype">string</span> comment = <span class="stringliteral">""</span>);
<a name="l05058"></a>05058 
<a name="l05059"></a>05059 
<a name="l05070"></a>05070   <span class="keywordtype">void</span> save(<span class="keywordtype">string</span> filename = <span class="stringliteral">""</span>);
<a name="l05071"></a>05071 };
<a name="l05072"></a>05072 
<a name="l05073"></a>05073 
<a name="l05074"></a>05074 
<a name="l05075"></a>05075 
<a name="l05076"></a>05076 
<a name="l05077"></a>05077 
<a name="l05078"></a>05078 
<a name="l05079"></a>05079 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l05081"></a>05081 <span class="comment"></span><span class="preprocessor">#define MCS_CMD_MAX_TOKENS 100</span>
<a name="l05082"></a>05082 <span class="preprocessor"></span>
<a name="l05149"></a>05149 <span class="keyword">class </span>CommandParser {
<a name="l05150"></a>05150 <span class="keyword">private</span>:
<a name="l05151"></a>05151   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l05152"></a>05152 
<a name="l05154"></a>05154   <span class="keywordtype">string</span> origcmdline;
<a name="l05155"></a>05155 
<a name="l05157"></a>05157   <span class="keywordtype">string</span> lcmd;
<a name="l05158"></a>05158 
<a name="l05160"></a>05160   vector&lt;string&gt; tokens;
<a name="l05161"></a>05161 
<a name="l05169"></a>05169   vector&lt;string&gt; rest;
<a name="l05170"></a>05170 
<a name="l05172"></a>05172   vector&lt;string&gt; args;
<a name="l05173"></a>05173 
<a name="l05175"></a>05175   vector&lt;string&gt; opts;
<a name="l05176"></a>05176 
<a name="l05178"></a>05178   vector&lt;string&gt; optargs;
<a name="l05179"></a>05179 
<a name="l05181"></a>05181   Data* md_args[<a class="code" href="mcs_8hh.html#a2b3dd65de20ffada1acbb03696b87e6" title="Max number of tokens for a command line.">MCS_CMD_MAX_TOKENS</a>];
<a name="l05182"></a>05182 
<a name="l05184"></a>05184   Data* md_optargs[<a class="code" href="mcs_8hh.html#a2b3dd65de20ffada1acbb03696b87e6" title="Max number of tokens for a command line.">MCS_CMD_MAX_TOKENS</a>];
<a name="l05185"></a>05185 
<a name="l05192"></a>05192   <span class="keyword">static</span> <span class="keywordtype">string</span> clean(<span class="keywordtype">string</span> c);
<a name="l05193"></a>05193 
<a name="l05195"></a>05195   <span class="keywordtype">void</span> clearArgs();
<a name="l05196"></a>05196 
<a name="l05197"></a>05197 <span class="keyword">public</span>:
<a name="l05204"></a>05204   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(CommandParser);
<a name="l05205"></a>05205 
<a name="l05212"></a>05212   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(CommandParser);
<a name="l05213"></a>05213 
<a name="l05215"></a><a class="code" href="classmcs_1_1CommandParser.html">05215</a>   <a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>();
<a name="l05216"></a>05216 
<a name="l05218"></a>05218   ~<a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>();
<a name="l05219"></a>05219 
<a name="l05221"></a>05221   <span class="keywordtype">int</span> tokenc();
<a name="l05222"></a>05222 
<a name="l05235"></a><a class="code" href="classmcs_1_1CommandParser.html#f3d63f2f1aa8eb929bf2cd922b651185">05235</a>   <span class="keywordtype">string</span> token(<span class="keywordtype">int</span> i);
<a name="l05236"></a>05236 
<a name="l05251"></a>05251   <span class="keywordtype">string</span> line_afterToken(<span class="keywordtype">int</span> i);
<a name="l05252"></a>05252 
<a name="l05253"></a>05253 
<a name="l05269"></a>05269   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; arg(<span class="keywordtype">int</span> i);
<a name="l05270"></a>05270 
<a name="l05272"></a>05272   <span class="keywordtype">string</span> sarg(<span class="keywordtype">int</span> i);
<a name="l05273"></a>05273 
<a name="l05274"></a>05274 
<a name="l05276"></a>05276   <span class="keywordtype">int</span> argc();
<a name="l05277"></a>05277 
<a name="l05278"></a>05278 
<a name="l05294"></a>05294   <span class="keywordtype">string</span> opt(<span class="keywordtype">int</span> i);
<a name="l05295"></a>05295 
<a name="l05297"></a>05297   <span class="keywordtype">int</span> optc();
<a name="l05298"></a>05298 
<a name="l05299"></a>05299 
<a name="l05319"></a>05319   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; optarg(<span class="keywordtype">int</span> i);
<a name="l05320"></a>05320 
<a name="l05322"></a>05322   <span class="keywordtype">void</span> parseCmd(<span class="keywordtype">string</span> c);
<a name="l05323"></a>05323 
<a name="l05325"></a>05325   <span class="keywordtype">void</span> parseCmd(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]);
<a name="l05326"></a>05326 
<a name="l05327"></a>05327 
<a name="l05328"></a>05328 
<a name="l05330"></a>05330   <span class="keywordtype">string</span> cline();
<a name="l05331"></a>05331 
<a name="l05333"></a>05333   <span class="keywordtype">string</span> cmd();
<a name="l05334"></a>05334 
<a name="l05336"></a>05336   <span class="keywordtype">string</span> allargs();
<a name="l05337"></a>05337 
<a name="l05339"></a>05339   <span class="keywordtype">bool</span> cmpCmd(<span class="keywordtype">string</span> cmd);
<a name="l05340"></a>05340 
<a name="l05342"></a>05342   <span class="keywordtype">bool</span> givenOpt(<span class="keywordtype">string</span> opt);
<a name="l05343"></a>05343 
<a name="l05345"></a>05345   <span class="keywordtype">bool</span> givenOpt(<span class="keywordtype">string</span> opt, <span class="keywordtype">int</span>&amp; i);
<a name="l05346"></a>05346 
<a name="l05347"></a>05347 
<a name="l05364"></a>05364   vector&lt;string&gt; replPars_onFile(<span class="keywordtype">string</span> fn);
<a name="l05365"></a>05365 
<a name="l05366"></a>05366 
<a name="l05379"></a>05379   <span class="keywordtype">string</span> replPars(<span class="keywordtype">string</span> str);
<a name="l05380"></a>05380 };
<a name="l05381"></a>05381 
<a name="l05382"></a>05382 
<a name="l05383"></a>05383 
<a name="l05384"></a>05384 
<a name="l05385"></a>05385 
<a name="l05386"></a>05386 
<a name="l05387"></a>05387 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l05388"></a>05388 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------------</span>
<a name="l05396"></a>05396 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>
<a name="l05397"></a>05397 {
<a name="l05398"></a>05398 <span class="keyword">private</span>:
<a name="l05399"></a>05399   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l05400"></a>05400 
<a name="l05402"></a>05402   MYSQL* lconn;
<a name="l05403"></a>05403 
<a name="l05405"></a>05405   <span class="keywordtype">bool</span> lconnInitialized;
<a name="l05406"></a>05406 
<a name="l05408"></a>05408   <span class="keywordtype">bool</span> lconnOpened;
<a name="l05409"></a>05409 
<a name="l05411"></a>05411   <span class="keywordtype">string</span> luser;
<a name="l05412"></a>05412 
<a name="l05414"></a>05414   <span class="keywordtype">string</span> lpass;
<a name="l05415"></a>05415 
<a name="l05417"></a>05417   <span class="keywordtype">string</span> ldb  ;
<a name="l05418"></a>05418 
<a name="l05420"></a>05420   <span class="keywordtype">string</span> lhost;
<a name="l05421"></a>05421 
<a name="l05422"></a>05422   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>;
<a name="l05423"></a>05423 
<a name="l05424"></a>05424 <span class="keyword">public</span>:
<a name="l05431"></a>05431   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>);
<a name="l05432"></a>05432 
<a name="l05439"></a>05439   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>);
<a name="l05440"></a>05440 
<a name="l05442"></a>05442   <a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>();
<a name="l05443"></a>05443 
<a name="l05445"></a>05445   ~<a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>();
<a name="l05446"></a>05446 
<a name="l05461"></a>05461   <span class="keywordtype">void</span> connect(<span class="keywordtype">string</span> user, <span class="keywordtype">string</span> pass, <span class="keywordtype">string</span> db, <span class="keywordtype">string</span> host=<span class="stringliteral">""</span>);
<a name="l05462"></a><a class="code" href="classmcs_1_1DBConn.html">05462</a> 
<a name="l05464"></a>05464   <span class="keywordtype">void</span> close();
<a name="l05465"></a><a class="code" href="classmcs_1_1DBConn.html#3fb7e8fe514fdcffc34e853232df040d">05465</a> 
<a name="l05467"></a>05467   <span class="keywordtype">bool</span> isOpen();
<a name="l05468"></a><a class="code" href="classmcs_1_1DBConn.html#d270e91c2669f221ff87aa05181b3f6a">05468</a> 
<a name="l05470"></a>05470   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id();
<a name="l05471"></a><a class="code" href="classmcs_1_1DBConn.html#1bd82a9dedb60608310a011a08197674">05471</a> 
<a name="l05486"></a><a class="code" href="classmcs_1_1DBConn.html#d8fbddc8fa59bd97bf3cbc2f8d105759">05486</a>   <a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>* newDBConn();
<a name="l05487"></a>05487 };
<a name="l05488"></a><a class="code" href="classmcs_1_1DBConn.html#0de80064a367adf51ab09f7a9b6de05a">05488</a> 
<a name="l05489"></a>05489 
<a name="l05490"></a>05490 
<a name="l05491"></a>05491 
<a name="l05492"></a>05492 
<a name="l05493"></a>05493 
<a name="l05494"></a>05494 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l05508"></a>05508 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>
<a name="l05509"></a>05509 {
<a name="l05510"></a>05510 <span class="keyword">private</span>:
<a name="l05511"></a>05511   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l05512"></a>05512 
<a name="l05514"></a>05514   <a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>* ldbc;
<a name="l05515"></a>05515 
<a name="l05517"></a>05517   <span class="keywordtype">bool</span> lhandleNewDBConn;
<a name="l05518"></a>05518 
<a name="l05520"></a>05520   MYSQL* lconn;
<a name="l05521"></a>05521 
<a name="l05523"></a>05523   <span class="keywordtype">bool</span> gotStmtInitialized;
<a name="l05524"></a>05524 
<a name="l05526"></a>05526   <span class="keywordtype">bool</span> gotResult;
<a name="l05527"></a>05527 
<a name="l05529"></a>05529   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> laffectedRows;
<a name="l05530"></a>05530 
<a name="l05532"></a>05532   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> lastid;
<a name="l05533"></a>05533 
<a name="l05538"></a>05538   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> lparam;
<a name="l05539"></a>05539 
<a name="l05540"></a>05540 
<a name="l05558"></a>05558   vector&lt;string&gt; printResultSet(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; nrows,
<a name="l05559"></a>05559                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; nfields,
<a name="l05560"></a>05560                 MYSQL_RES* res = NULL);
<a name="l05561"></a>05561 
<a name="l05566"></a>05566   MYSQL_STMT* lstmt;
<a name="l05567"></a>05567 
<a name="l05572"></a>05572   MYSQL_BIND* lbparam;
<a name="l05573"></a>05573 
<a name="l05574"></a><a class="code" href="classmcs_1_1Query.html">05574</a>   <span class="keywordtype">int</span> nlparam;
<a name="l05575"></a>05575 
<a name="l05576"></a>05576 
<a name="l05578"></a>05578   MYSQL_BIND* lbrec;
<a name="l05579"></a>05579 
<a name="l05580"></a><a class="code" href="classmcs_1_1Query.html#d68954f7438726cb4902da7c8172e913">05580</a>   <span class="keywordtype">bool</span> fetch(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newpos, <span class="keywordtype">bool</span> random);
<a name="l05581"></a>05581 
<a name="l05582"></a>05582   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* myrec;
<a name="l05583"></a><a class="code" href="classmcs_1_1Query.html#bca97c99283e59b68781de2ba7e1abde">05583</a> 
<a name="l05584"></a>05584   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* newRecord();
<a name="l05585"></a>05585 
<a name="l05586"></a><a class="code" href="classmcs_1_1Query.html#8b85b75241fadc62de1c2c671fdae69c">05586</a>   <span class="comment">/*</span>
<a name="l05587"></a>05587 <span class="comment">    IMPORTANT NOTE: lbparam and lparam are protected because the Table class</span>
<a name="l05588"></a>05588 <span class="comment">    needs them to bind parameters. Anyway this should be automatically done</span>
<a name="l05589"></a><a class="code" href="classmcs_1_1Query.html#75f86c89b3f3154757dab1ec578d706a">05589</a> <span class="comment">    via mysql_stmt_param_metadata, but it is not yet implemented. When this</span>
<a name="l05590"></a>05590 <span class="comment">    routine will became available this two variables will become private, so</span>
<a name="l05591"></a>05591 <span class="comment">    users should use the method "param" wherever possible.</span>
<a name="l05592"></a><a class="code" href="classmcs_1_1Query.html#1fbb9cbda094caee44c6e18cdde68f4c">05592</a> <span class="comment">  */</span>
<a name="l05593"></a>05593 
<a name="l05599"></a>05599   <span class="keywordtype">void</span> bind();
<a name="l05600"></a>05600 
<a name="l05601"></a>05601   <span class="keywordtype">string</span> SQL;
<a name="l05602"></a>05602 
<a name="l05603"></a>05603   <span class="keywordtype">void</span> parseFieldList(<span class="keywordtype">int</span> op, <span class="keywordtype">string</span>&amp; fields, <span class="keywordtype">string</span>&amp; values, <span class="keywordtype">int</span>&amp; autoIncr);
<a name="l05604"></a><a class="code" href="classmcs_1_1Query.html#987483d52b070f70687ce133b8babec7">05604</a> 
<a name="l05605"></a>05605 
<a name="l05606"></a>05606 <span class="keyword">public</span>:
<a name="l05613"></a>05613   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>);
<a name="l05614"></a>05614 
<a name="l05621"></a>05621   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>);
<a name="l05622"></a>05622 
<a name="l05637"></a>05637   <a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>(<a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>* lconn, <span class="keywordtype">bool</span> call_newDBConn = <span class="keyword">false</span>);
<a name="l05638"></a><a class="code" href="classmcs_1_1Query.html#c143c8b888bc401a0f8c22db904f7133">05638</a> 
<a name="l05645"></a>05645   ~<a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>();
<a name="l05646"></a>05646 
<a name="l05653"></a>05653   <span class="keywordtype">void</span> query(<span class="keywordtype">string</span> SQL, <span class="keywordtype">bool</span> StoreResult = <span class="keyword">false</span>);
<a name="l05654"></a>05654 
<a name="l05655"></a>05655 
<a name="l05696"></a>05696   vector&lt;string&gt; simpleQuery(<span class="keywordtype">string</span> SQL,
<a name="l05697"></a>05697                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; nrows, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; nfields);
<a name="l05698"></a>05698 
<a name="l05699"></a>05699 
<a name="l05701"></a>05701   vector&lt;string&gt; simpleQuery(<span class="keywordtype">string</span> SQL);
<a name="l05702"></a>05702 
<a name="l05703"></a>05703 
<a name="l05724"></a>05724   <span class="keywordtype">void</span> prepare(<span class="keywordtype">string</span> SQL=<span class="stringliteral">""</span>);
<a name="l05725"></a>05725 
<a name="l05726"></a>05726 <span class="preprocessor">#define MCS_PAB_INSERT 1</span>
<a name="l05727"></a>05727 <span class="preprocessor"></span><span class="preprocessor">#define MCS_PAB_UPDATE 2</span>
<a name="l05728"></a>05728 <span class="preprocessor"></span><span class="preprocessor">#define MCS_PAB_REPLACE 3</span>
<a name="l05729"></a>05729 <span class="preprocessor"></span>
<a name="l05730"></a>05730 
<a name="l05771"></a>05771   <span class="keywordtype">void</span> prepare_with_parameters(<span class="keywordtype">int</span> op, <span class="keywordtype">string</span> fields, <span class="keywordtype">string</span> table,
<a name="l05772"></a>05772                    <span class="keywordtype">string</span> where=<span class="stringliteral">""</span>);
<a name="l05773"></a>05773 
<a name="l05774"></a>05774 
<a name="l05786"></a>05786   <span class="keywordtype">void</span> prepare_with_parameters(<span class="keywordtype">int</span> op, <span class="keywordtype">char</span>** fields, <span class="keywordtype">int</span> nfields,
<a name="l05787"></a>05787             <span class="keywordtype">string</span> table, <span class="keywordtype">string</span> where=<span class="stringliteral">""</span>);
<a name="l05788"></a>05788 
<a name="l05789"></a>05789 
<a name="l05797"></a>05797   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nAffectedRows();
<a name="l05798"></a>05798 
<a name="l05799"></a>05799 
<a name="l05801"></a>05801   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; param();
<a name="l05802"></a>05802 
<a name="l05804"></a>05804   <span class="comment">//  \brief Returns the current record set.</span>
<a name="l05805"></a>05805   <span class="comment">//*/</span>
<a name="l05806"></a>05806   <span class="comment">//DBRecordSet* result();</span>
<a name="l05807"></a>05807 
<a name="l05826"></a>05826   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; lookup(<span class="keywordtype">string</span> field, <span class="keywordtype">string</span> table, <span class="keywordtype">string</span> where = <span class="stringliteral">""</span>);
<a name="l05827"></a>05827 
<a name="l05828"></a>05828 
<a name="l05859"></a>05859   <span class="keywordtype">void</span> execute(<span class="keywordtype">bool</span> StoreResult = <span class="keyword">false</span>);
<a name="l05860"></a>05860 
<a name="l05861"></a>05861 
<a name="l05862"></a>05862   <span class="keywordtype">bool</span> gotRecordSet();
<a name="l05863"></a>05863 
<a name="l05864"></a>05864 
<a name="l05866"></a>05866   <span class="keywordtype">void</span> close();
<a name="l05867"></a>05867 
<a name="l05868"></a>05868 
<a name="l05875"></a>05875   <span class="keywordtype">void</span> readTableList();
<a name="l05876"></a>05876 
<a name="l05878"></a>05878   vector&lt;string&gt;tableList;
<a name="l05879"></a>05879 
<a name="l05891"></a>05891   vector&lt;string&gt; tableInfo(<span class="keywordtype">string</span> tbl);
<a name="l05892"></a>05892 
<a name="l05893"></a>05893 
<a name="l05895"></a>05895   vector&lt;string&gt; ExecutionDetails(<span class="keywordtype">string</span> pre = <span class="stringliteral">""</span>);
<a name="l05896"></a>05896 
<a name="l05897"></a>05897 
<a name="l05917"></a>05917   <span class="keywordtype">void</span> customFillBuffer(<span class="keywordtype">char</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; chunksize, <span class="keywordtype">bool</span> firstTime);
<a name="l05918"></a>05918 
<a name="l05925"></a>05925   <span class="keywordtype">void</span> Result2Ascii(<span class="keywordtype">string</span> fn);
<a name="l05926"></a>05926 
<a name="l05936"></a>05936   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> last_id();
<a name="l05937"></a>05937 };
<a name="l05938"></a>05938 
<a name="l05939"></a>05939 
<a name="l05940"></a>05940 
<a name="l05941"></a>05941 
<a name="l05942"></a>05942 
<a name="l05943"></a>05943 
<a name="l05944"></a><a class="code" href="classmcs_1_1Query.html#4215468d82ccfaddce0ace3587f1dec8">05944</a> 
<a name="l05945"></a>05945 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l05963"></a>05963 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Table.html" title="A class to directly set and retrieve value from a database table.">Table</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1Query.html" title="Execute queries on the database.">Query</a>
<a name="l05964"></a>05964 {
<a name="l05965"></a>05965 <span class="keyword">private</span>:
<a name="l05966"></a>05966   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l05967"></a>05967 
<a name="l05969"></a>05969   <span class="keywordtype">string</span> ltable;
<a name="l05970"></a>05970 
<a name="l05972"></a>05972   <span class="keywordtype">string</span> lfieldkey;
<a name="l05973"></a>05973 
<a name="l05975"></a>05975   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> posfieldkey;
<a name="l05976"></a>05976 
<a name="l05978"></a>05978   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> newrec;
<a name="l05979"></a>05979 
<a name="l05980"></a>05980   <span class="keywordtype">void</span> insert_or_update(<span class="keywordtype">int</span> op);
<a name="l05981"></a>05981 
<a name="l05982"></a>05982 <span class="keyword">public</span>:
<a name="l05989"></a>05989   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Table.html" title="A class to directly set and retrieve value from a database table.">Table</a>);
<a name="l05990"></a>05990 
<a name="l05997"></a>05997   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Table.html" title="A class to directly set and retrieve value from a database table.">Table</a>);
<a name="l05998"></a>05998 
<a name="l06006"></a>06006   <a class="code" href="classmcs_1_1Table.html" title="A class to directly set and retrieve value from a database table.">Table</a>(<a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a>* db, <span class="keywordtype">string</span> table, <span class="keywordtype">string</span> fieldkey);
<a name="l06007"></a>06007 
<a name="l06009"></a>06009   ~<a class="code" href="classmcs_1_1Table.html" title="A class to directly set and retrieve value from a database table.">Table</a>();
<a name="l06010"></a>06010 
<a name="l06012"></a>06012   <span class="keywordtype">void</span> loadTable();
<a name="l06013"></a>06013 
<a name="l06017"></a>06017   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; newRec();
<a name="l06018"></a>06018 
<a name="l06024"></a>06024   <span class="keywordtype">void</span> insert();
<a name="l06025"></a>06025 
<a name="l06031"></a>06031   <span class="keywordtype">void</span> replace();
<a name="l06032"></a><a class="code" href="classmcs_1_1Table.html#d75c2f7ce578e972e35fa57cdb212133">06032</a> 
<a name="l06033"></a>06033 
<a name="l06040"></a>06040   <span class="keywordtype">void</span> update();
<a name="l06041"></a><a class="code" href="classmcs_1_1Table.html#4734f0bdf1f607610bcb6fa5d93a712a">06041</a> };
<a name="l06042"></a>06042 <span class="preprocessor">#endif</span>
<a name="l06043"></a>06043 <span class="preprocessor"></span>
<a name="l06044"></a><a class="code" href="classmcs_1_1Table.html#d38a7e7133ec611b2f633cde06b3e436">06044</a> 
<a name="l06045"></a>06045 
<a name="l06046"></a>06046 
<a name="l06047"></a>06047 
<a name="l06048"></a>06048 <span class="comment">//Forward declaration</span>
<a name="l06049"></a>06049 <span class="keyword">class </span><a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>;
<a name="l06050"></a>06050 <span class="keyword">class </span><a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>;
<a name="l06051"></a>06051 
<a name="l06052"></a>06052 
<a name="l06053"></a>06053 
<a name="l06054"></a>06054 <span class="comment">//</span>
<a name="l06055"></a>06055 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l06062"></a>06062 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a> {
<a name="l06063"></a>06063 <span class="keyword">private</span>:
<a name="l06064"></a>06064   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l06065"></a>06065 
<a name="l06067"></a>06067   <span class="keywordtype">char</span> tID[4];
<a name="l06068"></a>06068 
<a name="l06069"></a>06069 <span class="keyword">protected</span>:
<a name="l06077"></a>06077   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Log(<a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a> e);
<a name="l06078"></a>06078 
<a name="l06080"></a>06080   <span class="keyword">static</span> <a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>* env;
<a name="l06081"></a>06081 
<a name="l06082"></a>06082 <span class="keyword">public</span>:
<a name="l06089"></a>06089   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>);
<a name="l06090"></a>06090 
<a name="l06097"></a>06097   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>);
<a name="l06098"></a>06098 
<a name="l06107"></a>06107   <a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* parent, <span class="keywordtype">int</span> lID);
<a name="l06108"></a>06108 
<a name="l06117"></a>06117   <a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *ltID);
<a name="l06118"></a>06118 
<a name="l06120"></a>06120   ~<a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>();
<a name="l06121"></a>06121 
<a name="l06123"></a>06123   <span class="keyword">const</span> <span class="keywordtype">char</span> *tid();
<a name="l06124"></a>06124 
<a name="l06125"></a>06125 
<a name="l06145"></a>06145   <span class="keyword">static</span> <span class="keywordtype">int</span> fileType(<span class="keywordtype">string</span> fn);
<a name="l06146"></a><a class="code" href="classmcs_1_1BaseThread.html#abed2c79cec2f02a14f592a71227f929">06146</a> 
<a name="l06160"></a>06160   <span class="keywordtype">int</span> chkExt(<span class="keywordtype">string</span>&amp; s);
<a name="l06161"></a>06161 
<a name="l06200"></a>06200   <span class="keyword">static</span> <span class="keywordtype">int</span> spawn(<span class="keywordtype">string</span> fn, <span class="keywordtype">string</span> pars,
<a name="l06201"></a>06201            <span class="keywordtype">string</span> wpath = <span class="stringliteral">"."</span>,
<a name="l06202"></a>06202            <span class="keywordtype">string</span> thrID = <span class="stringliteral">"x"</span>,
<a name="l06203"></a>06203            <span class="keywordtype">string</span> user = <span class="stringliteral">"x"</span>,
<a name="l06204"></a>06204            <span class="keywordtype">string</span> pass = <span class="stringliteral">"x"</span>,
<a name="l06205"></a>06205            <span class="keywordtype">string</span> dbname = <span class="stringliteral">"x"</span>,
<a name="l06206"></a>06206            <span class="keywordtype">string</span> fout = <span class="stringliteral">"out"</span>,
<a name="l06207"></a>06207            <span class="keywordtype">string</span> ferr = <span class="stringliteral">"err"</span>);
<a name="l06208"></a>06208 };
<a name="l06209"></a>06209 
<a name="l06210"></a>06210 
<a name="l06211"></a>06211 
<a name="l06212"></a>06212 
<a name="l06213"></a>06213 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l06215"></a>06215 <span class="comment"></span><span class="preprocessor">#define MCS_FT_UNKNOWN  0</span>
<a name="l06216"></a>06216 <span class="preprocessor"></span>
<a name="l06218"></a>06218 <span class="preprocessor">#define MCS_FT_BATCH    1</span>
<a name="l06219"></a>06219 <span class="preprocessor"></span>
<a name="l06221"></a>06221 <span class="preprocessor">#define MCS_FT_SQL      2</span>
<a name="l06222"></a>06222 <span class="preprocessor"></span>
<a name="l06224"></a>06224 <span class="preprocessor">#define MCS_FT_SCRIPT   3</span>
<a name="l06225"></a>06225 <span class="preprocessor"></span>
<a name="l06227"></a>06227 <span class="preprocessor">#define MCS_FT_BIN      4</span>
<a name="l06228"></a>06228 <span class="preprocessor"></span>
<a name="l06229"></a>06229 
<a name="l06230"></a>06230 
<a name="l06237"></a>06237 <span class="keyword">class </span><a class="code" href="classmcs_1_1ClientInfo.html" title="Class holding information about a client connection.">ClientInfo</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>
<a name="l06238"></a>06238 {
<a name="l06239"></a>06239 <span class="keyword">public</span>:
<a name="l06241"></a>06241   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; id();
<a name="l06242"></a>06242 
<a name="l06244"></a>06244   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; ipaddress();
<a name="l06245"></a>06245 
<a name="l06247"></a>06247   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; hostname();
<a name="l06248"></a>06248 
<a name="l06250"></a>06250   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; timeConnetcted();
<a name="l06251"></a>06251 
<a name="l06253"></a>06253   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; username();
<a name="l06254"></a>06254 
<a name="l06256"></a>06256   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; lastCommand();
<a name="l06257"></a>06257 
<a name="l06259"></a>06259   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; timeLastCommand();
<a name="l06260"></a>06260 
<a name="l06262"></a>06262   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; commandExecuted();
<a name="l06263"></a>06263 
<a name="l06265"></a>06265   <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; logged();
<a name="l06266"></a>06266 
<a name="l06267"></a>06267 <span class="keyword">public</span>:
<a name="l06269"></a>06269   <a class="code" href="classmcs_1_1ClientInfo.html" title="Class holding information about a client connection.">ClientInfo</a>();
<a name="l06270"></a>06270 };
<a name="l06271"></a>06271 
<a name="l06272"></a>06272 
<a name="l06273"></a>06273 
<a name="l06274"></a>06274 
<a name="l06275"></a>06275 
<a name="l06329"></a>06329 <span class="keyword">class </span>UserThread : <span class="keyword">public</span> BaseThread {
<a name="l06330"></a>06330 <span class="keyword">private</span>:
<a name="l06331"></a>06331   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l06332"></a>06332 
<a name="l06334"></a>06334   <span class="keywordtype">int</span> csocket;
<a name="l06335"></a>06335 
<a name="l06337"></a>06337   ClientInfo linfo;
<a name="l06338"></a>06338 
<a name="l06339"></a>06339   RecordSet* rs;
<a name="l06340"></a>06340 
<a name="l06341"></a>06341   <span class="keywordtype">bool</span> deleters;
<a name="l06342"></a>06342 
<a name="l06343"></a>06343   <a class="code" href="classmcs_1_1Synchro.html#c0cc917a0b99ca5ee6782645fb02ad43" title="Constructor.">Synchro</a> syn;
<a name="l06344"></a>06344 
<a name="l06345"></a>06345 <span class="keyword">protected</span>:
<a name="l06347"></a>06347   Socket* sock;
<a name="l06348"></a>06348 
<a name="l06350"></a>06350   <span class="keywordtype">int</span> luserid;
<a name="l06351"></a>06351 
<a name="l06353"></a>06353   <span class="keywordtype">int</span> batchlevel;
<a name="l06354"></a>06354 
<a name="l06356"></a>06356   <span class="keywordtype">bool</span> loginok;
<a name="l06357"></a>06357 
<a name="l06359"></a>06359   <span class="keywordtype">int</span> grants;
<a name="l06360"></a>06360 
<a name="l06362"></a>06362   <span class="keywordtype">string</span> fnout;
<a name="l06363"></a>06363 
<a name="l06365"></a>06365   <span class="keywordtype">string</span> fnerr;
<a name="l06366"></a>06366 
<a name="l06368"></a>06368   <span class="keywordtype">string</span> user;
<a name="l06369"></a>06369 
<a name="l06371"></a>06371   <span class="keywordtype">string</span> pass;
<a name="l06372"></a>06372 
<a name="l06374"></a>06374   <span class="keywordtype">string</span> dbname;
<a name="l06375"></a>06375 
<a name="l06377"></a>06377   <span class="keywordtype">string</span> dbhost;
<a name="l06378"></a>06378 
<a name="l06379"></a>06379 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l06381"></a>06381 <span class="preprocessor">  DBConn db;</span>
<a name="l06382"></a>06382 <span class="preprocessor"></span>
<a name="l06384"></a>06384   Query* query;
<a name="l06385"></a>06385 <span class="preprocessor">#endif</span>
<a name="l06386"></a>06386 <span class="preprocessor"></span>
<a name="l06387"></a>06387   <span class="keywordtype">void</span> setActiveRS(RecordSet* rs, <span class="keywordtype">bool</span> delWhenFinished = <span class="keyword">true</span>);
<a name="l06388"></a>06388 
<a name="l06399"></a>06399   <span class="keywordtype">string</span> wpath(<span class="keywordtype">string</span> fn = <span class="stringliteral">""</span>);
<a name="l06400"></a><a class="code" href="classmcs_1_1UserThread.html#94497653d9d5b0186362ce1dcbe375b4">06400</a> 
<a name="l06401"></a>06401 
<a name="l06412"></a>06412   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> sendStrings(<span class="keywordtype">string</span> str);
<a name="l06413"></a><a class="code" href="classmcs_1_1UserThread.html#3af624da9b3f3fe8c96c2d67f7179a7e">06413</a> 
<a name="l06414"></a>06414 
<a name="l06421"></a>06421   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Send(<a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a> e, <span class="keywordtype">bool</span> log = <span class="keyword">true</span>);
<a name="l06422"></a><a class="code" href="classmcs_1_1UserThread.html#adee1b4f2982702ad6c00eb0a3fdaffe">06422</a> 
<a name="l06428"></a><a class="code" href="classmcs_1_1UserThread.html#3abab3469b41141614da82b0cd611b85">06428</a>   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Send(<a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; data);
<a name="l06429"></a>06429 
<a name="l06435"></a>06435   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Send(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; vec);
<a name="l06436"></a>06436 
<a name="l06445"></a>06445   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Send(<span class="keywordtype">string</span> filename, <span class="keywordtype">string</span> path);
<a name="l06446"></a>06446 
<a name="l06454"></a>06454   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> Send(vector&lt;string&gt; vec);
<a name="l06455"></a>06455 
<a name="l06456"></a>06456 
<a name="l06457"></a>06457 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l06458"></a>06458 <span class="preprocessor"></span>
<a name="l06470"></a>06470   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> sendQueryRes();
<a name="l06471"></a>06471 <span class="preprocessor">#endif</span>
<a name="l06472"></a>06472 <span class="preprocessor"></span>
<a name="l06473"></a>06473 
<a name="l06488"></a>06488   <span class="keywordtype">void</span> prompt(<a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> ret);
<a name="l06489"></a>06489 
<a name="l06490"></a>06490 
<a name="l06499"></a>06499   <span class="keywordtype">void</span> run();
<a name="l06500"></a>06500 
<a name="l06501"></a>06501 
<a name="l06515"></a>06515   <span class="keyword">virtual</span> <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> hk_connect();
<a name="l06516"></a>06516 
<a name="l06517"></a>06517 
<a name="l06536"></a>06536   <span class="keyword">virtual</span> <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> hk_auth(<span class="keywordtype">int</span>&amp; grants, <span class="keywordtype">bool</span>&amp; loginok);
<a name="l06537"></a>06537 
<a name="l06538"></a>06538 
<a name="l06556"></a>06556   <span class="keyword">virtual</span> <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> hk_exec(<a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>* cmd, <span class="keywordtype">bool</span>&amp; cmd_executed);
<a name="l06557"></a>06557 
<a name="l06558"></a>06558 
<a name="l06571"></a>06571   <span class="keyword">virtual</span> <span class="keywordtype">void</span> hk_postexec(<a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>* cmd, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> ret);
<a name="l06572"></a>06572 
<a name="l06573"></a>06573 
<a name="l06582"></a>06582   <span class="keyword">virtual</span> <span class="keywordtype">void</span> hk_disconnect();
<a name="l06583"></a>06583 
<a name="l06584"></a>06584 
<a name="l06607"></a>06607   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> exec(<span class="keywordtype">string</span> cmd, <span class="keywordtype">string</span> pars = <span class="stringliteral">""</span>);
<a name="l06608"></a>06608 
<a name="l06609"></a>06609 
<a name="l06614"></a>06614   <a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>* parent();
<a name="l06615"></a>06615 
<a name="l06616"></a>06616 
<a name="l06618"></a>06618   <span class="keywordtype">void</span> send2OtherThread(<a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>&amp; d, <span class="keywordtype">int</span> destid);
<a name="l06619"></a>06619 
<a name="l06620"></a>06620 <span class="keyword">public</span>:
<a name="l06627"></a>06627   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>);
<a name="l06628"></a>06628 
<a name="l06635"></a>06635   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>);
<a name="l06636"></a>06636 
<a name="l06646"></a>06646   <a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* parent, <span class="keywordtype">int</span> lID, <span class="keywordtype">int</span> newsock);
<a name="l06647"></a>06647 
<a name="l06649"></a>06649   ~<a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>();
<a name="l06650"></a>06650 
<a name="l06652"></a>06652   <a class="code" href="classmcs_1_1ClientInfo.html" title="Class holding information about a client connection.">ClientInfo</a>&amp; info();
<a name="l06653"></a>06653 
<a name="l06671"></a>06671   <span class="keywordtype">void</span> wakeUpClient(<a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a>* e = NULL);
<a name="l06672"></a>06672 
<a name="l06674"></a>06674   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> send;
<a name="l06675"></a>06675 
<a name="l06677"></a>06677   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> recv;
<a name="l06678"></a>06678 
<a name="l06680"></a>06680   <span class="keywordtype">string</span> userName();
<a name="l06681"></a>06681 
<a name="l06682"></a>06682   <span class="keywordtype">int</span> userID();
<a name="l06683"></a>06683 };
<a name="l06684"></a>06684 
<a name="l06685"></a>06685 
<a name="l06686"></a>06686 
<a name="l06687"></a>06687 
<a name="l06688"></a>06688 <span class="comment">// -------------------------------------------------------------------</span>
<a name="l06705"></a>06705 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>
<a name="l06706"></a>06706 {
<a name="l06707"></a>06707 <span class="keyword">private</span>:
<a name="l06708"></a>06708   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l06709"></a>06709 
<a name="l06718"></a>06718   <span class="keyword">virtual</span> <span class="keywordtype">void</span> run();
<a name="l06719"></a>06719 
<a name="l06720"></a>06720 
<a name="l06721"></a>06721 <span class="keyword">protected</span>:
<a name="l06722"></a>06722   <a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>** client;
<a name="l06723"></a>06723 
<a name="l06725"></a>06725   <a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>** serverClients();
<a name="l06726"></a>06726 
<a name="l06735"></a>06735   <span class="keywordtype">void</span> dataDispatcher();
<a name="l06736"></a>06736 
<a name="l06754"></a>06754   <span class="keywordtype">bool</span> userID2clientID(<span class="keywordtype">int</span> userid, <span class="keywordtype">int</span>* cid);
<a name="l06755"></a>06755 
<a name="l06756"></a>06756 
<a name="l06757"></a>06757 <span class="keyword">public</span>:
<a name="l06764"></a>06764   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>);
<a name="l06765"></a>06765 
<a name="l06772"></a>06772   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>);
<a name="l06773"></a>06773 
<a name="l06783"></a>06783   <a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>(<a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* parent);
<a name="l06784"></a>06784 
<a name="l06785"></a>06785 
<a name="l06787"></a>06787   ~<a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>();
<a name="l06788"></a><a class="code" href="classmcs_1_1LocalThread.html#ea1314de4d4d975ba7ebafb6cc73f6c1">06788</a> 
<a name="l06789"></a>06789 
<a name="l06804"></a>06804   <span class="keyword">virtual</span> <span class="keywordtype">void</span> hk_log(<a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>* p, <a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a> e);
<a name="l06805"></a>06805 
<a name="l06807"></a>06807   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> recv;
<a name="l06808"></a>06808 };
<a name="l06809"></a>06809 
<a name="l06810"></a>06810 
<a name="l06811"></a>06811 
<a name="l06812"></a>06812 
<a name="l06813"></a>06813 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l06831"></a>06831 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a> {
<a name="l06832"></a>06832 <span class="keyword">private</span>:
<a name="l06833"></a>06833 <span class="preprocessor">#if ENABLE_MYSQL</span>
<a name="l06834"></a>06834 <span class="preprocessor"></span>  <a class="code" href="classmcs_1_1DBConn.html" title="Handle database connection.">DBConn</a> db;
<a name="l06835"></a>06835 <span class="preprocessor">#endif //ENABLE_MYSQL</span>
<a name="l06836"></a>06836 <span class="preprocessor"></span>
<a name="l06838"></a>06838   <span class="keywordtype">void</span> chkTree();
<a name="l06839"></a>06839 
<a name="l06843"></a>06843   <span class="keywordtype">void</span> LoadConf();
<a name="l06844"></a>06844 
<a name="l06848"></a>06848   <span class="keywordtype">void</span> DumpConf();
<a name="l06849"></a>06849 
<a name="l06850"></a>06850 
<a name="l06851"></a>06851 <span class="keyword">public</span>:
<a name="l06860"></a>06860   <a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>(<span class="keywordtype">string</span> app = <span class="stringliteral">"mcs"</span>, <span class="keywordtype">string</span> inipath = <span class="stringliteral">"mcs.conf"</span>);
<a name="l06861"></a>06861 
<a name="l06868"></a>06868   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>);
<a name="l06869"></a>06869 
<a name="l06876"></a>06876   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>);
<a name="l06877"></a>06877 
<a name="l06879"></a>06879   ~<a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>();
<a name="l06880"></a>06880 
<a name="l06881"></a>06881   <a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>* local;
<a name="l06882"></a>06882 
<a name="l06884"></a>06884   <a class="code" href="classmcs_1_1Conf.html" title="Read and write configuration files.">Conf</a>* cnf;
<a name="l06885"></a>06885 
<a name="l06887"></a>06887   <span class="keywordtype">string</span> appname;
<a name="l06888"></a>06888 
<a name="l06890"></a>06890   <span class="keywordtype">string</span> appvers;
<a name="l06891"></a>06891 
<a name="l06893"></a>06893   <span class="keywordtype">string</span> path;
<a name="l06894"></a>06894 
<a name="l06896"></a>06896   <span class="keywordtype">string</span> inipath;
<a name="l06897"></a><a class="code" href="classmcs_1_1Env.html">06897</a> 
<a name="l06899"></a>06899   <span class="keywordtype">string</span> localhost;
<a name="l06900"></a><a class="code" href="classmcs_1_1Env.html#59f45c5b524a7ca7e126777f32a9ee35">06900</a> 
<a name="l06902"></a>06902   <span class="keywordtype">string</span> interface;
<a name="l06903"></a>06903 
<a name="l06905"></a>06905   <span class="keywordtype">int</span> port;
<a name="l06906"></a>06906 
<a name="l06908"></a>06908   <span class="comment">//bool server_running;</span>
<a name="l06909"></a>06909 
<a name="l06910"></a>06910   <a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>* server;
<a name="l06911"></a>06911 
<a name="l06913"></a>06913   <span class="keywordtype">int</span> max_users;
<a name="l06914"></a>06914 
<a name="l06916"></a>06916   <span class="keywordtype">bool</span> cl_local_kills_mcs;
<a name="l06917"></a>06917 
<a name="l06919"></a>06919   <span class="keywordtype">bool</span> cl_have_db;
<a name="l06920"></a>06920 
<a name="l06922"></a>06922   <span class="keywordtype">bool</span> cl_custom_auth;
<a name="l06923"></a>06923 
<a name="l06925"></a>06925   <span class="keywordtype">bool</span> cl_logfile;
<a name="l06926"></a>06926 
<a name="l06928"></a>06928   <span class="keywordtype">bool</span> cl_work;
<a name="l06929"></a>06929 
<a name="l06931"></a>06931   <span class="keywordtype">bool</span> cl_work_cid;
<a name="l06932"></a>06932 
<a name="l06934"></a>06934   <span class="keywordtype">bool</span> cl_logstdout;
<a name="l06935"></a>06935 
<a name="l06937"></a>06937   <span class="keywordtype">bool</span> cl_createlocal;
<a name="l06938"></a>06938 
<a name="l06940"></a>06940   <span class="keywordtype">bool</span> cl_restartlocal;
<a name="l06941"></a>06941 
<a name="l06943"></a>06943   <span class="keywordtype">bool</span> cl_clean_logout;
<a name="l06944"></a>06944 
<a name="l06946"></a>06946   <span class="keywordtype">bool</span> cl_read_grants;
<a name="l06947"></a><a class="code" href="classmcs_1_1Env.html#bb2dd3a79b3ea73b598df5522667eb98">06947</a> 
<a name="l06949"></a>06949   <span class="keywordtype">bool</span> cl_autoexec;
<a name="l06950"></a><a class="code" href="classmcs_1_1Env.html#32c38be88237ba5ef39cf890583f00de">06950</a> 
<a name="l06952"></a>06952   <span class="keywordtype">bool</span> cl_use_ssl;
<a name="l06953"></a><a class="code" href="classmcs_1_1Env.html#224a832ac29f0f3202ecadbbb2974fee">06953</a> 
<a name="l06955"></a>06955   <span class="keywordtype">string</span> sslcert;
<a name="l06956"></a><a class="code" href="classmcs_1_1Env.html#2c498f98b426650ed892623c165265c4">06956</a> 
<a name="l06958"></a>06958   <span class="keywordtype">string</span> sslpriv;
<a name="l06959"></a><a class="code" href="classmcs_1_1Env.html#c3e3ae6c01f6411da0294a64ab6dfff3">06959</a> 
<a name="l06961"></a>06961   ofstream* flog;
<a name="l06962"></a><a class="code" href="classmcs_1_1Env.html#9555514574788c07ae7170600f0a3177">06962</a> 
<a name="l06964"></a>06964   <span class="keywordtype">string</span> db_user;
<a name="l06965"></a><a class="code" href="classmcs_1_1Env.html#57a58bf23ec34648015d62eb0824e2b7">06965</a> 
<a name="l06967"></a>06967   <span class="keywordtype">string</span> db_pass;
<a name="l06968"></a><a class="code" href="classmcs_1_1Env.html#0e655af938f1fd987794b52ed0a4a804">06968</a> 
<a name="l06970"></a>06970   <span class="keywordtype">string</span> db_name;
<a name="l06971"></a><a class="code" href="classmcs_1_1Env.html#3143387871d0c4a012d845f54cd78a01">06971</a> 
<a name="l06973"></a>06973   <span class="keywordtype">string</span> db_host;
<a name="l06974"></a>06974 
<a name="l06976"></a><a class="code" href="classmcs_1_1Env.html#b5030ab03336cc03bf383276a1f54a14">06976</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout;
<a name="l06977"></a>06977 
<a name="l06979"></a><a class="code" href="classmcs_1_1Env.html#dbf99e5ea8e80a374c0856464373b107">06979</a>   <span class="keywordtype">int</span> cl_chunksize;
<a name="l06980"></a>06980 
<a name="l06982"></a><a class="code" href="classmcs_1_1Env.html#9fe077dac3eaa9d4cf41dc449bc97112">06982</a>   <span class="keywordtype">void</span>* ssl_ctx;
<a name="l06983"></a>06983 };
<a name="l06984"></a>06984 
<a name="l06985"></a><a class="code" href="classmcs_1_1Env.html#13c23acc1e485af37c1e9a1f36fc4df1">06985</a> 
<a name="l06986"></a>06986 
<a name="l06987"></a>06987 
<a name="l06988"></a><a class="code" href="classmcs_1_1Env.html#247b3f1fdf3f721c779963b8b5388603">06988</a> 
<a name="l06989"></a>06989 
<a name="l06990"></a>06990 
<a name="l06991"></a><a class="code" href="classmcs_1_1Env.html#1c8233be2f9bd334c64c94a41df0b3d0">06991</a> 
<a name="l06992"></a>06992 
<a name="l06993"></a>06993 
<a name="l06994"></a><a class="code" href="classmcs_1_1Env.html#e8d5a31c7a244a086f80fdd8e522da33">06994</a> 
<a name="l06995"></a>06995 
<a name="l06996"></a>06996 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l07130"></a>07130 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a> : <span class="keyword">public</span> <a class="code" href="classmcs_1_1BaseThread.html" title="Base class for MCS threaded objects.">BaseThread</a>
<a name="l07131"></a>07131 {
<a name="l07132"></a>07132 <span class="keyword">private</span>:
<a name="l07133"></a>07133   <a class="code" href="classmcs_1_1Synchro.html#d4a8a0ff9aef9e2a87e450fda4013126">MCS_DEBUG_ALLOC</a>;
<a name="l07134"></a>07134 
<a name="l07136"></a>07136   <a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>** pClient;
<a name="l07137"></a>07137 
<a name="l07138"></a>07138   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>; <span class="comment">//To give access to pClient</span>
<a name="l07139"></a>07139 
<a name="l07148"></a>07148   <span class="keywordtype">void</span> run();
<a name="l07149"></a>07149 
<a name="l07152"></a>07152   <span class="keywordtype">int</span> find_free_id();
<a name="l07153"></a>07153 
<a name="l07154"></a>07154 <span class="keyword">protected</span>:
<a name="l07163"></a>07163   <span class="keywordtype">void</span> notify(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="classmcs_1_1Thread.html" title="A class to create separate threads.">Thread</a>* ref);
<a name="l07164"></a>07164 
<a name="l07166"></a>07166   <span class="keywordtype">void</span> newClient(<span class="keywordtype">int</span> newsock);
<a name="l07167"></a>07167 
<a name="l07170"></a>07170   <span class="comment">//void freeClient(int i);</span>
<a name="l07171"></a>07171 
<a name="l07173"></a>07173   <span class="keywordtype">void</span> killAllClients();
<a name="l07174"></a>07174 
<a name="l07190"></a>07190   <span class="keyword">virtual</span> <span class="keywordtype">void</span> hk_newClient(<span class="keywordtype">int</span> i);
<a name="l07191"></a>07191 
<a name="l07193"></a>07193   <span class="keywordtype">void</span> killClient(<span class="keywordtype">int</span> i);
<a name="l07194"></a>07194 
<a name="l07195"></a>07195 
<a name="l07202"></a><a class="code" href="classmcs_1_1Server.html#4c96ac1cbf4de4fd247825c0062e00be">07202</a>   <span class="keyword">virtual</span> <a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>* newUserThread(<span class="keywordtype">int</span> lID, <span class="keywordtype">int</span> newsock);
<a name="l07203"></a>07203 
<a name="l07210"></a>07210   <span class="keyword">virtual</span> <a class="code" href="classmcs_1_1LocalThread.html" title="Server side administrative thread.">LocalThread</a>*  newLocalThread();
<a name="l07211"></a>07211 
<a name="l07212"></a>07212 <span class="keyword">public</span>:
<a name="l07219"></a>07219   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>);
<a name="l07220"></a>07220 
<a name="l07227"></a>07227   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>);
<a name="l07228"></a>07228 
<a name="l07235"></a>07235   <a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>(<a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>* lenv);
<a name="l07236"></a>07236 
<a name="l07238"></a>07238   ~<a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>();
<a name="l07239"></a>07239 
<a name="l07247"></a>07247   <a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>* getAll_ClientInfo();
<a name="l07248"></a>07248 
<a name="l07250"></a>07250   void     (*cb_log)         (<a class="code" href="classmcs_1_1UserThread.html" title="The server side client thread.">UserThread</a>* p, <a class="code" href="classmcs_1_1Event.html" title="Hold informations about an event.">Event</a> e);
<a name="l07251"></a>07251 
<a name="l07253"></a>07253   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> (*cb_connect)     ();
<a name="l07254"></a>07254 
<a name="l07256"></a>07256   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> (*cb_auth)        (<span class="keywordtype">int</span>&amp;, <span class="keywordtype">bool</span>&amp;);
<a name="l07257"></a>07257 
<a name="l07259"></a>07259   <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a> (*cb_exec)        (<a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>*, <span class="keywordtype">bool</span>&amp;_executed);
<a name="l07260"></a>07260 
<a name="l07262"></a>07262   void     (*cb_postexec)    (<a class="code" href="classmcs_1_1CommandParser.html" title="Parse command lines.">CommandParser</a>*, <a class="code" href="namespacemcs.html#bb9aafabd86c28f6ea481f97d61be168" title="Return value for MCS routines.">RetValue</a>);
<a name="l07263"></a>07263 
<a name="l07265"></a>07265   void     (*cb_disconnect)  ();
<a name="l07266"></a>07266 
<a name="l07268"></a>07268   void     (*cbwa_log)       ();
<a name="l07269"></a>07269 
<a name="l07271"></a>07271   void     (*cbwa_connect)   ();
<a name="l07272"></a>07272 
<a name="l07274"></a>07274   void     (*cbwa_auth)      ();
<a name="l07275"></a>07275 
<a name="l07277"></a>07277   void     (*cbwa_exec)      ();
<a name="l07278"></a>07278 
<a name="l07280"></a>07280   void     (*cbwa_postexec)  ();
<a name="l07281"></a>07281 
<a name="l07283"></a>07283   void     (*cb_newClient)   (<span class="keywordtype">int</span> i);
<a name="l07284"></a>07284 
<a name="l07286"></a>07286   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> dispatch;
<a name="l07287"></a>07287 };
<a name="l07288"></a>07288 
<a name="l07289"></a>07289 
<a name="l07290"></a>07290 
<a name="l07291"></a>07291 
<a name="l07341"></a>07341 <a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>* <a class="code" href="namespacemcs.html#f82d99ca32852a1560f3ee4fe385ee6b" title="Start a MCS server.">mcsStart</a>(<span class="keywordtype">string</span> appname, <span class="keywordtype">string</span> inipath = <span class="stringliteral">""</span>,
<a name="l07342"></a>07342           <a class="code" href="classmcs_1_1Server.html" title="Main server class for a MCS-based application.">Server</a>* (*cb_newServer)(<a class="code" href="classmcs_1_1Env.html" title="Hold all environment variables.">Env</a>*) = NULL);
<a name="l07343"></a>07343 
<a name="l07344"></a>07344 
<a name="l07374"></a>07374 <span class="comment">//void mcsWait(Env* env);</span>
<a name="l07375"></a>07375 
<a name="l07376"></a>07376 
<a name="l07377"></a>07377 <span class="preprocessor">#define MCS_CUSTOM_USER(CLASS)                                        \</span>
<a name="l07378"></a>07378 <span class="preprocessor">class CLASS : public mcs::UserThread                          \</span>
<a name="l07379"></a>07379 <span class="preprocessor">{                                     \</span>
<a name="l07380"></a>07380 <span class="preprocessor">public:                                   \</span>
<a name="l07381"></a>07381 <span class="preprocessor">    CLASS(mcs::Thread* p, int id, int sock) :                     \</span>
<a name="l07382"></a>07382 <span class="preprocessor">    UserThread(p, id, sock) {}                        \</span>
<a name="l07383"></a>07383 <span class="preprocessor">    ~CLASS() {}</span>
<a name="l07384"></a>07384 <span class="preprocessor"></span><span class="preprocessor">#define MCS_CUSTOM_USER_END(CLASS)  };</span>
<a name="l07385"></a>07385 <span class="preprocessor"></span>
<a name="l07386"></a>07386 
<a name="l07387"></a>07387 <span class="preprocessor">#define MCS_CUSTOM_LOCAL(CLASS)                                       \</span>
<a name="l07388"></a>07388 <span class="preprocessor">class CLASS : public mcs::LocalThread                     \</span>
<a name="l07389"></a>07389 <span class="preprocessor">{                                     \</span>
<a name="l07390"></a>07390 <span class="preprocessor">public:                                   \</span>
<a name="l07391"></a>07391 <span class="preprocessor">    CLASS(mcs::Thread* p) :                                           \</span>
<a name="l07392"></a>07392 <span class="preprocessor">    LocalThread(p) {}                             \</span>
<a name="l07393"></a>07393 <span class="preprocessor">    ~CLASS() {}</span>
<a name="l07394"></a>07394 <span class="preprocessor"></span><span class="preprocessor">#define MCS_CUSTOM_LOCAL_END(CLASS)  };</span>
<a name="l07395"></a>07395 <span class="preprocessor"></span>
<a name="l07396"></a>07396 
<a name="l07410"></a>07410 <span class="preprocessor">#define MCS_CUSTOM_SERVER(CLIENT, LOCAL)                              \</span>
<a name="l07411"></a>07411 <span class="preprocessor">mcs::Server* newCustomServer(mcs::Env* env);                          \</span>
<a name="l07412"></a>07412 <span class="preprocessor">                                      \</span>
<a name="l07413"></a>07413 <span class="preprocessor">class mcsCustomServer : public mcs::Server                            \</span>
<a name="l07414"></a>07414 <span class="preprocessor">{                                                     \</span>
<a name="l07415"></a>07415 <span class="preprocessor">private:                                                              \</span>
<a name="l07416"></a>07416 <span class="preprocessor">    mcs::UserThread* newUserThread(int id, int sock) {                \</span>
<a name="l07417"></a>07417 <span class="preprocessor">    return new CLIENT(this, id, sock);                \</span>
<a name="l07418"></a>07418 <span class="preprocessor">    }                                     \</span>
<a name="l07419"></a>07419 <span class="preprocessor">                                      \</span>
<a name="l07420"></a>07420 <span class="preprocessor">    mcs::LocalThread* newLocalThread() {                              \</span>
<a name="l07421"></a>07421 <span class="preprocessor">    return new LOCAL(this);                           \</span>
<a name="l07422"></a>07422 <span class="preprocessor">    }                                     \</span>
<a name="l07423"></a>07423 <span class="preprocessor">                                      \</span>
<a name="l07424"></a>07424 <span class="preprocessor">public:                                   \</span>
<a name="l07425"></a>07425 <span class="preprocessor">    mcsCustomServer(mcs::Env* lenv): Server(lenv) {}              \</span>
<a name="l07426"></a>07426 <span class="preprocessor">                                      \</span>
<a name="l07427"></a>07427 <span class="preprocessor">    ~mcsCustomServer() {}                                             \</span>
<a name="l07428"></a>07428 <span class="preprocessor">};                                                                    \</span>
<a name="l07429"></a>07429 <span class="preprocessor">                                                                      \</span>
<a name="l07430"></a>07430 <span class="preprocessor">mcs::Server* newCustomServer(Env* env)                                \</span>
<a name="l07431"></a>07431 <span class="preprocessor">{  return new mcsCustomServer(env); }                                 \</span>
<a name="l07432"></a>07432 <span class="preprocessor">                                                                      \</span>
<a name="l07433"></a>07433 <span class="preprocessor">mcs::Env* mcsCustomStart(string appname, string inipath = "")         \</span>
<a name="l07434"></a>07434 <span class="preprocessor">{ return mcsStart(appname, inipath, &amp;newCustomServer); }</span>
<a name="l07435"></a>07435 <span class="preprocessor"></span>
<a name="l07436"></a>07436 
<a name="l07437"></a>07437 
<a name="l07438"></a>07438 <span class="comment">//--------------------------------------------------------------------</span>
<a name="l07502"></a>07502 <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmcs_1_1Client.html" title="Connect to a MCS server as a client.">Client</a> :  <span class="keyword">public</span> <a class="code" href="classmcs_1_1Socket.html" title="Manage TCP sockets.">Socket</a>, <span class="keyword">public</span> <a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>
<a name="l07503"></a>07503 {
<a name="l07504"></a>07504 <span class="keyword">protected</span>:
<a name="l07506"></a>07506   <span class="keywordtype">string</span> lpath;
<a name="l07507"></a>07507 
<a name="l07509"></a>07509   <span class="keywordtype">bool</span> connected;
<a name="l07510"></a>07510 
<a name="l07512"></a>07512   <span class="keywordtype">void</span> clearRecords();
<a name="l07513"></a>07513 
<a name="l07514"></a>07514   <span class="keywordtype">bool</span> writetofile;
<a name="l07515"></a>07515 
<a name="l07516"></a>07516   <span class="keywordtype">int</span> fileDescriptor;
<a name="l07517"></a>07517 
<a name="l07518"></a>07518   <span class="keywordtype">bool</span> fetch(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newpos, <span class="keywordtype">bool</span> random);
<a name="l07519"></a>07519 
<a name="l07520"></a>07520   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>* lrecord;
<a name="l07521"></a>07521 
<a name="l07522"></a>07522   <span class="comment">//Server side Client Identificator.</span>
<a name="l07523"></a>07523   <span class="keywordtype">int</span> lcid;
<a name="l07524"></a>07524 
<a name="l07525"></a>07525   <span class="comment">//Server side chunk size.</span>
<a name="l07526"></a>07526   <span class="keywordtype">int</span> lchunksize;
<a name="l07527"></a>07527 
<a name="l07528"></a>07528 <span class="keyword">public</span>:
<a name="l07535"></a>07535   <a class="code" href="mcs_8hh.html#7ab8a8220108ffa66af875e68650c9c0">MCS_MISSING_COPY_CONSTRUCTOR</a>(<a class="code" href="classmcs_1_1Client.html" title="Connect to a MCS server as a client.">Client</a>);
<a name="l07536"></a>07536 
<a name="l07543"></a>07543   <a class="code" href="mcs_8hh.html#3a41c76580a98262fc6e8c453271f8d2">MCS_MISSING_ASSIGNMENT_OPERATOR</a>(<a class="code" href="classmcs_1_1Client.html" title="Connect to a MCS server as a client.">Client</a>);
<a name="l07544"></a>07544 
<a name="l07545"></a>07545 
<a name="l07550"></a>07550   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> code;
<a name="l07551"></a>07551 
<a name="l07556"></a>07556   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> msg;
<a name="l07557"></a>07557 
<a name="l07562"></a>07562   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> out;
<a name="l07563"></a>07563 
<a name="l07565"></a>07565   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> recv;
<a name="l07566"></a>07566 
<a name="l07568"></a><a class="code" href="classmcs_1_1Client.html">07568</a>   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> aux;
<a name="l07569"></a>07569 
<a name="l07581"></a>07581   <a class="code" href="classmcs_1_1Client.html" title="Connect to a MCS server as a client.">Client</a>(<span class="keywordtype">string</span> path, <span class="keywordtype">string</span> server, <span class="keywordtype">int</span> port=<a class="code" href="mcs_8hh.html#3663a5b3629913db3e02649843c7e5c6" title="Default port on which the server is listening.">MCS_DEFAULT_PORT</a>,
<a name="l07582"></a><a class="code" href="classmcs_1_1Client.html#d27c51bb15c0ff75c04bf18e53977efe">07582</a>      <span class="keywordtype">bool</span> synchro = <span class="keyword">false</span>, <span class="keywordtype">bool</span> SSL = <span class="keyword">false</span>,
<a name="l07583"></a>07583      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout = <a class="code" href="mcs_8hh.html#9a47084ef05fb89ff616a73ede715981" title="Default client connection timeout, in milliseconds: 10 minutes.">MCS_DEFAULT_CLIENT_TIMEOUT</a>);
<a name="l07584"></a>07584 
<a name="l07586"></a><a class="code" href="classmcs_1_1Client.html#1a17a70686f5295de1ade968762e995e">07586</a>   <span class="keyword">virtual</span> ~<a class="code" href="classmcs_1_1Client.html" title="Connect to a MCS server as a client.">Client</a>();
<a name="l07587"></a>07587 
<a name="l07588"></a>07588 
<a name="l07601"></a>07601   <span class="keywordtype">bool</span> login(<span class="keywordtype">string</span> user, <span class="keywordtype">string</span> pass, <span class="keywordtype">string</span> db = <span class="stringliteral">""</span>);
<a name="l07602"></a>07602 
<a name="l07610"></a>07610   <span class="keywordtype">bool</span> exec(<span class="keywordtype">string</span> cmd, <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a>* data = NULL);
<a name="l07611"></a>07611 
<a name="l07612"></a>07612   <span class="keywordtype">void</span> writeToFile(<span class="keywordtype">int</span> des);
<a name="l07613"></a>07613 
<a name="l07614"></a>07614 <span class="preprocessor">#define MCS_CLIENT_ERROR       1</span>
<a name="l07615"></a>07615 <span class="preprocessor"></span><span class="preprocessor">#define MCS_CLIENT_DATA        2</span>
<a name="l07616"></a>07616 <span class="preprocessor"></span><span class="preprocessor">#define MCS_CLIENT_FILE        3</span>
<a name="l07617"></a>07617 <span class="preprocessor"></span><span class="preprocessor">#define MCS_CLIENT_DISCONNECT  4</span>
<a name="l07618"></a>07618 <span class="preprocessor"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> event(<span class="keywordtype">int</span> op, <a class="code" href="classmcs_1_1Data.html" title="A general purpose data type.">Data</a> d, <span class="keywordtype">int</span> code = 0);
<a name="l07619"></a>07619 
<a name="l07621"></a>07621   <span class="keywordtype">bool</span> isConnected();
<a name="l07622"></a><a class="code" href="classmcs_1_1Client.html#840bd72254b00d45cbdd9d8824c3442a">07622</a> 
<a name="l07624"></a>07624   <span class="keywordtype">int</span> cid();
<a name="l07625"></a>07625 
<a name="l07627"></a>07627   <span class="keywordtype">int</span> chunksize();
<a name="l07628"></a><a class="code" href="classmcs_1_1Client.html#c724070ea2176e20db1aa2f0b68ea91a">07628</a> };
<a name="l07629"></a>07629 
<a name="l07630"></a>07630 
<a name="l07631"></a><a class="code" href="classmcs_1_1Client.html#ff0a361db00b2a9b0555d720d2177f47">07631</a> 
<a name="l07658"></a>07658 <span class="keyword">class </span><a class="code" href="classmcs_1_1Pipe.html" title="A high level class to use system pipes.">Pipe</a> {
<a name="l07659"></a>07659 <span class="keyword">private</span>:
<a name="l07661"></a>07661   <span class="keyword">static</span> <a class="code" href="classmcs_1_1Synchro.html" title="A simple class to implement &amp;quot;critical sections&amp;quot;.">Synchro</a> synchro;
<a name="l07662"></a>07662 
<a name="l07664"></a>07664   <span class="keyword">static</span> <span class="keywordtype">int</span> filecount;
<a name="l07665"></a>07665 
<a name="l07667"></a>07667   <span class="keywordtype">string</span> pipefn;
<a name="l07668"></a>07668 
<a name="l07670"></a>07670   <span class="keywordtype">int</span> pipefd[2];
<a name="l07671"></a>07671 
<a name="l07679"></a>07679   <span class="keywordtype">bool</span> flcreated;
<a name="l07680"></a><a class="code" href="mcs_8hh.html#056ff7de7210ef6d5e3bf704bc201ba1">07680</a> 
<a name="l07682"></a><a class="code" href="mcs_8hh.html#ef5e905a37bf7def3d48714c0cf465c0">07682</a>   <span class="keywordtype">bool</span> named;
<a name="l07683"></a><a class="code" href="mcs_8hh.html#49b4b3ac9cdd2be400fd0e111090064a">07683</a> 
<a name="l07684"></a>07684 <span class="keyword">public</span>:
<a name="l07686"></a>07686   Pipe();
<a name="l07687"></a>07687 
<a name="l07689"></a>07689   ~Pipe();
<a name="l07690"></a>07690 
<a name="l07693"></a>07693   <span class="keywordtype">bool</span> isReady();
<a name="l07694"></a>07694 
<a name="l07697"></a>07697   <span class="keywordtype">string</span> filename();
<a name="l07698"></a>07698 
<a name="l07699"></a>07699 
<a name="l07707"></a>07707   <span class="keywordtype">bool</span> consumerHasGone();
<a name="l07708"></a>07708 
<a name="l07709"></a>07709 
<a name="l07712"></a>07712   <span class="keywordtype">void</span> create();
<a name="l07713"></a>07713 
<a name="l07715"></a>07715   <span class="keywordtype">string</span> createNamed();
<a name="l07716"></a>07716 
<a name="l07720"></a>07720   <span class="keywordtype">int</span> openRead();
<a name="l07721"></a>07721 
<a name="l07725"></a>07725   <span class="keywordtype">int</span> openWrite();
<a name="l07726"></a>07726 
<a name="l07731"></a>07731   <span class="keywordtype">void</span> closeRead();
<a name="l07732"></a>07732 
<a name="l07737"></a>07737   <span class="keywordtype">void</span> closeWrite();
<a name="l07738"></a>07738 };
<a name="l07739"></a>07739 
<a name="l07740"></a>07740 
<a name="l07741"></a>07741 
<a name="l07742"></a>07742 
<a name="l07743"></a>07743 
<a name="l07744"></a>07744 
<a name="l07751"></a>07751 <span class="keyword">class </span>URLReader : Pipe
<a name="l07752"></a>07752 {
<a name="l07753"></a>07753 <span class="keyword">private</span>:
<a name="l07755"></a>07755   <span class="keyword">static</span> <span class="keywordtype">bool</span> fl_curl_global_init;
<a name="l07756"></a>07756 
<a name="l07758"></a>07758   <span class="keywordtype">string</span> lurl;
<a name="l07759"></a>07759 
<a name="l07761"></a>07761   <span class="keywordtype">bool</span> local;
<a name="l07762"></a>07762 
<a name="l07763"></a>07763   <span class="keyword">static</span> <span class="keywordtype">size_t</span> cb_write(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> nmemb, <span class="keywordtype">void</span> *This);
<a name="l07764"></a>07764 
<a name="l07765"></a>07765   ThreadFunc* thr;
<a name="l07766"></a>07766   <span class="keyword">static</span> <span class="keywordtype">int</span> thread_run(<span class="keywordtype">void</span>* p);
<a name="l07767"></a>07767   <span class="keywordtype">void</span> thread_fetch();
<a name="l07768"></a>07768 
<a name="l07769"></a>07769 <span class="keyword">protected</span>:
<a name="l07777"></a>07777   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Write(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nmemb);
<a name="l07778"></a>07778 
<a name="l07779"></a>07779   <span class="keywordtype">void</span> flush();
<a name="l07780"></a>07780 
<a name="l07781"></a>07781 <span class="keyword">public</span>:
<a name="l07783"></a>07783   URLReader();
<a name="l07784"></a>07784 
<a name="l07786"></a>07786   <span class="keyword">virtual</span> ~URLReader();
<a name="l07787"></a>07787 
<a name="l07789"></a>07789   <span class="keywordtype">int</span> OpenAsFD(<span class="keywordtype">string</span> url);
<a name="l07790"></a>07790 
<a name="l07792"></a>07792   <span class="keyword">const</span> <span class="keywordtype">char</span>* OpenAsFifo(<span class="keywordtype">string</span> url);
<a name="l07793"></a>07793 
<a name="l07794"></a>07794   <span class="keywordtype">void</span> Download(<span class="keywordtype">string</span> url, <span class="keywordtype">string</span> fn);
<a name="l07795"></a>07795 
<a name="l07796"></a>07796 
<a name="l07800"></a>07800   <span class="keywordtype">int</span> Read(<span class="keywordtype">char</span>* buf, <span class="keywordtype">int</span> maxlen);
<a name="l07801"></a>07801 
<a name="l07812"></a>07812   <span class="keywordtype">void</span> Close();
<a name="l07813"></a>07813 
<a name="l07814"></a>07814   <span class="keywordtype">string</span> url();
<a name="l07815"></a>07815 
<a name="l07816"></a>07816   <span class="comment">//Event* thread_error();</span>
<a name="l07817"></a><a class="code" href="classmcs_1_1URLReader.html">07817</a> 
<a name="l07818"></a>07818   <span class="keyword">static</span> <span class="keywordtype">bool</span> chkLocal(<span class="keywordtype">string</span>&amp; url);
<a name="l07819"></a>07819 };
<a name="l07820"></a>07820 
<a name="l07821"></a><a class="code" href="classmcs_1_1URLReader.html#2c450749c635d77e0cc682ae67409efd">07821</a> 
<a name="l07822"></a>07822 
<a name="l07823"></a>07823 
<a name="l07824"></a><a class="code" href="classmcs_1_1URLReader.html#7faa3d19b6b05a263ae206346ec2f8d5">07824</a> <span class="preprocessor">#if ENABLE_CFITSIO</span>
<a name="l07825"></a>07825 <span class="preprocessor"></span>
<a name="l07831"></a><a class="code" href="classmcs_1_1URLReader.html#3b18bd1c7ed5651cde29fd74bfd44c95">07831</a> <span class="keyword">class </span><a class="code" href="classmcs_1_1FITSReader.html" title="Read a FITS file.">FITSReader</a>:  <span class="keyword">public</span> <a class="code" href="classmcs_1_1RecordSet.html" title="The base class that implement the data abstraction layer.">RecordSet</a>
<a name="l07832"></a>07832 {
<a name="l07833"></a>07833 <span class="keyword">private</span>:
<a name="l07834"></a>07834   <span class="keywordtype">void</span>* fptr;
<a name="l07835"></a>07835   <span class="keywordtype">long</span> <span class="keywordtype">int</span> nrows;
<a name="l07836"></a>07836   <span class="keywordtype">int</span> ncols;
<a name="l07837"></a>07837   <span class="keywordtype">bool</span> local;
<a name="l07838"></a>07838   <span class="keywordtype">int</span> nhdu;
<a name="l07839"></a>07839   <span class="keywordtype">bool</span> fetch(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newpos, <span class="keywordtype">bool</span> random);
<a name="l07840"></a>07840 
<a name="l07841"></a>07841   <a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a> memfile;
<a name="l07842"></a>07842   <span class="keywordtype">void</span>*  memfilep;
<a name="l07843"></a>07843   <span class="keywordtype">size_t</span> memfilesize;
<a name="l07844"></a>07844 
<a name="l07845"></a>07845 <span class="keyword">public</span>:
<a name="l07846"></a>07846   <a class="code" href="classmcs_1_1FITSReader.html" title="Read a FITS file.">FITSReader</a>();
<a name="l07847"></a>07847   ~<a class="code" href="classmcs_1_1FITSReader.html" title="Read a FITS file.">FITSReader</a>();
<a name="l07848"></a>07848 
<a name="l07849"></a>07849   <span class="keywordtype">void</span> open(<a class="code" href="classmcs_1_1Buffer.html" title="High level buffer.">Buffer</a>&amp; buf);
<a name="l07850"></a>07850   <span class="keywordtype">void</span> open(<span class="keywordtype">string</span> fn);
<a name="l07851"></a>07851   <span class="keywordtype">void</span> close();
<a name="l07852"></a>07852 
<a name="l07853"></a>07853   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> header;
<a name="l07854"></a>07854   <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a> header_comments;
<a name="l07855"></a>07855 
<a name="l07856"></a>07856   <span class="keywordtype">void</span> selectHDU(<span class="keywordtype">int</span> hdunum);
<a name="l07857"></a>07857   <span class="keywordtype">bool</span> selectNextHDU();
<a name="l07858"></a>07858 
<a name="l07859"></a>07859   <span class="keywordtype">void</span> selectHDU(<span class="keywordtype">string</span> name, <span class="keywordtype">int</span> extver = 0);
<a name="l07860"></a>07860   <span class="keywordtype">int</span> currentHDU();
<a name="l07861"></a>07861   <span class="keywordtype">int</span> HDUCount();
<a name="l07862"></a>07862 
<a name="l07863"></a>07863   <span class="keywordtype">bool</span> ffile_is_compressed(<span class="keywordtype">string</span> fn);
<a name="l07864"></a>07864 };
<a name="l07865"></a>07865 
<a name="l07866"></a>07866 
<a name="l07873"></a>07873 <span class="keyword">class </span><a class="code" href="classmcs_1_1FITSWriter.html" title="Write a fits file.">FITSWriter</a>:  <span class="keyword">public</span> <a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>
<a name="l07874"></a>07874 {
<a name="l07875"></a>07875 <span class="keyword">private</span>:
<a name="l07876"></a>07876   <span class="keywordtype">void</span>* fptr;
<a name="l07877"></a>07877 
<a name="l07878"></a>07878 <span class="keyword">public</span>:
<a name="l07879"></a>07879   <a class="code" href="classmcs_1_1FITSWriter.html" title="Write a fits file.">FITSWriter</a>();
<a name="l07880"></a>07880   ~<a class="code" href="classmcs_1_1FITSWriter.html" title="Write a fits file.">FITSWriter</a>();
<a name="l07881"></a>07881 
<a name="l07882"></a>07882   <span class="keywordtype">void</span> open(<span class="keywordtype">string</span> fn, <span class="keywordtype">bool</span> compressed = <span class="keyword">false</span>);
<a name="l07883"></a>07883   <span class="keywordtype">void</span> close();
<a name="l07884"></a>07884 
<a name="l07885"></a>07885   <span class="keywordtype">void</span> newKeyword(<span class="keywordtype">string</span> key, <span class="keywordtype">string</span> value, <span class="keywordtype">string</span> comment = <span class="stringliteral">""</span>);
<a name="l07886"></a>07886   <span class="keywordtype">void</span> newBinTable(<a class="code" href="classmcs_1_1Record.html" title="A dynamic array of Data objects.">Record</a>&amp; meta, <span class="keywordtype">string</span> name = <span class="stringliteral">""</span>);
<a name="l07887"></a>07887   <span class="keywordtype">void</span> newAsciiTable(<span class="keywordtype">int</span> nfields, <span class="keywordtype">string</span> name = <span class="stringliteral">""</span>);
<a name="l07888"></a>07888   <span class="keywordtype">void</span> newImage(<a class="code" href="namespacemcs.html#cc0a00c9c7f1f52d335b6e64bbc5fca6" title="Enumeration of base type for Data.">Types</a> bitpix, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> naxis, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> naxes,
<a name="l07889"></a>07889         <span class="keywordtype">void</span>* buf, <span class="keywordtype">string</span> name = <span class="stringliteral">""</span>);
<a name="l07890"></a>07890 
<a name="l07891"></a>07891   <span class="comment">//The "buf" parameter is used only to write a image HDU.</span>
<a name="l07892"></a>07892   <span class="keywordtype">void</span> write(<span class="keywordtype">void</span>* buf);
<a name="l07893"></a>07893 };
<a name="l07894"></a>07894 <span class="preprocessor">#endif //ENABLE_CFITSIO</span>
<a name="l07895"></a>07895 <span class="preprocessor"></span>
<a name="l07896"></a>07896 
<a name="l07897"></a><a class="code" href="classmcs_1_1FITSReader.html">07897</a> <span class="comment">//class FileReader : public RecordSet</span>
<a name="l07898"></a>07898 <span class="comment">//{</span>
<a name="l07899"></a>07899 <span class="comment">//private:</span>
<a name="l07900"></a><a class="code" href="classmcs_1_1FITSReader.html#fe7dc3c64af4d5578b906a0a6922f513">07900</a> <span class="comment">//  URLReader input;</span>
<a name="l07901"></a><a class="code" href="classmcs_1_1FITSReader.html#e1f86d5c8b0eb0e0d2826a19713ca4f7">07901</a> <span class="comment">//  int fd;</span>
<a name="l07902"></a><a class="code" href="classmcs_1_1FITSReader.html#8e545d6972e59479b8e03a3d64f465d3">07902</a> <span class="comment">//</span>
<a name="l07903"></a><a class="code" href="classmcs_1_1FITSReader.html#4bfbbc2de8b807cd326bad7e01695879">07903</a> <span class="comment">//  Record master;</span>
<a name="l07904"></a><a class="code" href="classmcs_1_1FITSReader.html#a449a4fb6ba0da4621c60070c6804c14">07904</a> <span class="comment">//  string sep;</span>
<a name="l07905"></a>07905 <span class="comment">//  string eor;</span>
<a name="l07906"></a>07906 <span class="comment">//</span>
<a name="l07907"></a><a class="code" href="classmcs_1_1FITSReader.html#8ed64c40983833ce695e3c9f4c9f4a9e">07907</a> <span class="comment">//  Buffer buf;</span>
<a name="l07908"></a><a class="code" href="classmcs_1_1FITSReader.html#835609513d1b3ffa4e0055a45ef80464">07908</a> <span class="comment">//</span>
<a name="l07909"></a><a class="code" href="classmcs_1_1FITSReader.html#e9dcb433bff0e323df341ff6e7508a13">07909</a> <span class="comment">//  bool fetch(unsigned int newpos, bool random);</span>
<a name="l07910"></a>07910 <span class="comment">//</span>
<a name="l07911"></a>07911 <span class="comment">//public:</span>
<a name="l07912"></a>07912 <span class="comment">//  FileReader();</span>
<a name="l07913"></a>07913 <span class="comment">//  ~FileReader();</span>
<a name="l07914"></a>07914 <span class="comment">//</span>
<a name="l07915"></a>07915 <span class="comment">//  void open(string url);</span>
<a name="l07916"></a>07916 <span class="comment">//  void close();</span>
<a name="l07917"></a>07917 <span class="comment">//</span>
<a name="l07918"></a>07918 <span class="comment">//  void setMaster(Record&amp; rec);</span>
<a name="l07919"></a><a class="code" href="classmcs_1_1FITSReader.html#43a16cef81dc34e9c4d4637617093686">07919</a> <span class="comment">//  void setMaster(Record&amp; rec, string sep);</span>
<a name="l07920"></a><a class="code" href="classmcs_1_1FITSReader.html#38e216bcdbe6cf84d44b3522d8eaac3e">07920</a> <span class="comment">//  void setMaster(Record&amp; rec, string sep, string eor);</span>
<a name="l07921"></a>07921 <span class="comment">//};</span>
<a name="l07922"></a>07922 
<a name="l07923"></a>07923 
<a name="l07924"></a>07924 
<a name="l07925"></a>07925 <span class="preprocessor">#define MCS_B64_DEF_LINE   72</span>
<a name="l07926"></a>07926 <span class="preprocessor"></span><span class="preprocessor">#define MCS_B64_MIN_LINE    4</span>
<a name="l07927"></a>07927 <span class="preprocessor"></span>
<a name="l07928"></a>07928 <span class="preprocessor">#define MCS_B64_ENCODE         0</span>
<a name="l07929"></a>07929 <span class="preprocessor"></span><span class="preprocessor">#define MCS_B64_DECODE         1</span>
<a name="l07930"></a>07930 <span class="preprocessor"></span><span class="preprocessor">#define MCS_B64_DECODEINPLACE  2</span>
<a name="l07931"></a>07931 <span class="preprocessor"></span>
<a name="l07937"></a>07937 <span class="keyword">class </span><a class="code" href="classmcs_1_1B64__Codec.html" title="A Base 64 encoder/decoder.">B64_Codec</a> {
<a name="l07938"></a>07938 <span class="keyword">private</span>:
<a name="l07939"></a><a class="code" href="classmcs_1_1FITSWriter.html">07939</a>   <span class="comment">/*</span>
<a name="l07940"></a>07940 <span class="comment">  ** Translation Table as described in RFC1113</span>
<a name="l07941"></a>07941 <span class="comment">  */</span>
<a name="l07942"></a><a class="code" href="classmcs_1_1FITSWriter.html#1f81314d297d9e2a7255e44a6319086a">07942</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* cb64;
<a name="l07943"></a>07943 
<a name="l07944"></a>07944   <span class="comment">/*</span>
<a name="l07945"></a>07945 <span class="comment">  ** Translation Table to decode (created by author)</span>
<a name="l07946"></a>07946 <span class="comment">  */</span>
<a name="l07947"></a>07947   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* cd64;
<a name="l07948"></a>07948 
<a name="l07950"></a>07950   <span class="keywordtype">char</span>* bufAllocated;
<a name="l07951"></a>07951 
<a name="l07953"></a>07953   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bufsize;
<a name="l07954"></a>07954 
<a name="l07956"></a>07956   <span class="keywordtype">void</span> requireSpace(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Length);
<a name="l07957"></a>07957 
<a name="l07959"></a>07959   <span class="keywordtype">void</span> freeBuffer();
<a name="l07960"></a>07960 
<a name="l07962"></a>07962   <span class="keywordtype">char</span>* buf_out;
<a name="l07963"></a>07963 
<a name="l07965"></a>07965   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bufused;
<a name="l07966"></a>07966 
<a name="l07968"></a>07968   <span class="keywordtype">char</span>* pin;
<a name="l07969"></a>07969 
<a name="l07971"></a>07971   <span class="keywordtype">char</span>* pout;
<a name="l07972"></a>07972 
<a name="l07974"></a>07974   <span class="keywordtype">char</span>* EOIB;
<a name="l07975"></a>07975 
<a name="l07977"></a>07977   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> linesize;
<a name="l07978"></a>07978 
<a name="l07980"></a>07980   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> blocksout;
<a name="l07981"></a>07981 
<a name="l07982"></a>07982   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> precData[4];
<a name="l07983"></a>07983   <span class="keywordtype">int</span> precDataCount;
<a name="l07984"></a>07984 
<a name="l07986"></a>07986   <span class="keywordtype">bool</span> eob();
<a name="l07987"></a>07987 
<a name="l07989"></a>07989   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> readData();
<a name="l07990"></a>07990 
<a name="l07992"></a><a class="code" href="mcs_8hh.html#bc3b68f7b44d223bef7eeed07f77faf4">07992</a>   <span class="keywordtype">void</span> writeData(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> d);
<a name="l07993"></a>07993 
<a name="l07995"></a><a class="code" href="mcs_8hh.html#d58882eb088aef5b9e19038ecf481deb">07995</a>   <span class="keywordtype">void</span> encodeblock(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> in[3], <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[4], <span class="keywordtype">int</span> len);
<a name="l07996"></a><a class="code" href="mcs_8hh.html#1ff01b02232955e41e6f7cab866f5633">07996</a> 
<a name="l07998"></a>07998   <span class="keywordtype">void</span> decodeblock(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> in[4], <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[3]);
<a name="l07999"></a>07999 
<a name="l08000"></a>08000 <span class="keyword">public</span>:
<a name="l08001"></a>08001 
<a name="l08003"></a><a class="code" href="classmcs_1_1B64__Codec.html">08003</a>   <a class="code" href="classmcs_1_1B64__Codec.html" title="A Base 64 encoder/decoder.">B64_Codec</a>();
<a name="l08004"></a>08004 
<a name="l08006"></a>08006   ~<a class="code" href="classmcs_1_1B64__Codec.html" title="A Base 64 encoder/decoder.">B64_Codec</a>();
<a name="l08007"></a>08007 
<a name="l08008"></a><a class="code" href="classmcs_1_1B64__Codec.html#64bbf3886841e3bce670b6e98c606b25">08008</a>   <span class="comment">//DO NOT SET par_buf_out = buf_in (sigsegv)</span>
<a name="l08009"></a>08009 
<a name="l08020"></a>08020   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> encode(<span class="keywordtype">char</span>* buf_in, <span class="keywordtype">int</span> Length, <span class="keywordtype">char</span>* par_buf_out = NULL,
<a name="l08021"></a>08021               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> linesize = <a class="code" href="mcs_8hh.html#a7f613e64c4936c79f1c23e96f6a2375">MCS_B64_DEF_LINE</a>);
<a name="l08022"></a>08022 
<a name="l08023"></a>08023   <span class="comment">//Decode may happen also in the same buffer (set par_buf_out =</span>
<a name="l08024"></a>08024   <span class="comment">//buf_in).</span>
<a name="l08025"></a>08025 
<a name="l08036"></a>08036   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decode(<span class="keywordtype">char</span>* buf_in, <span class="keywordtype">int</span> Length, <span class="keywordtype">char</span>* par_buf_out = NULL);
<a name="l08037"></a><a class="code" href="classmcs_1_1B64__Codec.html#75b477a640c35bd747ae5c4f4337b1d6">08037</a> 
<a name="l08038"></a>08038   <span class="keywordtype">char</span>* buffer();
<a name="l08039"></a>08039   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bufUsed();
<a name="l08040"></a><a class="code" href="classmcs_1_1B64__Codec.html#001144db260af937da6194a4ade831e0">08040</a> };
<a name="l08041"></a>08041 
<a name="l08042"></a>08042 
<a name="l08043"></a><a class="code" href="classmcs_1_1B64__Codec.html#2923f196dec371bcdafaf271f11fd161">08043</a> 
<a name="l08044"></a>08044 <span class="preprocessor">#define MCS_SELECT_READ 0</span>
<a name="l08045"></a>08045 <span class="preprocessor"></span><span class="preprocessor">#define MCS_SELECT_WRITE 1</span>
<a name="l08046"></a><a class="code" href="classmcs_1_1B64__Codec.html#8c0e7097036c0723b7f856ed1fffbee2">08046</a> <span class="preprocessor"></span>
<a name="l08047"></a>08047 
<a name="l08048"></a><a class="code" href="classmcs_1_1B64__Codec.html#a424482e06b40b4f7e19f6115a89a9e4">08048</a> <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#19a005a5a2a2d8a7d497ee0058490391">Select</a>(<span class="keywordtype">int</span> fd, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sec_timeout, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> usec_timeout, <span class="keywordtype">int</span> op);
<a name="l08049"></a><a class="code" href="classmcs_1_1B64__Codec.html#ba14c1cf50f540135bc1487ad16501b4">08049</a> <span class="keywordtype">int</span> <a class="code" href="namespacemcs.html#19a005a5a2a2d8a7d497ee0058490391">Select</a>(<span class="keywordtype">int</span> fd[], <span class="keywordtype">int</span> nfd, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sec_timeout, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> usec_timeout, <span class="keywordtype">int</span> op);
<a name="l08050"></a>08050 
<a name="l08051"></a>08051 
<a name="l08052"></a>08052 
<a name="l08053"></a>08053 } <span class="comment">//Namespace mcs</span>
<a name="l08054"></a>08054 <span class="preprocessor">#endif //DEF_MCS_HH</span>
</pre></div><hr size="1">
<table border=0 bgcolor="9f95ff" width="100%">
  <tr>
    <td>
      <a href="http://ross.iasfbo.inaf.it/MCS/" target="_blank">
        <img src="mcslogo_ssss_c.gif" alt="mcslogo" align="left" border="0">
      </a>
    </td>
<!--
    <td>
    <p align="middle">
      <a href="http://ross.iasfbo.inaf.it/mcs/" target="_blank">
         MCS (My Customizable Server)
      </a>
      <br>
      <a href="mailto:Giorgio Calderone <gcalderone@ifc.inaf.it>">
         Giorgio Calderone
      </a>
    </p>
    </td>
    <td>
      <a href="mailto:Giorgio Calderone <gcalderone@ifc.inaf.it>">
        <img src="mcslogo_sss_c.gif" alt="giorgio" align="right" border="0">
      </a>
    </td>
-->
    <td>
        <p align="right">
	MCS (My Customizable Server) ver. 0.3.3-alpha4
	<br>
	Documentation generated on Sat Dec 15 11:05:44 UTC 2012
	</p>
    </td>
  </tr>
</table>
